<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <!-- MOTW-DISABLED saved from url=(0014)about:internet -->
    <title>Archive Retrieval Integration</title>
    <link rel="StyleSheet" href="css/archiving-integration.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        var  WebWorksRootPath = "";
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        // Set reference to top level help frame
        //
        var  WWHFrame = WWHGetWWHFrame("", true);
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
    <!-- THE FOLLOWING IS A GUIDEWIRE STYLE DEFINITION FOR THE LINK TO THIS FEATURE -->
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <!-- THE FOLLOWING IS A GUIDEWIRE GSCRIPT FUNCTION FOR THE LINK TO THIS FEATURE -->
    <script type="text/javascript">
function guidewire_selectall()
{
var text_val=eval("document.linktothisurlform.urlfield");
text_val.focus();
text_val.select();
}
</script>
  </head>
  <body onLoad="WWHUpdate();" onUnload="WWHUnload();" onKeyDown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onKeyPress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onKeyUp="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">
    <!-- THE FOLLOWING IS A GUIDEWIRE DIV FOR THE 'LINK TO THIS' FEATURE -->
    <div id="linkToThisPage" class="popup" style="display: none;">
      <div class="popupTitle">Link Directly to This Page 
           <a href="#" onclick="var thePopup = getElementById('linkToThisPage');thePopup.style.display='none';return false;"><img class="popupClosebox" src="wwhelp/wwhimpl/common/images/close.gif" /></a></div>
      <div style="padding:6px;">
        <div class="popupText" id="linkToThisPageBookmark">An error has occurred if you see this messsage.</div>
        <form name="linktothisurlform" method="post" action="" style="width:275px;margin:0px">
          <input type="text" class="popupURLText" id="linkToThisPageURL" name="urlfield" rows="1" cols="55" onClick="guidewire_selectall();" onFocus="guidewire_selectall();"></input>
        </form>
      </div>
    </div>
    <br />
    <div class="WebWorks_Breadcrumbs" style="text-align: left;">
      <span>ClaimCenter Integration Guide</span> : 
    <span class="WebWorks_Breadcrumbs" style="text-align: left;"><a class="WebWorks_Breadcrumb_Link" href="archiving-integration.15.1.html#2038398">Archiving Integration</a> : Archive Retrieval Integration</span></div>
    <hr align="left" />
    <blockquote>
      <div class="H1_-_Heading_1"><a name="2038398">Archive Retrieval Integration</a></div>
      <div class="B_-_Body"><a name="2039066">The retrieval process moves data from an archive store back into the main database. It is up to you provide the </a>necessary hooks to the restore process. For example, in ClaimCenter, with archiving enabled, the <span class="ui_-_UI_element">Advanced Search</span> screen displays a <span class="ui_-_UI_element">Retrieve from Archive</span> button if the search query returns an archived item.</div>
      <div class="B_-_Body"><a name="2039067">Within ClaimCenter, archive document retrieval undergoes the following stages:</a></div>
      <div class="LS_-_List_Start_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="LS_-_List_Start_inner" style="width: 15pt; white-space: nowrap;">
                <span class="ri_-_run_in_header">	1.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LS_-_List_Start_inner"><a name="2039068">ClaimCenter calls </a><span class="cv_-_computer_voice">IArchiveSoure.retrieve</span>: </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI2_-_Bullet_Item_002c_Level_2_outer" style="margin-left: 67pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner"><a name="2039072">ClaimCenter passes this method a reference to a </a><span class="cv_-_computer_voice">RootInfo</span> object. Your plugin implementation is responsible for returning an <span class="cv_-_computer_voice">InputStream</span> that provides the claim graph in the XML form.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI2_-_Bullet_Item_002c_Level_2_outer" style="margin-left: 67pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner"><a name="2039076">ClaimCenter recreates the referenced entity using the </a><span class="cv_-_computer_voice">InputStream</span> object.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI2_-_Bullet_Item_002c_Level_2_outer" style="margin-left: 67pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner"><a name="2039080">ClaimCenter does </a><span class="s_-_strong">not</span> commit the bundle at this time.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="ri_-_run_in_header">	2.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="2039081">ClaimCenter clears the data on </a><span class="cv_-_computer_voice">ClaimInfo</span> that it copied from the <span class="cv_-_computer_voice">Claim</span> object during the initial archive process.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="ri_-_run_in_header">	3.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="2039082">ClaimCenter creates any data that relate to the restore. For example, notes and history events.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="ri_-_run_in_header">	4.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="2039083">ClaimCenter calls </a><span class="cv_-_computer_voice">IArchiveSource.updateInfoOnRetrieve</span>. <span class="e_-_emphasis">In the demonstration plugin</span>, this method sets the <span class="cv_-_computer_voice">DateEligibleForArchive</span> field to a date based on the <span class="cv_-_computer_voice">DaysRetrievedBeforeArchive</span> configuration parameter. In general, this method gives you a chance to perform additional operations in the same bundle as the retrieval operation, after ClaimCenter recreates all the entities, but before the commit. </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="ri_-_run_in_header">	5.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="2039084">ClaimCenter commits the bundle.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="ri_-_run_in_header">	6.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="2039085">ClaimCenter calls </a><span class="cv_-_computer_voice">IArchiveSource.retrieveFinally</span>. It is up to you to decide what additional handling the restored claim requires, if any. For example, you can use this method to perform final clean up on files in the archive store.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="NI_-_Note_Important">
        <span class="n_-_note">IMPORTANT   </span><a name="2039086">Guidewire does </a><span class="s_-_strong">not</span> recommend, nor does it support, the use of this method to make changes to a claim after you retrieve it. Any attempt to commit these changes in the <span class="cv_-_computer_voice">retrieveFinally</span> method invokes the Preupdate and Validation rules. This is extremely undesirable. As ClaimCenter commits the main transaction for the retrieve process, it does not run these rules. Therefore, it is possible, for example, to retrieve a claim that does not pass validation rules. Committing additional changes in <span class="cv_-_computer_voice">retrieveFinally</span> could fail validation, causing only those changes to be rolled back, not the entire restore.</div>
      <div class="N_-_Note">
        <span class="n_-_note">Note: </span><a name="2039087">Before you delete the returned XML document, first consider whether it is important to compare </a>what the archived item looked like initially with a subsequent archive of the same item.</div>
      <div class="B_-_Body"><a name="2039088">If the retrieval process does not complete successfully, then consult the application logs as well as the (</a><span class="ui_-_UI_element">Server </span><span class="ui_-_UI_element">Tools</span>) <span class="ui_-_UI_element">Archive Info</span> page. To view the <span class="ui_-_UI_element">Archive Info</span> page, you must set configuration parameter <span class="cv_-_computer_voice">ArchiveEnabled</span> to <span class="cv_-_computer_voice">true</span> in <span class="cv_-_computer_voice">config.xml</span>.</div>
      <div class="HS_-_Head_Sub"><a name="2039089">See also</a></div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a href="javascript:WWHClickedPopup('config', 'archiving.71.01.html#1068029', '');" title="Archiving Claims" name="2039093">“Archiving Claims” in the </a><span class="bt_-_book_title"><a href="javascript:WWHClickedPopup('config', 'archiving.71.01.html#1068029', '');" title="Archiving Claims">Configuration Guide</a></span></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a href="javascript:WWHClickedPopup('integration', 'webservices-claim.07.6.html#3387770', '');" title="Archiving and Restoring Claims" name="2039097">“Archiving and Restoring Claims” in the </a><span class="bt_-_book_title"><a href="javascript:WWHClickedPopup('integration', 'webservices-claim.07.6.html#3387770', '');" title="Archiving and Restoring Claims">Integration Guide</a></span></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="H2_-_Heading_2"><a name="2039041">Archive Plugin Retrieve Methods</a></div>
      <div class="BKN_-_Body_002c_Keep_Next"><a name="2038399">ClaimCenter calls the following </a><span class="cv_-_computer_voice">IArchiveSource</span> methods during the archive retrieval lifecycle:</div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt; margin-bottom: 2.0pt; vertical-align: baseline">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;color: #000000; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner" style="color: #000000; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none"><span class="cv_-_computer_voice"><a href="javascript:WWHClickedPopup('integration', 'archiving-integration.15.5.html#2038413', '');" title="Archive Retrieval Integration" name="2038403">retrieve(info : RootInfo) : InputStream</a></span></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt; margin-bottom: 2.0pt; vertical-align: baseline">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;color: #000000; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner" style="color: #000000; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none"><span class="cv_-_computer_voice"><a href="javascript:WWHClickedPopup('integration', 'archiving-integration.15.5.html#2038416', '');" title="Archive Retrieval Integration" name="2038407">updateInfoOnRetrieve(info : RootInfo)</a></span></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt; margin-bottom: 2.0pt; vertical-align: baseline">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;color: #000000; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner" style="color: #000000; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none"><span class="cv_-_computer_voice"><a href="javascript:WWHClickedPopup('integration', 'archiving-integration.15.5.html#2038419', '');" title="Archive Retrieval Integration" name="2038411">retrieveFinally(info : RootInfo, finalStatus : ArchiveFinalStatus, cause : List&lt;String&gt;)</a></span></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="HS_-_Head_Sub"><a name="2038413">retrieve(info : RootInfo) : InputStream</a></div>
      <div class="B_-_Body"><a name="2038414">The archive process passes the </a><span class="cv_-_computer_voice">RootInfo</span> object to the plugin. Your implementation of this plugin must return an <span class="cv_-_computer_voice">InputSteam</span> object that has the content of the document. For archive retrieval to work correctly, the <span class="cv_-_computer_voice">RootInfo</span> object must store enough information to determine how to retrieve the XML document from the backing store.</div>
      <div class="HS_-_Head_Sub"><a name="2038416">updateInfoOnRetrieve(info : RootInfo)</a></div>
      <div class="B_-_Body"><a name="2038417">The retrieval process calls this method within the retrieval transaction. This occurs after the archive process </a>populates the bundle of the <span class="cv_-_computer_voice">RootInfo</span> object with the objects produced by parsing the XML returned by the earlier call to <span class="cv_-_computer_voice">retrieve(RootInfo)</span>.</div>
      <div class="HS_-_Head_Sub"><a name="2038419">retrieveFinally(info : RootInfo, finalStatus : ArchiveFinalStatus, cause : List&lt;String&gt;)</a></div>
      <div class="B_-_Body"><a name="2038420">The retrieval process calls this as the last retrieval step, outside of the restore transaction. The </a><span class="p_-_parameter">finalStatus</span> parameter tells if the restore was successful. Use this plugin method to perform other actions on the storage. For example, deleting the file, or marking its status.</div>
      <script type="text/javascript" language="JavaScript1.2">
        <!--
          // Clear related topics
          //
          WWHClearRelatedTopics();

          document.writeln(WWHRelatedTopicsInlineHTML());
        // -->
      </script>
    </blockquote>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag() + WWHALinksDivTag());
      // -->
    </script>
  </body>
</html>