<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <!-- MOTW-DISABLED saved from url=(0014)about:internet -->
    <title>Metropolitan Configuration</title>
    <link rel="StyleSheet" href="css/metropolitan.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        var  WebWorksRootPath = "";
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        // Set reference to top level help frame
        //
        var  WWHFrame = WWHGetWWHFrame("", true);
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
    <!-- THE FOLLOWING IS A GUIDEWIRE STYLE DEFINITION FOR THE LINK TO THIS FEATURE -->
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <!-- THE FOLLOWING IS A GUIDEWIRE GSCRIPT FUNCTION FOR THE LINK TO THIS FEATURE -->
    <script type="text/javascript">
function guidewire_selectall()
{
var text_val=eval("document.linktothisurlform.urlfield");
text_val.focus();
text_val.select();
}
</script>
  </head>
  <body style="" onLoad="WWHUpdate();" onUnload="WWHUnload();" onKeyDown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onKeyPress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onKeyUp="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">
    <!-- THE FOLLOWING IS A GUIDEWIRE DIV FOR THE 'LINK TO THIS' FEATURE -->
    <div id="linkToThisPage" class="popup" style="display: none;">
      <div class="popupTitle">Link Directly to This Page 
           <a href="#" onclick="var thePopup = getElementById('linkToThisPage');thePopup.style.display='none';return false;"><img class="popupClosebox" src="wwhelp/wwhimpl/common/images/close.gif" /></a></div>
      <div style="padding:6px;">
        <div class="popupText" id="linkToThisPageBookmark">An error has occurred if you see this messsage.</div>
        <form name="linktothisurlform" method="post" action="" style="width:275px;margin:0px">
          <input type="text" class="popupURLText" id="linkToThisPageURL" name="urlfield" rows="1" cols="55" onClick="guidewire_selectall();" onFocus="guidewire_selectall();"></input>
        </form>
      </div>
    </div>
    <br />
    <div class="WebWorks_Breadcrumbs" style="text-align: left;">
      <span>ClaimCenter Integration Guide</span> : 
    <span class="WebWorks_Breadcrumbs" style="text-align: left;"><a class="WebWorks_Breadcrumb_Link" href="metropolitan.22.1.html#1915095">Metropolitan Reporting&nbsp;Bureau Integration</a> : Metropolitan Configuration</span></div>
    <hr align="left" />
    <div>
      <div class="H1_-_Heading_1"><a name="1915095">Metropolitan Configuration</a></div>
      <div class="B_-_Body"><a name="1915101">There are three main places where you must configure Metropolitan:</a></div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="1926714">The main application configuration file, </a><span class="cv_-_computer_voice">config.xml</span>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="1926562">The Metropolitan properties file, </a><span class="cv_-_computer_voice">Metro.properties</span>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="1926651">Display strings in the display properties file, </a><span class="cv_-_computer_voice">display.properties</span>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="H2_-_Heading_2"><a name="1926703">Enabling Metropolitan Configuration</a></div>
      <div class="B_-_Body"><a name="1926704">Metropolitan integration can be enabled or disabled by changing one parameter in the main application configu</a>ration file, <span class="cv_-_computer_voice">config.xml</span>. The corresponding Boolean parameter is defined as follows: </div>
      <div class="CS_-_Code_Single_Line"><a name="2038720">&lt;param name="EnableMetroIntegration" value="true"/&gt;</a></div>
      <div class="B_-_Body"><a name="2038722">Related Metropolitan-related messaging plugins are also defined within </a><span class="cv_-_computer_voice">config.xml</span>. You can make minor configuration changes (such as retry times) to these <span class="e_-_emphasis">destination</span> settings. See <a href="javascript:WWHClickedPopup('integration', 'metropolitan.22.6.html#1928145', '');" title="Metropolitan Error Handling">"Metropolitan Error Handling"</a>.</div>
      <div class="H2_-_Heading_2"><a name="1926652">Metropolitan Properties File</a></div>
      <div class="B_-_Body"><a name="1915104">The Metropolitan properties file (</a><span class="cv_-_computer_voice">Metro.properties</span>) contains most of the configuration information for the Metropolitan integration points.</div>
      <div class="B_-_Body"><a name="1915105">Because the report requests are not “pushed” to ClaimCenter, the ClaimCenter application must poll the Metro</a>politan server regularly. One of the most important configuration parameters that you can make is the time interval between inquiries. This is effectively the delay for a polling request to the server to see if a report is available. The property <span class="cv_-_computer_voice">Metro.InquiryInterval</span> specifies the number of minutes to wait between requests, with a minimum of 60 minutes:</div>
      <div class="CS_-_Code_Single_Line"><a name="1915107">Metro.InquiryInterval = 150</a></div>
      <div class="B_-_Body"><a name="1926573">Additionally, update the following properties specifically for each client with the basic ClaimCenter customer </a>information. Properties include <span class="cv_-_computer_voice">CustAccount</span> and <span class="cv_-_computer_voice">CustBillingAccount</span><span style="font-family: &quot;Lucida Sans Typewriter&quot;; font-size: 7.0pt;">,</span> which are account and billing numbers for each Metropolitan account so the client is charged appropriately. Metropolitan provides these numbers for each client.</div>
      <div class="B_-_Body"><a name="1925888">The </a><span class="cv_-_computer_voice">CustNAIC</span> property is the NAIC number for the ordering company. If you do not know this number, put the value <span class="cv_-_computer_voice">NONE</span>.</div>
      <div class="B_-_Body"><a name="1925895">The following is an example of typical properties in a </a><span class="cv_-_computer_voice">Metro.properties</span> file:</div>
      <PRE class="CF_-_Code_First_Line"><a name="1915111">Metro.CustNAIC          = 11882</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1915112">Metro.CustCompanyName   = Allstate Insurance</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1915113">Metro.CustAddress1      = 123 West Ave</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1915114">Metro.CustAddress2      =</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1915115">Metro.CustCity          = Erie</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1915116">Metro.CustState         = PA</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1915117">Metro.CustZip           = 41222</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1915118">Metro.CustAccount       = Demo</a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="1915119">Metro.CustBillingAccount= MYCODE</a></PRE>
      <div class="B_-_Body"><a name="1935756">There are other properties in that file that typically do not require modification. Only change the other properties </a>if Metropolitan changes the XML formats for date, time, and social security numbers. These property formats are in standard regular expression format.</div>
      <div class="H2_-_Heading_2"><a name="2023136">ClaimCenter Display Properties for Metropolitan</a></div>
      <div class="B_-_Body"><a name="2023138">Within the ClaimCenter display properties file (</a><span class="cv_-_computer_voice">display.properties</span>), define your own error messages and property names for claim pre-update business rules.</div>
      <div class="B_-_Body"><a name="1915706">You can modify many of the parameters, such as the following strings:</a></div>
      <PRE class="CF_-_Code_First_Line"><a name="1915132">Metro.Activity.InsufficientData.Message = Missing field\(s\)\:</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1915133">Metro.Fields.AgentCity = City of the investigating agency</a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="1915134">Metro.Fields.ClaimNumber = Claim Number</a></PRE>
      <div class="B_-_Body"><a name="2039201">The earlier error messages and property names are used (in pre-update rules) if required properties are not </a>defined. ClaimCenter creates an activity that indicate the missing properties so you know where to fix the report request, after which you can resubmit the request.</div>
      <div class="B_-_Body"><a name="1935788">There are many other parameters that begin with “</a><span class="cv_-_computer_voice">Metro.</span>” such as the examples earlier and you can modify all of them. Do not modify any other Metropolitan properties that do not begin with “<span class="cv_-_computer_voice">Metro.</span>”, since they may be implementation details critical to proper functioning and they may change in the future.</div>
      <div class="B_-_Body"><a name="1915267">This file includes other configuration options such as the login name, password, and other parameters necessary </a>to integrate with Metropolitan. Do not update these properties because these properties are common to <span class="e_-_emphasis">all</span> ClaimCenter customers and thus are correct in the built-in configuration.</div>
      <div class="H2_-_Heading_2"><a name="1928333">Configuring Activity Patterns</a></div>
      <div class="B_-_Body"><a name="1928334">The Metropolitan integration includes three </a><span class="e_-_emphasis">activity patterns</span>, which are a type of template for a user activity notification. These activity patterns can be modified directly in addition to the configurable strings discussed in <a href="javascript:WWHClickedPopup('integration', 'metropolitan.22.3.html#2023136', '');" title="Metropolitan Configuration">"ClaimCenter Display Properties for Metropolitan"</a>.</div>
      <div class="B_-_Body"><a name="2030717">The Metropolitan activity patterns are:</a></div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="cv_-_computer_voice"><a name="2030719">metropolitan_request_failed</a></span> - For any report request that fails due to incomplete data or if initial order message fails. This activity pattern creates an <span class="cv_-_computer_voice">metropolitan_request_failed</span> activity and assigns it to the user that created the <span class="cv_-_computer_voice">MetroReport</span> entity associated with the request. The activity description text area includes the type of report requested and the data that must be supplied to successfully submit the request. The Metropolitan workflow and the <span class="cv_-_computer_voice">Metro.gs</span> library uses this activity pattern. </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="cv_-_computer_voice"><a name="1928336">metropolitan_report_unavailable</a></span> - For any report request that fails after sending the request because no report is available. ClaimCenter creates an <span class="cv_-_computer_voice">metropolitan_report_unavailable</span> activity and assigns it to the user that created the <span class="cv_-_computer_voice">MetroReport</span> entity associated with the request. The Metropolitan workflow uses this activity pattern.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="cv_-_computer_voice"><a name="1935897">metropolitan_report_available</a></span> - If a report request succeeds and the report is attached it to the claim, ClaimCenter creates an <span class="cv_-_computer_voice">metropolitan_report_available</span> activity. ClaimCenter assigns it to the user that created the <span class="cv_-_computer_voice">MetroReport</span> entity associated with the request. The Metropolitan workflow uses this activity pattern.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="cv_-_computer_voice"><a name="1935910">metropolitan_report_held</a></span> - If Metropolitcan tells ClaimCenter that it needs additional information from ClaimCenter implementation before Metropolitan can process it, ClaimCenter creates this activity. ClaimCenter creates this activity this if Metropolitan replies with the response <span class="cv_-_computer_voice">hold</span>. The Metropolitan workflow uses this activity pattern.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="cv_-_computer_voice"><a name="2030757">metropolitan_report_deferred</a></span> - For any report requests that takes additional time to process. This is used if Metropolitan replies with the response <span class="cv_-_computer_voice">deferred</span>. The Metropolitan workflow uses this activity pattern.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="cv_-_computer_voice"><a name="2030705">metropolitan_report_inquiry_failed</a></span> - Used if a request to Metropolitan other than the initial order request fails. An activity is generated and then the workflow retries. The Metropolitan workflow uses this activity pattern.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="1928641">For more information about configuring activity patterns, see the </a><span class="bt_-_book_title"><a href="javascript:WWHClickedPopup('config', 'cover-config.html#1151903', '');" title="ClaimCenter Configuration Guide">ClaimCenter Configuration Guide</a></span>.</div>
      <div class="H2_-_Heading_2"><a name="1928850">Configuring the Messaging Plugin Retries</a></div>
      <div class="B_-_Body"><a name="1928881">If the messaging plugins fail to send to Metropolitan, they retries after a time delay between tries, up to a </a>maximum number of times. If Metropolitan does not acknowledge receipt successfully, the messaging plugins retries up to the maximum at the specified interval. The default retry maximum is five times at an interval of 1000 milliseconds. </div>
      <div class="B_-_Body"><a name="1928923">To change this, refer to the server </a><span class="cv_-_computer_voice">config.xml</span> file and change the values in the <span class="cv_-_computer_voice">metro</span> destination section, which is highlighted in the following configuration example in bold:</div>
      <PRE class="CM_-_Code_Middle_Line"><a name="1928862">&lt;destination name="metro" id="11" requestplugin="metroRequest"</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1928863">&nbsp;</a>&nbsp;transportplugin="metroTransport"</PRE>
      <PRE class="CM_-_Code_Middle_Line" style="font-style: normal; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline;"><span class="s_-_strong"><a name="1928864">&nbsp;</a></span><span class="s_-_strong">&nbsp;</span><span class="s_-_strong">initialretryinterval="1000"</span></PRE>
      <PRE class="CM_-_Code_Middle_Line" style="font-style: normal; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline;"><span class="s_-_strong"><a name="1928865">&nbsp;</a></span><span class="s_-_strong">&nbsp;</span><span class="s_-_strong">maxretries="5" </span></PRE>
      <PRE class="CM_-_Code_Middle_Line" style="font-style: normal; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline;"><span class="s_-_strong"><a name="1928866">&nbsp;</a></span><span class="s_-_strong">&nbsp;</span><span class="s_-_strong">retrybackoffmultiplier="2"&gt;</span></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1928867">&nbsp;</a>&nbsp;&lt;event name="MetroReportAdded"/&gt;</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1928868">&nbsp;</a>&nbsp;&lt;event name="MetroReportChanged"/&gt;</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1928869">&lt;/destination&gt;</a></PRE>
      <div class="B_-_Body"><a name="1928935">For more information about messaging and destinations in general, see </a><a href="javascript:WWHClickedPopup('integration', 'eventsmessaging.10.01.html#3808509', '');" title="Messaging and Events">"Messaging and Events"</a>. However, this is a built-in destination and cannot be modified other than the configuration settings documented in this topic.</div>
      <script type="text/javascript" language="JavaScript1.2">
        <!--
          // Clear related topics
          //
          WWHClearRelatedTopics();

          document.writeln(WWHRelatedTopicsInlineHTML());
        // -->
      </script>
    </div>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag() + WWHALinksDivTag());
      // -->
    </script>
  </body>
</html>