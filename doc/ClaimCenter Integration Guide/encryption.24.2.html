<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <!-- MOTW-DISABLED saved from url=(0014)about:internet -->
    <title>Encryption Integration Overview</title>
    <link rel="StyleSheet" href="css/encryption.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        var  WebWorksRootPath = "";
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        // Set reference to top level help frame
        //
        var  WWHFrame = WWHGetWWHFrame("", true);
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
    <!-- THE FOLLOWING IS A GUIDEWIRE STYLE DEFINITION FOR THE LINK TO THIS FEATURE -->
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <!-- THE FOLLOWING IS A GUIDEWIRE GSCRIPT FUNCTION FOR THE LINK TO THIS FEATURE -->
    <script type="text/javascript">
function guidewire_selectall()
{
var text_val=eval("document.linktothisurlform.urlfield");
text_val.focus();
text_val.select();
}
</script>
  </head>
  <body onLoad="WWHUpdate();" onUnload="WWHUnload();" onKeyDown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onKeyPress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onKeyUp="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">
    <!-- THE FOLLOWING IS A GUIDEWIRE DIV FOR THE 'LINK TO THIS' FEATURE -->
    <div id="linkToThisPage" class="popup" style="display: none;">
      <div class="popupTitle">Link Directly to This Page 
           <a href="#" onclick="var thePopup = getElementById('linkToThisPage');thePopup.style.display='none';return false;"><img class="popupClosebox" src="wwhelp/wwhimpl/common/images/close.gif" /></a></div>
      <div style="padding:6px;">
        <div class="popupText" id="linkToThisPageBookmark">An error has occurred if you see this messsage.</div>
        <form name="linktothisurlform" method="post" action="" style="width:275px;margin:0px">
          <input type="text" class="popupURLText" id="linkToThisPageURL" name="urlfield" rows="1" cols="55" onClick="guidewire_selectall();" onFocus="guidewire_selectall();"></input>
        </form>
      </div>
    </div>
    <br />
    <div class="WebWorks_Breadcrumbs" style="text-align: left;">
      <span>ClaimCenter Integration Guide</span> : 
    <span class="WebWorks_Breadcrumbs" style="text-align: left;"><a class="WebWorks_Breadcrumb_Link" href="encryption.24.1.html#2389258">Encryption Integration</a> : Encryption Integration Overview</span></div>
    <hr align="left" />
    <blockquote>
      <div class="H1_-_Heading_1"><a name="2389258">Encryption Integration Overview</a></div>
      <div class="B_-_Body"><a name="2390872">You can store certain data model properties encrypted in the database. For example, hide important data, such as </a>bank account numbers or private personal data, in the database in a non-plaintext format. The actual encryption and decryption is implemented through the <span class="cv_-_computer_voice">IEncryption</span> plugin. You can define your own algorithm. ClaimCenter does not provide an encryption algorithm in the product. ClaimCenter simply calls this plugin implementation, which is responsible for encoding an unencrypted <span class="cvt_-_computer_voice_table">String</span> or reversing that process.</div>
      <div class="NI_-_Note_Important">
        <span class="n_-_note">IMPORTANT   </span><a name="2390895">ClaimCenter provides a sample encryption algorithm that simply reverses the string </a>value. You must disable this plugin if you do not wish to use encryption. You must implement the plugin to properly encrypt your data with your own algorithm.</div>
      <div class="B_-_Body"><a name="2390886">All encryption and decryption is done within ClaimCenter automatically as the application accesses and loads </a>entities from the database. All Gosu rules and web service interfaces automatically operate on plain text (unencrypted text) without special coding to support encryption within rules, web services, and messaging plugins.</div>
      <div class="NW_-_Note_Warning">
        <span class="w_-_warning">WARNING  </span><a name="2380334">Carefully consider security implications of any integrations with external systems for </a>properties that normally are encrypted. From Gosu, any encrypted fields appear unencrypted. If you must avoid sending this information as plain text to external systems, you must design your own integrations to use a secure protocol or encrypt that data. For example, use the plugin registry and use your own encryption plugin to encrypt and decrypt data across the wire in your integration code. Create classes to contain your integration data for each integration point. You can make some properties contain encrypted versions of data that require extra security between systems. Such properties do not need to be database-backed. You can implement <span class="e_-_emphasis">enhancement</span> properties on entities that dynamically return the encrypted version. If your messaging layer uses encryption (for example, SSL/HTTPS) or is on a secure network, additional encryption might not be necessary. It depends on the details of your security requirements.</div>
      <div class="B_-_Body"><a name="2380376">For communication between Guidewire applications, the built-in integrations do not encrypt any encrypted prop</a>erties during the web services interaction. This affects the following integrations:</div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2392881">ClaimCenter and ContactCenter</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2384837">ClaimCenter and PolicyCenter</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="NI_-_Note_Important">
        <span class="n_-_note">IMPORTANT   </span><a name="2380478">The built-in integrations between Guidewire applications do not encrypt properties in </a>the web service connection between the applications. To add additional security, you must customize the integration to use HTTPS or add additional encryption of properties sent across the network.</div>
      <div class="H2_-_Heading_2"><a name="2380624">Setting Encrypted Properties</a></div>
      <div class="B_-_Body"><a name="2358322">You can change the encryption settings for the column in the data model files by overriding the column informa</a>tion (adding a <span class="e_-_emphasis">column override</span>). </div>
      <div class="B_-_Body"><a name="2358136">There are two ways to mark the column as encrypted:</a></div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2358137">Make a column encrypted by specifying its type as </a><span class="cv_-_computer_voice">encrypted</span>:</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="CS_-_Code_Single_Line"><a name="2358138"> &lt;column name="encrypted_column" type="encrypted" size="10"/&gt;</a></div>
      <div class="LP_-_List_Para"><a name="2358764">This makes the property </a><span class="cv_-_computer_voice">encrypted_column</span> to be the type <span class="cv_-_computer_voice">EncryptedString</span>. With this approach, ClaimCenter generates visible masks for all input widgets for this value.</div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2358775">Alternatively, mark a column as encrypted through the </a><span class="cv_-_computer_voice">encryption</span> attribute, which only applies to types based on <span class="cv_-_computer_voice">varchar. </span>This masks values that are accessed directly as bean properties. For example:</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="CS_-_Code_Single_Line"><a name="2358776">&lt;column name="encrypted_column" type="varchar" size="10" encryption="true"/&gt;</a></div>
      <div class="LP_-_List_Para"><a name="2360355">This example makes the property </a><span class="cv_-_computer_voice">encrypted_column</span> to be the type <span class="cv_-_computer_voice">String</span>. In this case, input widgets for this value are masked only if the value is a bean property access. For example, suppose the earlier column is within an entity called <span class="cv_-_computer_voice">TestBean</span>. ClaimCenter generates an input mask if the value expression is the form <span class="cv_-_computer_voice">bean.encrypted_column</span>. However, there is no input mask if the expression is a method invocation like <span class="cv_-_computer_voice">pageHelper.getMyEncryptedColumnValue()</span>.</div>
      <div class="B_-_Body"><a name="2360359">ClaimCenter prevents you from encrypting properties with a denormalized column. In other words, no encryp</a>tion on a property that creates a secondary column to support case-insensitive search. For example, the contact property <span class="cv_-_computer_voice">LastNameDenorm</span> is a denormalized column added to mirror the <span class="cv_-_computer_voice">LastName</span> property, and thus the <span class="cv_-_computer_voice">LastName</span> property cannot be encrypted.</div>
      <div class="H2_-_Heading_2"><a name="2384904">Querying Encrypted Properties</a></div>
      <div class="B_-_Body"><a name="2359468">Gosu database query builder queries (and older-style </a><span class="cv_-_computer_voice">find</span> expressions) work as expected if you compare the property with a literal value. For example, looking up a social security number or other unique ID is comparing with a literal value. However, the encrypted data for every record is not decrypted from the database to test the results of the query. It actually works in the opposite way. If you compare a constant value against an encrypted property, ClaimCenter encrypts the constant in the SQL query. The query embeds the equality comparison logic directly into the SQL. </div>
      <div class="B_-_Body"><a name="2360514">For comparison logic, the SQL that Gosu generates always compares either:</a></div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2360222">two properties from the database (either both encrypted or both unencrypted)</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2360229">a static literal (encrypted if necessary) and a property from the database. </a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="2360233">One side effect of this is that equality comparison is the only supported comparison for encrypted properties. For </a>example you cannot use “greater than” comparison or “less than” comparison.</div>
      <div class="B_-_Body"><a name="2359529">This means that your </a><span class="cv_-_computer_voice">find</span> queries can compare encrypted properties against other values in only two ways:</div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2359530">Direct equality comparison (</a><span class="cv_-_computer_voice">==</span>) or not equals (<span class="cv_-_computer_voice">!=</span>) a Gosu expression of type of <span class="cv_-_computer_voice">String</span> </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2359531">Direct equality comparison (</a><span class="cv_-_computer_voice">==</span>) or not equals (<span class="cv_-_computer_voice">!=</span>) with a field path to another encrypted property</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="2359908">For example, suppose </a><span class="cv_-_computer_voice">Claim.SecretVal</span> and <span class="cv_-_computer_voice">Claim.SecretVal2</span> are encrypted properties, suppose <span class="cv_-_computer_voice">Claim.OtherVal</span> and <span class="cv_-_computer_voice">Claim.OtherVal2</span> are unencrypted properties, and suppose <span class="cv_-_computer_voice">tempValue</span> is a local variable containing a <span class="cv_-_computer_voice">String</span>.</div>
      <div class="B_-_Body"><a name="2359909">The following queries </a><span class="s_-_strong">work</span>:</div>
      <PRE class="CM_-_Code_Middle_Line"><a name="2386504">q.compare("SecretVal", Equals, "123")</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2386256">q.compare("SecretVal", NotEquals, "123")</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2386305">q.compare("SecretVal", Equals, tempValue)</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2386306">q.compare("SecretVal", NotEquals, tempValue)</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2386428">q.compare("SecretVal", Equals, q.getColumnRef("SecretVal2")) // both encrypted</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2386429">q.compare("SecretVal", NotEquals, q.getColumnRef("SecretVal2")) // both encrypted</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2386441">q.compare("OtherVal", Equals, q.getColumnRef("OtherVal2")) // both unencrypted</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2386442">q.compare("OtherVal", NotEquals, q.getColumnRef("OtherVal2")) // both unencrypted</a></PRE>
      <div class="B_-_Body"><a name="2359765">The following queries </a><span class="s_-_strong">do not work</span>:</div>
      <PRE class="CM_-_Code_Middle_Line"><a name="2386562">q.compare("SecretVal", Equals, q.getColumnRef("OtherVal")) // bad mix of encrypted and unencrypted</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2386588">q.compare("SecretVal", NotEquals, q.getColumnRef("OtherVal")) // bad mix of encrypted and unencrypted</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2386600">q.compare("SecretVal", GreaterThan, "123") </a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// no greater than or less than</PRE>
      <div class="NI_-_Note_Important">
        <span class="n_-_note">IMPORTANT   </span><a name="2359448">If a Gosu </a><span class="cv_-_computer_voice">find</span> query involves encrypted properties, you can use equality comparison with other encrypted properties or against <span class="cv_-_computer_voice">String</span> values constants in the query. However, there are limitations with what you can do in the query. Refer to the instructions in this section for details.</div>
      <div class="H2_-_Heading_2"><a name="2392886">Duplicate Check Search Template and Encryption</a></div>
      <div class="B_-_Body"><a name="2392887">In the base configuration, the ClaimCenter duplicate check search template supports encryption. </a></div>
      <div class="H2_-_Heading_2"><a name="2359408">Writing Your Encryption Plugin</a></div>
      <div class="B_-_Body"><a name="2358160">Write and implement a class that implements the </a><span class="cv_-_computer_voice">IEncryption</span> plugin interface. Its responsibility is to encrypt and decrypt data with one encryption algorithm.</div>
      <div class="B_-_Body"><a name="2385234">To encrypt, implement an </a><span class="cv_-_computer_voice">encrypt</span> method that takes an unencrypted <span class="cv_-_computer_voice">String</span> and returns an encrypted <span class="cv_-_computer_voice">String</span>, which may or may not be a different length than the original text. If you want to use strong encryption and are permitted to do so legally, you are free to do so. ClaimCenter does not include any actual encryption algorithm. </div>
      <div class="B_-_Body"><a name="2385247">To decrypt, implement a </a><span class="cv_-_computer_voice">decrypt</span> method that takes an encrypted <span class="cv_-_computer_voice">String</span> and returns the original unencrypted <span class="cv_-_computer_voice">String</span>.</div>
      <div class="B_-_Body"><a name="2358164">You must also specify the maximum length of the encrypted string by implementing the </a><span class="cv_-_computer_voice">getEncryptedLength</span> method. Its argument is the length of decrypted data. It must return the maximum length of the encrypted data. ClaimCenter primarily uses the encryption length at application startup time during upgrades. During the upgrade process, the application must to determine the required length of encrypted columns. If the length of the column must increase to accommodate inflation of encrypted data, then this method helps ClaimCenter know how far to increase space for the database column.</div>
      <div class="B_-_Body"><a name="2358168">To uniquely identify your encryption algorithm, your plugin must return an encryption ID. Implement a </a><span class="cv_-_computer_voice">getEncryptionIdentifier</span> method to return a unique identifier for your encryption algorithm. This identifier tracks encryption-related change control. This is exposed to Gosu as the property <span class="cv_-_computer_voice">EncryptionIdentifier</span>:</div>
      <PRE class="CM_-_Code_Middle_Line"><a name="2390736">override property get EncryptionIdentifier() : String {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2390737">    return "ABC:DES3" </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2390738">  }</a></PRE>
      <div class="B_-_Body"><a name="2390752">The encryption ID is very important and must be unique among all encryption plugins in your implementation. </a>The application decides whether to upgrade the encryption data with a new algorithm by comparing:</div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2390535">the encryption ID of the current encryption plugin </a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2390550">the encryption ID associated with the database the last time the server ran. </a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="2390558">For important details, see </a><a href="javascript:WWHClickedPopup('integration', 'encryption.24.3.html#2388115', '');" title="Changing Your Encryption Algorithm Later">“Changing Your Encryption Algorithm Later”</a>.</div>
      <div class="NI_-_Note_Important">
        <span class="n_-_note">IMPORTANT   </span><a name="2387039">Be careful that your encryption plugin returns an appropriate encryption ID and that it is </a>unique among all your encryption plugins.</div>
      <div class="B_-_Body"><a name="2385355">The following example is a simple demonstration encryption plugin. It simple fake encryption algorithm is to </a>append a reversed version of the unencrypted text to the end of the text. For example, encrypting the text <span class="cv_-_computer_voice">"hello"</span> becomes <span class="cv_-_computer_voice">"helloolleh"</span>. </div>
      <div class="B_-_Body"><a name="2390602">To decrypt the text, it merely removes the second half of the string. The second half of the string is the reversed </a>part of the text that it appended earlier when encrypting the string. It is important to note that this fake algorithm doubles the size of the encrypted data, hence the <span class="cv_-_computer_voice">getEncryptedLength</span> doubles and returns the input size argument.</div>
      <div class="B_-_Body"><a name="2390613">The following Gosu code implements this plugin</a></div>
      <PRE class="CF_-_Code_First_Line"><a name="2358170">package Plugins</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2358171">uses gw.plugin.util.IEncryption</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2358172">uses java.lang.StringBuilder</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2358173">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2358174">class EncryptionByReversePlugin implements IEncryption</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2358175">{</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2358176">&nbsp;</a>&nbsp;override function encrypt(value:String) : String {</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2358177">    return reverse(value)</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2358178">  }</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2358179">  </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2358180">  override function decrypt(value:String) : String {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2358181">    return value.subString(value.length() / 2, value.length());</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2358182">  }</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2358183">  </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2358184">  override function getEncryptedLength(size:int) : int {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2358185">    return size * 2 // encrypting doubles the size </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2358186">  }</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2358187">  </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2358188">  override property get EncryptionIdentifier() : String {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2358189">    return "mycompany:reverse"</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2358190">  }</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2358191">  </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2358192">  private function reverse(value:String) : String {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2358193">    var buffer = new StringBuilder(value)</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2358194">    return buffer.reverse().append(value).toString()</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2358195">  }</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2358196">  </a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="2358197">}</a></PRE>
      <div class="HS_-_Head_Sub"><a name="2358679">If You Import Data from Staging Tables</a></div>
      <div class="B_-_Body"><a name="2390097">Suppose you have existing production data and you modify the data model. If you increment the data model </a>version number, the system automatically encrypts your data the first time you launch the server during upgrade. This drops your staging tables during this process if you are using staging table import. Consequently, perform your basic data encryption data model changes and upgrade <span class="s_-_strong">before</span> beginning any staging table import work.</div>
      <div class="B_-_Body"><a name="2390101">You can change your encryption algorithm later. See </a><a href="javascript:WWHClickedPopup('integration', 'encryption.24.3.html#2388115', '');" title="Changing Your Encryption Algorithm Later">“Changing Your Encryption Algorithm Later”</a>.</div>
      <div class="H2_-_Heading_2"><a name="2390102">Installing Your Encryption Plugin</a></div>
      <div class="B_-_Body"><a name="2385067">After you have written your implementation of the </a><span class="cv_-_computer_voice">IEncryption</span> plugin, you must register your plugin.</div>
      <div class="HS_-_Head_Sub"><a name="2385184">Perform the following steps to enable your encryption plugin</a></div>
      <div class="LS_-_List_Start_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="LS_-_List_Start_inner" style="width: 15pt; white-space: nowrap;">
                <span class="ri_-_run_in_header">	1.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LS_-_List_Start_inner"><a name="2385086">Create a new class that implements the </a><span class="cv_-_computer_voice">IEncryption</span> plugin interface. Be certain that your <span class="cv_-_computer_voice">EncryptionIdentifier</span> method returns a unique encryption identifier. If you ever change your encryption algorithm, it is critical that you change the encryption identifier for your new implementation. </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="NI_-_Note_Important">
        <span class="n_-_note">IMPORTANT   </span><a name="2385504">Guidewire strongly recommends you set the encryption ID for your current encryption </a>plugin to a name that describes the algorithm itself. For example, <span class="cv_-_computer_voice">"encryptDES3"</span>. </div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="ri_-_run_in_header">	2.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="2385173">In Studio, navigate to </a><span class="ui_-_UI_element">Resources</span> → <span class="ui_-_UI_element">Configuration</span> → <span class="ui_-_UI_element">Plugins</span> → <span class="ui_-_UI_element">gw</span> → <span class="ui_-_UI_element">plugins</span> → <span class="ui_-_UI_element">util</span> → <span class="ui_-_UI_element">IEncryption</span>. </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="ri_-_run_in_header">	3.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="2385112">Right-click on </a><span class="cv_-_computer_voice">IEncryption</span> and choose <span class="ui_-_UI_element">Add Implementation...</span></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="ri_-_run_in_header">	4.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="2385130">Because you can have more than one registered implementation of an </a><span class="cv_-_computer_voice">IEncryption</span> plugin, Studio prompts you to name your new plugin. This name must be unique among all your plugins. This is called the <span class="e_-_emphasis">plugin</span><span class="e_-_emphasis">&nbsp;</span><span class="e_-_emphasis">name</span>. </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="NI_-_Note_Important">
        <span class="n_-_note">IMPORTANT   </span><a name="2385554">Guidewire strongly recommends you set the plugin name for your current encryption </a>plugin to a name that describes the algorithm itself. For example, <span class="cv_-_computer_voice">"encryptDES3"</span>. Do not confuse the <span class="e_-_emphasis">plugin name</span> with the <span class="e_-_emphasis">full class name</span> or the <span class="e_-_emphasis">encryption ID</span>. These text values are all used in different ways.</div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="ri_-_run_in_header">	5.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="2385013">Edit standard plugin fields in the Plugins editor in Studio. See </a><a href="javascript:WWHClickedPopup('config', 'studio_plugins.13.1.html#1178213', '');" title="Using the Plugins Editor">“Using the Plugins Editor”</a>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="ri_-_run_in_header">	6.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="2385387">There is a </a><span class="cv_-_computer_voice">config.xml</span> configuration parameter called <span class="cv_-_computer_voice">CurrentEncryptionPlugin</span>. It specifies which encryption plugin (among potentially multiple versions) is the current encryption algorithm for the main database. Set this parameter to the <span class="e_-_emphasis">plugin name</span> (not the class name, not the encryption ID) for the current encryption plugin. If this configuration parameter is missing, the application assumes that the current algorithm <span class="cv_-_computer_voice">IEncryption</span> plugin with name <span class="cv_-_computer_voice">"IEncryption"</span> is the current encryption plugin. Any legacy plugins for which you did not choose a name have the default name <span class="cv_-_computer_voice">IEncryption</span>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="N_-_Note">
        <span class="n_-_note">Note: </span><a name="2390133">You can register any number of </a><span class="cv_-_computer_voice">IEncryption</span> plugins (just as with messaging plugins). This is to support changing your encryption algorithm later. For related information, see <a href="javascript:WWHClickedPopup('integration', 'encryption.24.3.html#2388115', '');" title="Changing Your Encryption Algorithm Later">“Changing Your Encryption Algorithm Later”</a>.</div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="ri_-_run_in_header">	7.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="2387256">Start the server. If the upgrader detects data model fields marked as encrypted but the database contains unen</a>crypted versions, the upgrader encrypts the field in the main database using the current encryption plugin.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="NI_-_Note_Important">
        <span class="n_-_note">IMPORTANT   </span><a name="2392892">The upgrader does </a><span class="s_-_strong">not </span>upgrade<span class="s_-_strong"> </span><span class="e_-_emphasis" style="font-weight: normal">claim snapshots</span> or <span class="e_-_emphasis">archive databases</span> during the normal upgrade process. For important information about upgrading claim snapshots and archive databases, see <a href="javascript:WWHClickedPopup('integration', 'encryption.24.4.html#2392955', '');" title="Encryption Changes with Archiving and Snapshots">“Encryption Changes with Archiving and Snapshots”</a></div>
      <div class="B_-_Body"><a name="2389346">If you want to change your encryption algorithm, it is critical to review the section </a><a href="javascript:WWHClickedPopup('integration', 'encryption.24.3.html#2388115', '');" title="Changing Your Encryption Algorithm Later">“Changing Your Encryption Algorithm Later”</a>.</div>
      <div class="H2_-_Heading_2"><a name="2387610">Adding or Removing Encrypted Properties</a></div>
      <div class="B_-_Body"><a name="2387618">If you later add or remove encrypted properties in the data model, upgrader automatically runs on server startup </a>to update the main database to the new data model.</div>
      <div class="NI_-_Note_Important">
        <span class="n_-_note">IMPORTANT   </span><a name="2392900">The upgrader does </a><span class="s_-_strong">not </span>upgrade<span class="s_-_strong"> </span><span class="e_-_emphasis" style="font-weight: normal">claim snapshots</span> or <span class="e_-_emphasis">archive databases</span> during the normal upgrade process. For important information about upgrading claim snapshots and archive databases, see <a href="javascript:WWHClickedPopup('integration', 'encryption.24.4.html#2392955', '');" title="Encryption Changes with Archiving and Snapshots">“Encryption Changes with Archiving and Snapshots”</a></div>
      <script type="text/javascript" language="JavaScript1.2">
        <!--
          // Clear related topics
          //
          WWHClearRelatedTopics();

          document.writeln(WWHRelatedTopicsInlineHTML());
        // -->
      </script>
    </blockquote>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag() + WWHALinksDivTag());
      // -->
    </script>
  </body>
</html>