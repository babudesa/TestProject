<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <!-- MOTW-DISABLED saved from url=(0014)about:internet -->
    <title>ISO Messaging Destination</title>
    <link rel="StyleSheet" href="css/isointegration.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        var  WebWorksRootPath = "";
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        // Set reference to top level help frame
        //
        var  WWHFrame = WWHGetWWHFrame("", true);
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
    <!-- THE FOLLOWING IS A GUIDEWIRE STYLE DEFINITION FOR THE LINK TO THIS FEATURE -->
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <!-- THE FOLLOWING IS A GUIDEWIRE GSCRIPT FUNCTION FOR THE LINK TO THIS FEATURE -->
    <script type="text/javascript">
function guidewire_selectall()
{
var text_val=eval("document.linktothisurlform.urlfield");
text_val.focus();
text_val.select();
}
</script>
  </head>
  <body onLoad="WWHUpdate();" onUnload="WWHUnload();" onKeyDown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onKeyPress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onKeyUp="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">
    <!-- THE FOLLOWING IS A GUIDEWIRE DIV FOR THE 'LINK TO THIS' FEATURE -->
    <div id="linkToThisPage" class="popup" style="display: none;">
      <div class="popupTitle">Link Directly to This Page 
           <a href="#" onclick="var thePopup = getElementById('linkToThisPage');thePopup.style.display='none';return false;"><img class="popupClosebox" src="wwhelp/wwhimpl/common/images/close.gif" /></a></div>
      <div style="padding:6px;">
        <div class="popupText" id="linkToThisPageBookmark">An error has occurred if you see this messsage.</div>
        <form name="linktothisurlform" method="post" action="" style="width:275px;margin:0px">
          <input type="text" class="popupURLText" id="linkToThisPageURL" name="urlfield" rows="1" cols="55" onClick="guidewire_selectall();" onFocus="guidewire_selectall();"></input>
        </form>
      </div>
    </div>
    <br />
    <div class="WebWorks_Breadcrumbs" style="text-align: left;">
      <span>ClaimCenter Integration Guide</span> : 
    <span class="WebWorks_Breadcrumbs" style="text-align: left;"><a class="WebWorks_Breadcrumb_Link" href="isointegration.21.01.html#1768248">Insurance Services Office (ISO) Integration</a> : ISO Messaging Destination</span></div>
    <hr align="left" />
    <blockquote>
      <div class="H1_-_Heading_1"><a name="1768248">ISO Messaging Destination</a></div>
      <div class="B_-_Body"><a name="1448226">After you enable the ISO destination (see </a><a href="javascript:WWHClickedPopup('integration', 'isointegration.21.02.html#1762744', '');" title="ISO Integration Overview">“Enabling ISO Integration”</a>), the ISO destination requests notification for certain ClaimCenter events. Events are an abstraction of changes to Guidewire business data. The ISO destination listens for the messaging events <span class="cv_-_computer_voice">ClaimAdded</span>, <span class="cv_-_computer_voice">ClaimChanged,</span> <span class="cv_-_computer_voice">ExposureChanged</span>, and others. Event Fired rules create ISO-related messages as appropriate.</div>
      <div class="B_-_Body"><a name="1762895">The ISO destination sends three subtypes of outgoing messages of type </a><span class="e_-_emphasis">Message 1: Sending Claims</span>:</div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="ri_-_run_in_header"><a name="1762896">Initial search request.</a></span> The initial search request is sent if the exposure becomes valid.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="ri_-_run_in_header"><a name="1762897">Replacement search requests.</a></span> Replacement search requests are sent if the exposure changes. These are nearly identical to the initial search request. A flag in the message indicates whether the information in this request is a new record or if it replaces previous information for the exposure.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="ri_-_run_in_header"><a name="1448233">Key field updates.</a></span> Key field updates are sent after changes to a key field such as the claim number, policy number, agency ID, or loss date. These update messages are handled specially by the destination because ISO uses a different protocol for changes to properties that uniquely identify an exposure. A key field update is immediately followed by a replacement search request because key field changes might result in new matches. </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="1775022">The rules use a lot of shared code in a Gosu ISO library (the </a><span class="cv_-_computer_voice">libraries.ISO</span> class). You probably must customize this code for your data model, particularly the <span class="cv_-_computer_voice">createPayload</span> method. The <span class="cv_-_computer_voice">createPayload</span> method which creates the payload for a search request. The details of the payload depend on the your exposure types, policy types, coverage types and coverage sub types so they could not be hard coded in the destination. This is described more fully in <a href="javascript:WWHClickedPopup('integration', 'isointegration.21.15.html#1763295', '');" title="ISO Payload XML Customization">“ISO Payload XML Customization”</a>.</div>
      <div class="B_-_Body"><a name="1775030">After the messaging destination sends a message to ISO, ClaimCenter gets an immediate </a><span class="e_-_emphasis">receipt</span> letting it know that ISO queued the request. If the receipt indicates a failure, then the destination adds an error acknowledgement immediately. Otherwise it waits for the following response which is either a success (possibly containing match reports) or an error response. If the ISO destination sees a successful response, it adds an acknowledgement. If it sees a failure, it adds an error acknowledgement.</div>
      <div class="B_-_Body"><a name="1448236">Key field updates are more complicated because ISO does not send a response if a key field update is successful. </a>Instead, the destination waits for 2 minutes (a configurable delay) and if no error response appears within that time, the ISO destination submits the acknowledgement.</div>
      <div class="B_-_Body"><a name="1448237">The destination tracks whether a particular claim or exposure successfully added to the ISO database. In other </a>words, did it ever had a <span class="s_-_strong">successful</span> initial search request? Once it gets a successful response from ISO, the ISO destination sets the claim or exposure field <span class="cv_-_computer_voice">ISOKnown</span> to true and marks all future search requests as replacement search requests.</div>
      <div class="B_-_Body"><a name="1448238">There are several error cases:</a></div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="ri_-_run_in_header"><a name="1448245">ClaimCenter cannot contact ISO.</a></span> The inability for ClaimCenter to contact ISO for the send request is considered a temporary <span class="e_-_emphasis">retryable</span> error. The destination uses the standard destination <span class="e_-_emphasis">backoff</span><span class="e_-_emphasis">&nbsp;</span><span class="e_-_emphasis">delay</span> and retries with increasing delay time.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="ri_-_run_in_header"><a name="1448246">ISO sends a failure receipt.</a></span> Failure receipts indicate a <span class="e_-_emphasis">non-retryable</span> error. Something must be wrong with the configuration for ISO to reject the request. The ISO destination submits an error (negative) acknowledgement for the message, and then an administrator must diagnose what went wrong, fix the configuration problem, and send a new ISO message. If the problem is the <span class="e_-_emphasis">message payload</span> due to incorrect design of business rules, a common problem during development, it is important that you do <span class="s_-_strong">not </span>retry the message. Instead, delete the message and send it again by modifying the data or using the <span class="ui_-_UI_element">Send to ISO</span> button within the ClaimCenter user interface. </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="ri_-_run_in_header"><a name="1448250">ISO sends a failure response.</a></span> Failure response indicate a <span class="e_-_emphasis">non-retryable</span> error. Something must be wrong with the configuration for ISO to reject the request. The ISO destination submits an error (negative) acknowledgement for the message, and then an administrator must diagnose what went wrong, fix the configuration problem, and send a new ISO message. If the problem is the <span class="e_-_emphasis">message payload</span> due to incorrect design of business rules, a common problem during development, it is important that you do <span class="s_-_strong">not </span>retry the message. Instead, delete the message and send it again by modifying the data or using the <span class="ui_-_UI_element">Send to ISO</span> button within the ClaimCenter user interface.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="ri_-_run_in_header"><a name="1448260">ClaimCenter is down, preventing ISO from responding.</a></span> If ISO cannot reach ClaimCenter, ISO usually retries for at least 12 hours. This typically is not a problem unless ClaimCenter is down for more than 12 hours. </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="1448264">The ISO destination and its associated classes have their own logger category. Setting </a><span class="cv_-_computer_voice">log4j.category.Integration.messaging.ISO</span> to <span class="cv_-_computer_voice">DEBUG</span> generates log messages whenever an ISO message is sent or received. There is also the ISO property <span class="cv_-_computer_voice">ISO.LogMessagesDir</span>, which causes all ISO messages and responses to be logged to a directory. </div>
      <div class="NI_-_Note_Important">
        <span class="n_-_note">IMPORTANT   </span><a name="1762901">If you use ClaimCenter clusters, data changes may happen on any server in the cluster. </a>Consequently, any server may trigger ISO rules that generate outgoing messages to ISO. Although any server can add a message to the messaging send queue, the actual outgoing communication between ClaimCenter and ISO happens only on the server designated the batch server. Messaging plugins for outgoing ISO messages and the ISO receive servlet for ISO responses run <span class="s_-_strong">only</span> on the batch server.</div>
      <script type="text/javascript" language="JavaScript1.2">
        <!--
          // Clear related topics
          //
          WWHClearRelatedTopics();

          document.writeln(WWHRelatedTopicsInlineHTML());
        // -->
      </script>
    </blockquote>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag() + WWHALinksDivTag());
      // -->
    </script>
  </body>
</html>