<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <!-- MOTW-DISABLED saved from url=(0014)about:internet -->
    <title>Reporting Acknowledgements and Errors</title>
    <link rel="StyleSheet" href="css/eventsmessaging.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        var  WebWorksRootPath = "";
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        // Set reference to top level help frame
        //
        var  WWHFrame = WWHGetWWHFrame("", true);
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
    <!-- THE FOLLOWING IS A GUIDEWIRE STYLE DEFINITION FOR THE LINK TO THIS FEATURE -->
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <!-- THE FOLLOWING IS A GUIDEWIRE GSCRIPT FUNCTION FOR THE LINK TO THIS FEATURE -->
    <script type="text/javascript">
function guidewire_selectall()
{
var text_val=eval("document.linktothisurlform.urlfield");
text_val.focus();
text_val.select();
}
</script>
  </head>
  <body onLoad="WWHUpdate();" onUnload="WWHUnload();" onKeyDown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onKeyPress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onKeyUp="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">
    <!-- THE FOLLOWING IS A GUIDEWIRE DIV FOR THE 'LINK TO THIS' FEATURE -->
    <div id="linkToThisPage" class="popup" style="display: none;">
      <div class="popupTitle">Link Directly to This Page 
           <a href="#" onclick="var thePopup = getElementById('linkToThisPage');thePopup.style.display='none';return false;"><img class="popupClosebox" src="wwhelp/wwhimpl/common/images/close.gif" /></a></div>
      <div style="padding:6px;">
        <div class="popupText" id="linkToThisPageBookmark">An error has occurred if you see this messsage.</div>
        <form name="linktothisurlform" method="post" action="" style="width:275px;margin:0px">
          <input type="text" class="popupURLText" id="linkToThisPageURL" name="urlfield" rows="1" cols="55" onClick="guidewire_selectall();" onFocus="guidewire_selectall();"></input>
        </form>
      </div>
    </div>
    <br />
    <div class="WebWorks_Breadcrumbs" style="text-align: left;">
      <span>ClaimCenter Integration Guide</span> : 
    <span class="WebWorks_Breadcrumbs" style="text-align: left;"><a class="WebWorks_Breadcrumb_Link" href="eventsmessaging.10.01.html#4016335">Messaging and Events</a> : Reporting Acknowledgements and Errors</span></div>
    <hr align="left" />
    <blockquote>
      <div class="H1_-_Heading_1"><a name="4016335">Reporting Acknowledgements and Errors</a></div>
      <div class="B_-_Body"><a name="4016759">ClaimCenter expects to receive acknowledgements back from the destination. In most cases, the destination </a>submits a <span class="e_-_emphasis">positive acknowledgement</span> to indicate success. However, errors can also occur, and you must tell ClaimCenter about the issue.</div>
      <div class="H3_-_Heading_3"><a name="3247056">Submitting Acks and Errors and Duplicates from Your Messaging Plugin</a></div>
      <div class="B_-_Body"><a name="3247068">To submit an acknowledgement or a negative acknowledgement from a Java messaging plugin, use the </a><span class="cv_-_computer_voice">Message</span> methods based on the success or failure:</div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="3247084">If successful, call </a><span class="cv_-_computer_voice">reportAck()</span>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="3247088">If message had a retryable error, call </a><span class="cv_-_computer_voice">reportError()</span>. There is an optional method signature that takes a <span class="cv_-_computer_voice">Date</span>. Use this alternate signature to automatically retry a message at a later time. This is equivalent to using the application user interface to in the Administration tab at that specified time, and select the message and click Retry.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="3247100">If the message had a non-retryable error, call </a><span class="cv_-_computer_voice">reportNonRetryableError()</span>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="4068882">If the message was a duplicate, call </a><span class="cv_-_computer_voice">reportDuplicate()</span> on the message history entity. The <span class="cv_-_computer_voice">MessageFinder</span> interface has methods to allow the reply plugin to find message history entities given the original message ID or the sender reference ID. </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LP_-_List_Para"><a name="4087497">If your duplicate detection code runs in the </a><span class="cv_-_computer_voice">MessageTransport</span> plugin, you can use standard database query code to find the original message. From within a <span class="cv_-_computer_voice">MessageReply</span> plugin, use the <span class="cv_-_computer_voice">MessageFinder</span> object to find messages during asynchronous message reply handling. The <span class="cv_-_computer_voice">MessageFinder</span> methods are as follows:</div>
      <div class="BI2_-_Bullet_Item_002c_Level_2_outer" style="margin-left: 67pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner"><span class="cv_-_computer_voice"><a name="4068884">findHistoryByOriginalMessageID(</a></span>int originalMessageId<span class="cv_-_computer_voice">)</span> - find message history entity by original message ID</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI2_-_Bullet_Item_002c_Level_2_outer" style="margin-left: 67pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner"><span class="cv_-_computer_voice"><a name="4068885">findHistoryBySenderRefID(String senderRefID, int destinationID)</a></span> - find message history entity by sender reference ID</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LP_-_List_Para"><a name="4068886">After you find the original message in the message history table, report the duplicate message by calling </a><span class="cv_-_computer_voice">reportDuplicate</span> on the original message. </div>
      <div class="B_-_Body"><a name="3247173">If you use asynchronous message replies using the </a><span class="cv_-_computer_voice">MessageReply</span> plugin, you must take additional steps. You must get a reference to the associated <span class="cv_-_computer_voice">Message</span> entity from your plugin so that you call these <span class="cv_-_computer_voice">Message</span> methods. For more information about this topic, see <a href="javascript:WWHClickedPopup('integration', 'eventsmessaging.10.12.html#3110489', '');" title="Implementing Messaging Plugins">“Implementing a Message Reply Plugin”</a>.</div>
      <div class="H3_-_Heading_3"><a name="3247069">Submitting Acks and Errors Directly from External Systems</a></div>
      <div class="B_-_Body"><a name="3247109">If you want to acknowledge the message directly from the external system, use the SOAP API </a><span class="cv_-_computer_voice">IMessagingTools.acknowledgeMessage(ack)</span>. First, you create an <span class="cv_-_computer_voice">Acknolwedgement</span> SOAP entity. If you detect problems with the message, set the following properties:</div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="ri_-_run_in_header"><a name="3246797">Error.</a></span> Set the <span class="cv_-_computer_voice">Acknowledgement.error</span> property to <span class="cv_-_computer_voice">true</span> if there was an error.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="ri_-_run_in_header"><a name="3246857">Duplicate.</a></span> If you detect the message is a duplicate, set the <span class="cv_-_computer_voice">Acknowledgement.duplicate</span> property to <span class="cv_-_computer_voice">true</span>. Also set <span class="cv_-_computer_voice">Acknowledgement.error</span> to <span class="cv_-_computer_voice">true</span>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="ri_-_run_in_header"><a name="3751556">Retryable.</a></span> If the error is retryable, set the <span class="cv_-_computer_voice">Acknowledgement.retryable</span> property to <span class="cv_-_computer_voice">true</span> and <span class="cv_-_computer_voice">Acknowledgement.error</span> to <span class="cv_-_computer_voice">true</span>. A message could be retryable if the error at the destination system is temporary. For instance, if the record to be updated is locked, it is a temporary error. If the message has a retry error, then you can request a retry through the administrative user interface.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="H3_-_Heading_3"><a name="3247131">Reporting Errors and Retrying Messages from SOAP APIs</a></div>
      <div class="B_-_Body"><a name="4016842">The web service interface </a><span class="cv_-_computer_voice">IMessagingToolsAPI</span> contains methods to retry messages with retryable errors. </div>
      <div class="B_-_Body"><a name="4016874">See the API Reference Javadoc documentation for the </a><span class="cv_-_computer_voice">IMessagingToolsAPI</span> methods <span class="cv_-_computer_voice">retryMessage</span> and <span class="cv_-_computer_voice">retryRetryableErrorMessages</span>, the latter of which optionally limits retry attempts to a specified destination. You can only use the <span class="cv_-_computer_voice">IMessagingToolsAPI</span> interface if the server’s run mode is set to <span class="cv_-_computer_voice">multiuser</span>. Otherwise, all these methods throw an exception.</div>
      <div class="B_-_Body"><a name="4323144">If the acknowledgement is positive (an </a><span class="e_-_emphasis">Ack</span>), then ClaimCenter marks the message as successfully sent. If the message was associated with a claim, ClaimCenter sends the <span class="s_-_strong">next</span> message for that claim/destination pair, if any such message exists in the send queue.</div>
      <div class="B_-_Body"><a name="4016897">As part of an </a><span class="e_-_emphasis">Ack</span>, the destination can ask ClaimCenter to update properties on the objects that generated the message. For example, this could be used to set the public ID of the exposure after the <span class="cv_-_computer_voice">ExposureValid</span> event processes.</div>
      <script type="text/javascript" language="JavaScript1.2">
        <!--
          // Clear related topics
          //
          WWHClearRelatedTopics();

          document.writeln(WWHRelatedTopicsInlineHTML());
        // -->
      </script>
    </blockquote>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag() + WWHALinksDivTag());
      // -->
    </script>
  </body>
</html>