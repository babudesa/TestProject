<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <!-- MOTW-DISABLED saved from url=(0014)about:internet -->
    <title>Metropolitan Report Templates and Report Types</title>
    <link rel="StyleSheet" href="css/metropolitan.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        var  WebWorksRootPath = "";
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        // Set reference to top level help frame
        //
        var  WWHFrame = WWHGetWWHFrame("", true);
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
    <!-- THE FOLLOWING IS A GUIDEWIRE STYLE DEFINITION FOR THE LINK TO THIS FEATURE -->
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <!-- THE FOLLOWING IS A GUIDEWIRE GSCRIPT FUNCTION FOR THE LINK TO THIS FEATURE -->
    <script type="text/javascript">
function guidewire_selectall()
{
var text_val=eval("document.linktothisurlform.urlfield");
text_val.focus();
text_val.select();
}
</script>
  </head>
  <body style="" onLoad="WWHUpdate();" onUnload="WWHUnload();" onKeyDown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onKeyPress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onKeyUp="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">
    <!-- THE FOLLOWING IS A GUIDEWIRE DIV FOR THE 'LINK TO THIS' FEATURE -->
    <div id="linkToThisPage" class="popup" style="display: none;">
      <div class="popupTitle">Link Directly to This Page 
           <a href="#" onclick="var thePopup = getElementById('linkToThisPage');thePopup.style.display='none';return false;"><img class="popupClosebox" src="wwhelp/wwhimpl/common/images/close.gif" /></a></div>
      <div style="padding:6px;">
        <div class="popupText" id="linkToThisPageBookmark">An error has occurred if you see this messsage.</div>
        <form name="linktothisurlform" method="post" action="" style="width:275px;margin:0px">
          <input type="text" class="popupURLText" id="linkToThisPageURL" name="urlfield" rows="1" cols="55" onClick="guidewire_selectall();" onFocus="guidewire_selectall();"></input>
        </form>
      </div>
    </div>
    <br />
    <div class="WebWorks_Breadcrumbs" style="text-align: left;">
      <span>ClaimCenter Integration Guide</span> : 
    <span class="WebWorks_Breadcrumbs" style="text-align: left;"><a class="WebWorks_Breadcrumb_Link" href="metropolitan.22.1.html#1915812">Metropolitan Reporting&nbsp;Bureau Integration</a> : Metropolitan Report Templates and Report Types</span></div>
    <hr align="left" />
    <div>
      <div class="H1_-_Heading_1"><a name="1915812">Metropolitan Report Templates and Report Types</a></div>
      <div class="B_-_Body"><a name="1925944">ClaimCenter report requests to Metropolitan must be formatted in the correct XML format for that report type. </a>To generate this request, ClaimCenter runs a specific a Gosu template, which is a text file with embedded Gosu code. This template generates the necessary XML-formatted text. </div>
      <div class="H2_-_Heading_2"><a name="1928009">MetroReportTypes and Loss Types</a></div>
      <div class="B_-_Body"><a name="1927017">ClaimCenter includes templates for all report types, and these report types are auto-configured to correspond to </a>the standard loss types in the ClaimCenter reference configuration. For example, “Auto Accident” reports map to the “Auto” loss type, and “Coroner Report” maps to all base loss types. The typelist <span class="cv_-_computer_voice">MetroReportType.xml</span> specifies the mapping between a Metropolitan report type and a ClaimCenter line of business (LOB). You can change this mapping but be aware that Metropolitan specifies different data requirements and constraints for each report.</div>
      <div class="B_-_Body"><a name="1927963">Different report types have different data requirements, so Gosu templates and pre-update rules determine if the </a>required data for the selected report type was correctly specified by the adjuster. </div>
      <div class="H2_-_Heading_2"><a name="1928022">Editing Gosu Template Files</a></div>
      <div class="B_-_Body"><a name="1928020">You can customize report templates to support your own changes to the ClaimCenter data model. Also, you may </a>need to customize reports if at a later date Metropolitan changes the XML format, such as changing tag names or adding required properties for certain report types. Review the latest version of the Metropolitan specification at the URL:</div>
      <div class="CS_-_Code_Single_Line"><a name="1926772">https://metroweb.metroreporting.com/schema/index.php</a></div>
      <div class="B_-_Body"><a name="1915415">The Metropolitan report Gosu templates (one template per report) are stored within the directory:</a></div>
      <div class="CS_-_Code_Single_Line"><a name="1926849">ClaimCenter/cc/modules/configuration/config/web/templates/metroreport/...</a></div>
      <div class="B_-_Body"><a name="1926850">For example, the </a><span class="cv_-_computer_voice">BurglaryReport.gs</span> template generates the Metropolitan burglary report request. You can modify the templates but do not change the header or the footer. </div>
      <div class="NW_-_Note_Warning">
        <span class="w_-_warning">WARNING  </span><a name="1926893">You can modify Metropolitan report Gosu templates but do not change the template’s </a>header or its footer.</div>
      <div class="B_-_Body"><a name="1926892">A sample report template looks like this:</a></div>
      <PRE class="CF_-_Code_First_Line"><a name="1915417">&lt;mrb:Insured&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1915418">  &lt;mrb:Last&gt;&lt;%=claim.Insured.Person.LastName%&gt;&lt;/mrb:Last&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1915419">  &lt;mrb:First&gt;&lt;%=claim.Insured.Person.FirstName%&gt;&lt;/mrb:First&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1915420">  &lt;mrb:Middle&gt;&lt;%=translator.formatNullToEmptyString(claim.Insured.Person.MiddleName)%&gt;&lt;/mrb:Middle&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1915421">  &lt;mrb:Address1&gt;&lt;%=translator.formatNullToEmptyString(claim.Insured.PrimaryAddress.AddressLine1)%&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2019362">&nbsp;</a>&nbsp;&nbsp;&nbsp;&lt;/mrb:Address1&gt;</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1915422">  &lt;mrb:Address2&gt;&lt;%=translator.formatNullToEmptyString(claim.Insured.PrimaryAddress.AddressLine2)%&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2019363">&nbsp;</a>&nbsp;&nbsp;&nbsp;&lt;/mrb:Address2&gt;</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1915423">  &lt;mrb:City&gt;&lt;%=translator.formatNullToEmptyString(claim.Insured.PrimaryAddress.City)%&gt;&lt;/mrb:City&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1915424">  &lt;mrb:State&gt;&lt;%=translator.formatNullToEmptyString(claim.Insured.PrimaryAddress.State)%&gt;&lt;/mrb:State&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1915425">  &lt;mrb:Zip&gt;&lt;%=translator.formatNullToEmptyString(claim.Insured.PrimaryAddress.PostalCode)%&gt;&lt;/mrb:Zip&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1915426">  &lt;mrb:Phone&gt;&lt;%=translator.formatPhoneNumber(claim.Insured.PrimaryPhoneValue)%&gt;&lt;/mrb:Phone&gt;</a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="1915427">&lt;/mrb:Insured&gt;</a></PRE>
      <div class="B_-_Body"><a name="1915429">As you can see in the example earlier, the templates use </a><span class="e_-_emphasis">translators</span> to format the data using an object with the symbol <span class="cv_-_computer_voice">translator</span>. This utility class allows report templates to use a Metropolitan utility class that translates strings in report templates with the following methods:</div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="cv_-_computer_voice"><a name="1915431">formatCustDate</a></span> - Format date to <span class="cv_-_computer_voice">MMDDYYYY</span> format, which is the required Metropolitan date format.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="cv_-_computer_voice"><a name="1915432">formatCustTime</a></span> - Format time to <span class="cv_-_computer_voice">HHMM</span> 24 hours clock format, which is the required time format</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="cv_-_computer_voice"><a name="1915433">formatPhoneNumber</a></span> - Format the phone number to 10 digits without spaces or other characters.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="cv_-_computer_voice"><a name="1915434">formatNullToEmptyString</a></span> - Translate a <span class="cv_-_computer_voice">null</span> object reference to an empty string. This is particularly useful for <span class="e_-_emphasis">optional</span> properties in XML templates.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="H2_-_Heading_2"><a name="1927998">Mapping Report Types to Gosu Template Files</a></div>
      <div class="B_-_Body"><a name="1915439">The mapping between template files and the report types is specified by the XML configuration file </a><span class="cv_-_computer_voice">MetroReportTemplateMapping.xml</span>. Your Gosu template file names must all end in <span class="cv_-_computer_voice">.gs</span>. The following example include one <span class="cv_-_computer_voice">&lt;report&gt;</span> element that maps the Metropolitan report <span class="cv_-_computer_voice">A</span> (auto accident report) to a specific Gosu template file:</div>
      <PRE class="CF_-_Code_First_Line"><a name="1915441">&lt;Report&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1915442">  &lt;Type&gt;A&lt;/Type&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1915443">  &lt;Template&gt;MetroAutoAccidentReport.gs&lt;/Template&gt;</a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="1915444">&lt;/Report&gt;</a></PRE>
      <div class="H2_-_Heading_2"><a name="1927034">Specific Report Template Notes</a></div>
      <div class="HS_-_Head_Sub"><a name="1928700">Claims Insured By Companies</a></div>
      <div class="B_-_Body"><a name="1927057">For a claim insured by a company, ClaimCenter puts the company's information in </a><span class="cv_-_computer_voice">&lt;insured&gt;</span>.</div>
      <div class="HS_-_Head_Sub"><a name="1928707">Auto Accident Reports and Null Drivers</a></div>
      <div class="B_-_Body"><a name="1927058">For the Auto Accident report type, if the specified driver is </a><span class="cv_-_computer_voice">null</span>, ClaimCenter puts <span class="cv_-_computer_voice">Parked</span> in the driver’s first name and in the last name within the report request. ClaimCenter assumes that at the time the auto accident happened, the car was parked so there was no driver inside.</div>
      <div class="HS_-_Head_Sub"><a name="1935949">Worker’s Compensation</a></div>
      <div class="B_-_Body"><a name="1935957">In the ClaimCenter reference implementation, worker’s compensation claims do not include all the requisite data </a>that Metropolitan requires for reports. For worker’s compensation reports, ClaimCenter puts the claimant’s information in the <span class="cv_-_computer_voice">&lt;driver&gt;</span> property because there is no direct mapping from the ClaimCenter data model to the Metropolitan XML data document.</div>
      <div class="B_-_Body"><a name="1935958">Consequently, worker’s compensation claims cannot generate some reports. The user interface automatically </a>removes unsupported report options if the claim is a worker’s compensation claim.</div>
      <div class="H2_-_Heading_2"><a name="1928731">Adding New Report Types</a></div>
      <div class="B_-_Body"><a name="1928732">You can add new Metropolitan report types if Metropolitan makes new report types available. </a></div>
      <div class="HS_-_Head_Sub"><a name="1927117">To add new report types to the ClaimCenter Metropolitan report integration:</a></div>
      <div class="LS_-_List_Start_outer" style="margin-left: 57pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="LS_-_List_Start_inner" style="width: 15pt; white-space: nowrap;">
                <span class="ri_-_run_in_header">	1.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LS_-_List_Start_inner"><a name="1915458">Create a report template for the new report type.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="ri_-_run_in_header">	2.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="1927085">Save the template in the directory:</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="CS_-_Code_Single_Line"><a name="1920547">ClaimCenter/modules/configuration/config/web/templates/metroreport/...</a></div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="ri_-_run_in_header">	3.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="1915459">Modify the file </a><span class="cv_-_computer_voice">MetroReportTemplateMapping.xml</span> to add mapping information for the new report type.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="ri_-_run_in_header">	4.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="1915460">Add the new type to the report type mapping file </a><span class="cv_-_computer_voice">MetroReportType.xml</span>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="ri_-_run_in_header">	5.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="1915409">Update the ClaimCenter pre-update rules to check for all required properties for the new report type.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="ri_-_run_in_header">	6.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="2030664">Regenerate Java API and SOAP API files, as described on </a><a href="javascript:WWHClickedPopup('integration', 'overview.03.3.html#2079851', '');" title="Preparing for Integration Development">"Regenerating the Integration Libraries"</a>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="ri_-_run_in_header">	7.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="1927111">Rebuild and redeploy the application WAR file to make the new mappings and files available at runtime.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <script type="text/javascript" language="JavaScript1.2">
        <!--
          // Clear related topics
          //
          WWHClearRelatedTopics();

          document.writeln(WWHRelatedTopicsInlineHTML());
        // -->
      </script>
    </div>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag() + WWHALinksDivTag());
      // -->
    </script>
  </body>
</html>