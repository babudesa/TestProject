<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <!-- MOTW-DISABLED saved from url=(0014)about:internet -->
    <title>Document Storage</title>
    <link rel="StyleSheet" href="css/documentsforms.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        var  WebWorksRootPath = "";
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        // Set reference to top level help frame
        //
        var  WWHFrame = WWHGetWWHFrame("", true);
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
    <!-- THE FOLLOWING IS A GUIDEWIRE STYLE DEFINITION FOR THE LINK TO THIS FEATURE -->
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <!-- THE FOLLOWING IS A GUIDEWIRE GSCRIPT FUNCTION FOR THE LINK TO THIS FEATURE -->
    <script type="text/javascript">
function guidewire_selectall()
{
var text_val=eval("document.linktothisurlform.urlfield");
text_val.focus();
text_val.select();
}
</script>
  </head>
  <body onLoad="WWHUpdate();" onUnload="WWHUnload();" onKeyDown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onKeyPress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onKeyUp="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">
    <!-- THE FOLLOWING IS A GUIDEWIRE DIV FOR THE 'LINK TO THIS' FEATURE -->
    <div id="linkToThisPage" class="popup" style="display: none;">
      <div class="popupTitle">Link Directly to This Page 
           <a href="#" onclick="var thePopup = getElementById('linkToThisPage');thePopup.style.display='none';return false;"><img class="popupClosebox" src="wwhelp/wwhimpl/common/images/close.gif" /></a></div>
      <div style="padding:6px;">
        <div class="popupText" id="linkToThisPageBookmark">An error has occurred if you see this messsage.</div>
        <form name="linktothisurlform" method="post" action="" style="width:275px;margin:0px">
          <input type="text" class="popupURLText" id="linkToThisPageURL" name="urlfield" rows="1" cols="55" onClick="guidewire_selectall();" onFocus="guidewire_selectall();"></input>
        </form>
      </div>
    </div>
    <br />
    <div class="WebWorks_Breadcrumbs" style="text-align: left;">
      <span>ClaimCenter Integration Guide</span> : 
    <span class="WebWorks_Breadcrumbs" style="text-align: left;"><a class="WebWorks_Breadcrumb_Link" href="documentsforms.13.1.html#2120365">Document Management</a> : Document Storage</span></div>
    <hr align="left" />
    <blockquote>
      <div class="H1_-_Heading_1"><a name="2120365">Document Storage</a></div>
      <div class="B_-_Body"><a name="2120369">ClaimCenter separates document storage and retrieval tasks into two separate components that are managed by </a>two separate ClaimCenter plugin interfaces: </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="ri_-_run_in_header"><a name="1881347">Document metadata handling.</a></span> A <span class="e_-_emphasis">document metadata source</span> plugin manages the document metadata such as the file name, the file’s MIME type, and the set of files available on the document management system. This type of plugin would be based on <span class="cv_-_computer_voice">IDocumentMetadataSource</span>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="ri_-_run_in_header"><a name="1881351">Document content handling.</a></span> A <span class="e_-_emphasis">document content source</span> plugin stores and retrieves the document content from the document management system. This type of plugin would be based on <span class="cv_-_computer_voice">IDocumentContentSource</span>. Even though document content is the primary role of this plugin, this plugin also uses and optionally stores some document metadata (as discussed later in this topic).</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="1881356">ClaimCenter also provides document-related Gosu APIs so that business rules can add new documents to certain </a>types of objects (including a claim). For more information about these Gosu APIs, see the <span class="bt_-_book_title"><a href="javascript:WWHClickedPopup('rules', 'cover-rules.html#1148079', '');" title="ClaimCenter Rules Guide">ClaimCenter Rules Guide</a></span>.</div>
      <div class="B_-_Body"><a name="1881366">ClaimCenter also provides a web services API for adding a reference to a document to certain types of objects </a>(including a claim). This allows some external process and document management systems to work together to inform ClaimCenter after creation of new documents related to a claim. For example, in paperless operations, new postal mail might come into a scanning center to be scanned and identified with a claim, and then is loaded into an electronic repository. </div>
      <div class="B_-_Body"><a name="2101002">The repository could then notify ClaimCenter of the new document and create a </a><span class="e_-_emphasis">new mail activity</span> to review the new document. Similarly, after sending outbound correspondence (outbound e-mails or faxes), ClaimCenter can add a reference to the new document. After the external document repository saves the document and assigns an identifier to retrieve it if needed, ClaimCenter stores that document ID. </div>
      <div class="B_-_Body"><a name="2150843">The </a><span class="cv_-_computer_voice">IClaimAPI</span> interface includes several methods to add documents to ClaimCenter objects:</div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="cv_-_computer_voice"><a name="2150845">addDocument</a></span> - add document to a claim</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="cv_-_computer_voice"><a name="2150847">addClaimantDocument</a></span> - adds a document to a claimant</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="cv_-_computer_voice"><a name="2150849">addClaimContactDocument</a></span> - add document to a claim contact</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="cv_-_computer_voice"><a name="2150851">addExposureDocument</a></span> - add document to an exposure</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="cv_-_computer_voice"><a name="2150853">addMatterDocument</a></span> - add document to a legal matter</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="1881402">The following diagram summarizes these key plugins and interfaces related to document storage:</a></div>
      <div class="F_-_Figure"><a name="1881410"><img class="scale125" src="images/documentsforms.13.6.1.jpg" style="display: inline; float: none; left: 0.0; top: 0.0" alt="" /></a></div>
      <div class="N_-_Note">
        <span class="n_-_note">Note: </span><a name="2150871">For details of the web services APIs, refer to the SOAP API Reference Javadoc in the package </a><span class="cv_-_computer_voice">com.guidewire.cc.webservices.api</span>. Specifically, refer to the <span class="cv_-_computer_voice">IClaimAPI</span> method <span class="cv_-_computer_voice">addDocument</span>, as well as the definition of the <span class="cv_-_computer_voice">Document</span> SOAP entity.</div>
      <div class="H2_-_Heading_2"><a name="1882166">Implementing a Document Content Source</a></div>
      <div class="B_-_Body"><a name="1882167">Document storage systems vary quite a bit in terms of how documents transfer or display in the user interface. To </a>support this variety, ClaimCenter multiple document retrieval modes called <span class="e_-_emphasis">response types</span>:</div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="1882171">The document contents as an </a><span class="e_-_emphasis">input stream</span>, which can be raw binary data</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="1882172">A web page containing an ActiveX control</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="1882173">Some Jscript code to run on the user’s machine</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="1882174">A URL to a page that can display the document (perhaps using an ActiveX control) from a local content store</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="1882175">To implement a new document content source, there are several methods to implement in the </a><span class="cv_-_computer_voice">IDocumentContentSource</span> plugin interface. The following sections describe the methods your plugin must implement.</div>
      <div class="HS_-_Head_Sub"><a name="1882176">Adding Documents (And Optionally, Metadata)</a></div>
      <div class="B_-_Body"><a name="1882180">A new document content source plugin must fulfill an “add document” request from ClaimCenter by imple</a>menting the <span class="cv_-_computer_voice">addDocument</span> method. This method adds a new document object to the repository, taking as inputs the document metadata in an <span class="cv_-_computer_voice">Document</span> object and the document contents as an <span class="cv_-_computer_voice">InputStream</span>. </div>
      <div class="B_-_Body"><a name="1881437">This method may optionally also store the metadata contained in the </a><span class="cv_-_computer_voice">Document</span> entity. Independent of whether the document stores the metadata, the plugin must update metadata properties within the <span class="cv_-_computer_voice">Document</span> object. Specifically, it must set an implementation-specific document universal ID (<span class="cv_-_computer_voice">DocUID</span>) and the modified date (<span class="cv_-_computer_voice">DateModified</span>). Changes that the method makes to the document metadata in the <span class="cv_-_computer_voice">Document</span> object persist in the ClaimCenter database.</div>
      <div class="B_-_Body"><a name="1881440">Typically the method returns </a><span class="cv_-_computer_voice">false</span>, indicating that ClaimCenter stores the metadata using the separate plugin interface specifically for document metadata. The method returns <span class="cv_-_computer_voice">true</span> if (and only if) it already stored (or promises to store) the document metadata in the <span class="cv_-_computer_voice">Document</span> entity in addition to storing the document contents. ClaimCenter includes a simple default behavior for storing document metadata in the local database. Important limitations with this approach are discussed in <a href="javascript:WWHClickedPopup('integration', 'documentsforms.13.6.html#1886504', '');" title="Document Storage">“Included Document Storage Plugins”</a>.</div>
      <div class="B_-_Body"><a name="1886825">If the plugin encounters errors during storage before returning from this method, the method throws an excep</a>tion. If document storage errors are detected later, such as for a asynchronous document storage, the document content storage plugin must handle errors in an appropriate fashion. For example, the plugin could send administrative e-mails, or it could create new activities using SOAP APIs to investigate document creation issues. Or you could design a system to track document creation errors and document management problems in a separate user interface for administrators. In the latter case, the plugin could register any document creation errors with that system.</div>
      <div class="HS_-_Head_Sub"><a name="1881450">Retrieving Documents</a></div>
      <div class="B_-_Body"><a name="1881454">A new document content source plugin must fulfill a “retrieve document” request from ClaimCenter by imple</a>menting the <span class="cv_-_computer_voice">getDocumentContentsInfo</span> method. This method takes a <span class="cv_-_computer_voice">Document</span> object as a parameter and the plugin can simply use the <span class="cv_-_computer_voice">docUID</span> property within the <span class="cv_-_computer_voice">Document</span> to identify the target document contents within the repository. However, the plugin could use additional data model extensions on <span class="cv_-_computer_voice">Document</span> if desired. The plugin can read the <span class="cv_-_computer_voice">Document</span> entity parameter but must not modify it.</div>
      <div class="B_-_Body"><a name="1881457">The </a><span class="cv_-_computer_voice">getDocumentContentsInfo</span> method also includes a Boolean parameter <span class="p_-_parameter">includeContents</span>. This parameter is <span class="cv_-_computer_voice">true</span> if the caller wants the result object to include an input stream with the contents of the document. This is <span class="cv_-_computer_voice">false</span> in situations in which only the metadata about the document contents (like the MIME type or the type of contents) is required. In this case, the overhead of actually transmitting the document contents is unnecessary.</div>
      <div class="B_-_Body"><a name="1881458">The plugin must return its results within a container object called </a><span class="cv_-_computer_voice">DocumentContentsInfo</span>, which is really a simple container containing the following information:</div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="ri_-_run_in_header"><a name="1881459">Response type.</a></span> An enumeration indicating the type of the contents returned:</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI2_-_Bullet_Item_002c_Level_2_outer" style="margin-left: 67pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner"><a name="2101110">raw document contents (</a><span class="cv_-_computer_voice">DOCUMENT_CONTENTS</span>)</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI2_-_Bullet_Item_002c_Level_2_outer" style="margin-left: 67pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner"><a name="2101114">a web page containing an ActiveX control (</a><span class="cv_-_computer_voice">HTML_PAGE</span><span style="font-size: 12.0pt">)</span></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI2_-_Bullet_Item_002c_Level_2_outer" style="margin-left: 67pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner"><a name="2101115">Jscript to be executed on the client machine (</a><span class="cv_-_computer_voice">JSCRIPT</span><span style="font-size: 12.0pt">)</span></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI2_-_Bullet_Item_002c_Level_2_outer" style="margin-left: 67pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner"><a name="2101116">A URL (</a><span class="cv_-_computer_voice">URL</span>) to a local content store to display the content, perhaps in an ActiveX control</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="ri_-_run_in_header"><a name="1881461">MIME type.</a></span> For all response types other than <span class="cv_-_computer_voice">URL</span>, the MIME type describes the type of contents (such as <span style="font-family: &quot;Lucida Sans Typewriter&quot;; font-size: 7.0pt">application/msword</span>) or the MIME type of the HTML document (<span class="cv_-_computer_voice">text/html</span>). </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="ri_-_run_in_header"><a name="1881462">Hidden target frame as Boolean.</a></span> For all response types other than <span class="cv_-_computer_voice">DOCUMENT_CONTENTS</span>, the Boolean value <span class="cv_-_computer_voice">TargetHiddenFrame</span><span style="font-size: 12.0pt"> </span>indicates ClaimCenter to open the web page in a hidden frame within the user’s web browser. For example, use this if the document repository is naturally implemented as a small web page that contains JavaScript. That JavaScript might opens another web page as a popup window that displays the real document contents.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="ri_-_run_in_header"><a name="2151188">Contents as input stream.</a></span> The document contents in the form of an input stream, which is raw data as an <span class="cv_-_computer_voice">InputStream</span> object. In the case where the <span class="p_-_parameter">includeContents</span> parameter is <span class="cv_-_computer_voice">false</span>, as discussed earlier in this section, set the <span class="cv_-_computer_voice">inputStream</span> property in the returned <span class="cv_-_computer_voice">DocumentContentsInfo</span> to <span class="cv_-_computer_voice">null</span>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="NW_-_Note_Warning">
        <span class="w_-_warning">WARNING  </span><a name="2151290">It is important to note that ClaimCenter calls some methods in a </a><span class="cv_-_computer_voice">IDocumentContentSource</span> plugin twice for each document: <span class="cv_-_computer_voice">isDocument</span> and <span class="cv_-_computer_voice">getDocumentContentsInfo</span>. Ensure that your plugin supports this design. For the <span class="cv_-_computer_voice">getDocumentContentsInfo</span> method, the <span class="p_-_parameter">includeContents</span> parameter is set to <span class="cv_-_computer_voice">false</span> on the first call and true on call to the method. It is important that your plugin ensures that for these pair of calls, your plugin <span class="s_-_strong">must</span> return a <span class="cv_-_computer_voice">DocumentContentsInfo</span> with the same type. Mixing these result is unsupported and results in in undefined behavior.</div>
      <div class="HS_-_Head_Sub"><a name="2151190">Checking for Document Existence</a></div>
      <div class="B_-_Body"><a name="1881468">A new document content source plugin must fulfill a “document existence check” request from ClaimCenter by </a>implementing the <span class="cv_-_computer_voice">isDocument</span> method. This method takes a <span class="cv_-_computer_voice">Document</span> object as a parameter and the plugin might just use the <span class="cv_-_computer_voice">docUID</span> property within the <span class="cv_-_computer_voice">Document</span> to identify the target document within the repository. However, the plugin could use additional data model extensions on <span class="cv_-_computer_voice">Document</span> if desired. The <span class="cv_-_computer_voice">Document</span> entity parameter must not be modified.</div>
      <div class="NW_-_Note_Warning">
        <span class="w_-_warning">WARNING  </span><a name="2151384">It is important to note that ClaimCenter calls some methods in a </a><span class="cv_-_computer_voice">IDocumentContentSource</span> plugin twice for each document: <span class="cv_-_computer_voice">isDocument</span> and <span class="cv_-_computer_voice">getDocumentContentsInfo</span>. Ensure that your plugin supports this design.</div>
      <div class="HS_-_Head_Sub"><a name="1881470">Removing Documents</a></div>
      <div class="B_-_Body"><a name="1881474">A new document content source plugin must fulfill a “remove document” request from ClaimCenter by imple</a>menting the <span class="cv_-_computer_voice">removeDocument</span> method. This method takes a <span class="cv_-_computer_voice">Document</span> object as a parameter and the plugin might just use the <span class="cv_-_computer_voice">docUID</span> property within the <span class="cv_-_computer_voice">Document</span> to identify the target document within the repository. However, the plugin could use additional data model extensions on <span class="cv_-_computer_voice">Document</span> if desired.</div>
      <div class="B_-_Body"><a name="1882228">This method is called to notify the document storage system that the </a><span class="cv_-_computer_voice">Document</span> entity which is passed in is about to be removed from metadata storage. It is up to the <span class="cv_-_computer_voice">IDocumentContentSource</span> plugin implementation whether or not to delete the content, retire it, or another action. Other <span class="cv_-_computer_voice">Document</span> entities may still refer to the same chunk of content.</div>
      <div class="NW_-_Note_Warning">
        <span class="w_-_warning">WARNING  </span><a name="1882229">Choose carefully whether to delete the content, retire it, or another action. Other </a><span class="cv_-_computer_voice">Document</span> entities may still refer to the same actual content.</div>
      <div class="B_-_Body"><a name="1881477">Be careful writing your document removal code. If the </a><span class="cv_-_computer_voice">removeDocument</span> implementation does not handle metadata storage, then some server problem might cause removal of the metadata to fail after removing document contents.</div>
      <div class="B_-_Body"><a name="1881478">Return </a><span class="cv_-_computer_voice">true</span> if the method removed the document metadata from the metadata storage and no further action is required by the application. Otherwise, return <span class="cv_-_computer_voice">false</span>.</div>
      <div class="HS_-_Head_Sub"><a name="1881479">Updating Documents (And Optionally, Metadata)</a></div>
      <div class="B_-_Body"><a name="1881483">A new document content source plugin must fulfill a “update document” request from ClaimCenter by imple</a>menting the <span class="cv_-_computer_voice">updateDocument</span> method and a new input stream (<span class="cv_-_computer_voice">InputStream</span>) for the contents. This method takes document metadata in a <span class="cv_-_computer_voice">Document</span> object and the new document contents as a new <span class="cv_-_computer_voice">InputStream</span>.</div>
      <div class="B_-_Body"><a name="1881486">Whether or not the metadata is stored, the DMS system must update any appropriate properties, including </a>version information (if any) and <span class="cv_-_computer_voice">DateModified</span>. The DMS must update the same set of properties as in the plugin’s <span class="cv_-_computer_voice">addDocument</span> implementation. Any metadata to describe version-related information is optional but recommended. The plugin implementation is required to handle this internally. The built-in <span class="cv_-_computer_voice">Document</span> entity does not contain version information. Your plugin implementation may create or set version-related properties on the <span class="cv_-_computer_voice">Document</span> entity. As with all data model extensions, ClaimCenter persists those changes to the <span class="cv_-_computer_voice">Document</span> entity. </div>
      <div class="NI_-_Note_Important">
        <span class="n_-_note">IMPORTANT   </span><a name="1881494">If the document storage system stores version information, the plugin can update </a>version properties in <span class="cv_-_computer_voice">Document</span> during document update. There are no built-in versioning properties or behavior built-in automatically. However, changes to the <span class="cv_-_computer_voice">Document</span> entity during update persists.</div>
      <div class="H3_-_Heading_3"><a name="2101173">Implementing a Document Metadata Source</a></div>
      <div class="B_-_Body"><a name="2151477">Document metadata can optionally be handled by the </a><span class="e_-_emphasis">document source content plugin</span> so that it handles the content and the metadata. Alternatively, use the document metadata source plugin interface to implement systems that split document <span class="e_-_emphasis">metadata</span> from the document <span class="e_-_emphasis">content storage</span>. For more information about the document source content plugin, see <a href="javascript:WWHClickedPopup('integration', 'documentsforms.13.6.html#1882166', '');" title="Document Storage">“Implementing a Document Content Source”</a>. </div>
      <div class="B_-_Body"><a name="2151824">It is important that in your </a><span class="cv_-_computer_voice">IDocumentMetadataSource</span> plugin implementation that you do not track documents using the document’s <span class="cv_-_computer_voice">Id</span> property (<span class="cv_-_computer_voice">Document.Id</span>). Each time the document exists it has a different <span class="cv_-_computer_voice">Id</span> value. Instead, use the public ID property (<span class="cv_-_computer_voice">Document.PublicID</span>).</div>
      <div class="NW_-_Note_Warning">
        <span class="w_-_warning">WARNING  </span><a name="2151917">It is critically important that you always track documents using the </a><span class="cv_-_computer_voice">PublicID</span> property, not the <span class="cv_-_computer_voice">Id</span> property.</div>
      <div class="B_-_Body"><a name="2151485">To create a new </a><span class="cv_-_computer_voice">Document</span> object in Java, use the <span class="cv_-_computer_voice">EntityFactory</span> class discussed in <a href="javascript:WWHClickedPopup('gosu', 'java-gosu.08.10.html#2074121', '');" title="Java Entity Utility APIs">“Java Entity Utility APIs” in the </a><span class="bt_-_book_title"><a href="javascript:WWHClickedPopup('gosu', 'java-gosu.08.10.html#2074121', '');" title="Java Entity Utility APIs">Gosu Reference Guide</a></span>. For related information about the Java <span class="e_-_emphasis">entity libraries</span>, see <a href="javascript:WWHClickedPopup('gosu', 'java-gosu.08.06.html#2073753', '');" title="Java Entity Libraries Overview">“Java Entity Libraries Overview” in the </a><span class="bt_-_book_title"><a href="javascript:WWHClickedPopup('gosu', 'java-gosu.08.06.html#2073753', '');" title="Java Entity Libraries Overview">Gosu Reference Guide</a></span>. </div>
      <div class="B_-_Body"><a name="2151472">You can create a new document with Java code such as:</a></div>
      <div class="CS_-_Code_Single_Line"><a name="2150283">Document doc = (Document) EntityFactory.getInstance().newEntity(Document.class);</a></div>
      <div class="B_-_Body"><a name="2150284">To implement document search, the </a><span class="cv_-_computer_voice">searchDocument</span> method might look similar to the following example. This example creates a new <span class="cv_-_computer_voice">DocumentSearchResult</span> for the result set and a new <span class="cv_-_computer_voice">Document</span> for a specific document summary:</div>
      <PRE class="CF_-_Code_First_Line"><a name="2150286">DocumentSearchResult result =</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2150287">&nbsp;</a>&nbsp;(DocumentSearchResult)EntityFactory.getInstance().newEntity(DocumentSearchResult.class);</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2150288"> </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2150289">Document document = (Document)EntityFactory.getInstance().newEntity(Document.class);</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2150290">document.setName(“Test Document”);</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2150291">document.setType(DocumentType.DIAGRAM);</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2150292"> </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2150293">...</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2150294"> </a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="2150295">result.addToSummaries(document);</a></PRE>
      <div class="B_-_Body"><a name="1881512">To implement the metadata plugin separately, you can implement the </a><span class="cv_-_computer_voice">IDocumentMetadataSource</span> plugin. This plugin’s required methods include:</div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="cv_-_computer_voice"><a name="1886424">saveDocument</a></span> - Persist document metadata in a <span class="cv_-_computer_voice">Document</span> object to the document repository.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="cv_-_computer_voice"><a name="1886432">retrieveDocument</a></span> - Returns a completely initialized <span class="cv_-_computer_voice">Document</span> object with the latest information from the repository. </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="cv_-_computer_voice"><a name="1886412">searchDocuments</a></span> - Return the set of documents in the repository that match the given set of criteria. This method’s parameters include a <span class="cv_-_computer_voice">RemotableSearchResultSpec</span> entity. This entity contains sorting and paging information for the PCF list&nbsp;view infrastructure to specify results.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="cv_-_computer_voice"><a name="1886440">removeDocument</a></span> - Remove a document metadata in a <span class="cv_-_computer_voice">Document</span> object from the document repository. </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="cv_-_computer_voice"><a name="2150895">linkDocumentToEntity</a></span> - Associate a document with a ClaimCenter entity. Currently, the only supported entities for linking in this sense are <span class="cv_-_computer_voice">CheckSet</span>, <span class="cv_-_computer_voice">ReserveSet</span>, and <span class="cv_-_computer_voice">Activity</span>. The links between a document and a claim happen automatically if you set the <span class="cv_-_computer_voice">Document.claim</span> property.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="cv_-_computer_voice"><a name="2150903">getDocumentsLinkedToEntity</a></span> - Return all documents associated with a ClaimCenter entity. Currently, the only supported entities for linking in this sense are <span class="cv_-_computer_voice">CheckSet</span> and <span class="cv_-_computer_voice">ReserveSet</span>. The links between a document and a claim happen automatically if you set the <span class="cv_-_computer_voice">Document.claim</span> property.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="cv_-_computer_voice"><a name="2150908">isDocumentLinkedToEntity</a></span> - Check if a document is associated with a ClaimCenter entity. Currently, the only supported entities for linking in this sense are <span class="cv_-_computer_voice">CheckSet</span> and <span class="cv_-_computer_voice">ReserveSet</span>. The links between a document and a claim happen automatically if you set the <span class="cv_-_computer_voice">Document.claim</span> property.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="cv_-_computer_voice"><a name="2150912">unlinkDocumentFromEntity</a></span> - Remove the association between a document and a ClaimCenter entity. Currently, the only supported entities for linking in this sense are <span class="cv_-_computer_voice">CheckSet</span> and <span class="cv_-_computer_voice">ReserveSet</span>. The links between a document and a claim happen automatically if you set the <span class="cv_-_computer_voice">Document.claim</span> property.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="2027693">For more details, refer to the API Reference Javadoc documentation for </a><span class="cv_-_computer_voice">IDocumentMetadataSource</span>.</div>
      <div class="B_-_Body"><a name="1881552">For more information about the included reference implementation, see </a><a href="javascript:WWHClickedPopup('integration', 'documentsforms.13.6.html#1886504', '');" title="Document Storage">“Included Document Storage Plugins”</a>.</div>
      <div class="H2_-_Heading_2"><a name="1886504">Included Document Storage Plugins</a></div>
      <div class="B_-_Body"><a name="1886509">ClaimCenter includes simple reference implementations for the </a><span class="cv_-_computer_voice">IDocumentContentSource</span> plugin which does not provide full document management system functionality. Instead, this plugin simply stores documents on the ClaimCenter server’s file system. This reference implementation is intended as an example only and is not meant to replace a full-featured document management system.</div>
      <div class="B_-_Body"><a name="1886522">By default, ClaimCenter stores the document metadata such as document names in the database. Document </a>names are what people typically think of as document file names. You can override this behavior by implementing the <span class="cv_-_computer_voice">IDocumentMetadataSource</span> plugin. No built-in plugin exists for the <span class="cv_-_computer_voice">IDocumentMetadataSource</span> interface. The default behavior described earlier is simply the internal ClaimCenter behavior if you do not register a <span class="cv_-_computer_voice">IDocumentMetadataSource</span> plugin implementation.</div>
      <div class="NI_-_Note_Important">
        <span class="n_-_note">IMPORTANT   </span><a name="2083420">The built-in document storage plugins are for demonstration only. For maximum docu</a>ment data integrity and document management features, use a complete commercial document management system (DMS) and implement new <span class="cv_-_computer_voice">IDocumentMetadataSource</span> and <span class="cv_-_computer_voice">IDocumentContentSource</span> plugins to communicate with the DMS. Where at all possible, store the metadata in the DMS if it can natively store this information. In all cases, store the metadata in only one location: either in the DMS or ClaimCenter built-in metadata storage, but not both. Avoid duplicating metadata in the ClaimCenter database itself for production systems.</div>
      <div class="HS_-_Head_Sub"><a name="2098237">Directory and File Name Patterns</a></div>
      <div class="B_-_Body"><a name="2098205">The document content and storage plugins use the </a><span class="cv_-_computer_voice">documents.path</span> parameter in their XML definition files to determine the storage location. If the value of that parameter is an absolute path, then the specific location is used. If the value is a relative path, then the location is determined by using the value of the temporary directory parameter (<span class="cv_-_computer_voice">javax.servlet.context.tempdir</span>) is used instead. </div>
      <div class="B_-_Body"><a name="2101286">The temporary directory property is the root directory of the servlet container's temp directory structure. In other </a>words, this is a directory that servlets can write to as scratch space but with no guarantee that files persist from one session to another. The temporary directory of the built-in plugins in general are for testing only. Do <span class="s_-_strong">not</span> rely on temporary directory data in a production (final) ClaimCenter system, and even the built-in plugins are for demonstration only, as indicated earlier.</div>
      <div class="B_-_Body"><a name="2150918">Documents are partitioned into subdirectories by claim and by relationships within the claim. The following </a>table explains this directory structure:</div>
      <div class="T_-_Table"><a name="2150944">&nbsp;</a></div>
      <table class="withHeading" style="text-align: left" cellspacing="10" summary="">
        <caption></caption>
        <tr>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 1px; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: bottom">
            <div class="TH_-_Table_Heading"><a name="2150921">Entity associ</a>ated with</div>
          </td>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 1px; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: bottom">
            <div class="TH_-_Table_Heading"><a name="2150923">Directory naming</a></div>
          </td>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 1px; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: bottom">
            <div class="TH_-_Table_Heading"><a name="2150925">Example</a></div>
          </td>
        </tr>
        <tr>
          <td style="border-top-color: #000000; border-top-style: solid; border-top-width: 1px; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="2150927">Claim</a></div>
          </td>
          <td style="border-top-color: #000000; border-top-style: solid; border-top-width: 1px; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text"><span class="cvt_-_computer_voice_table"><a name="2150929">Claim</a></span> + <span class="pt_-_parameter_in_table">claimNumber</span></div>
          </td>
          <td style="border-top-color: #000000; border-top-style: solid; border-top-width: 1px; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text" style="color: #000000; font-family: &quot;Lucida Sans Typewriter&quot;; font-style: normal; font-variant: normal; font-weight: normal; margin-top: 3.0pt; text-transform: none; vertical-align: baseline"><span class="cvt_-_computer_voice_table"><a name="2150931">/documents/Claim02-02154/</a></span></div>
          </td>
        </tr>
        <tr>
          <td style="padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="2150933">Exposure</a></div>
          </td>
          <td style="padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text"><span class="pt_-_parameter_in_table"><a name="2150935">claimDirectory</a></span><span class="cv_-_computer_voice">/</span><span class="cvt_-_computer_voice_table">Exposure</span> + <span class="pt_-_parameter_in_table">exposurePublicID</span></div>
          </td>
          <td style="padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text" style="color: #000000; font-family: &quot;Lucida Sans Typewriter&quot;; font-style: normal; font-variant: normal; font-weight: normal; margin-top: 3.0pt; text-transform: none; vertical-align: baseline"><span class="cvt_-_computer_voice_table"><a name="2150937">/documents/Claim02-02154/ExposureABC:01/</a></span></div>
          </td>
        </tr>
        <tr>
          <td style="padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="2150939">Claimant</a></div>
          </td>
          <td style="padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text"><span class="pt_-_parameter_in_table"><a name="2150941">claimDirectory</a></span><span class="cv_-_computer_voice">/</span><span class="cvt_-_computer_voice_table">Claimant</span> + <span class="pt_-_parameter_in_table">claimantPublicID</span></div>
          </td>
          <td style="padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text" style="color: #000000; font-family: &quot;Lucida Sans Typewriter&quot;; font-style: normal; font-variant: normal; font-weight: normal; margin-top: 3.0pt; text-transform: none; vertical-align: baseline"><span class="cvt_-_computer_voice_table"><a name="2150943">/documents/Claim02-02154/ClaimantABC:99/</a></span></div>
          </td>
        </tr>
      </table>
      <div class="N_-_Note">
        <span class="n_-_note">Note: </span><a name="2150945">For exposure and claimant, the </a><span class="e_-_emphasis">public ID</span> is used, whereas for a claim the <span class="e_-_emphasis">claim</span><span class="e_-_emphasis">&nbsp;</span><span class="e_-_emphasis">number</span> is used.</div>
      <div class="B_-_Body"><a name="1881639">ClaimCenter stores documents by the name you choose in the user interface as you save and add the file. If you </a>add a file from the user interface and it would result in a duplicate file name, ClaimCenter warns you. The new file does not quietly overwrite the original file. If you create a document using business rules, the system forces uniqueness of the document name. The server appends an incrementing number in parentheses. For example, if the file name is <span class="cv_-_computer_voice">myfilename</span>, the duplicates are called <span class="cv_-_computer_voice">myfilename(2)</span>, <span class="cv_-_computer_voice">myfilename(3)</span>, and so on.</div>
      <div class="B_-_Body"><a name="1881644">The built-in document metadata source plugin provides a unique </a><span class="e_-_emphasis">document ID</span> back to ClaimCenter. That document ID identifies the file name and relative path within the repository to the document. </div>
      <div class="B_-_Body"><a name="2151006">For example, an exposure document’s repository-relative path might look something like this:</a></div>
      <div class="CS_-_Code_Single_Line"><span class="cvt_-_computer_voice_table"><a name="2151007">/documents/claim02-02154/exposureABC:01</a></span>/myFile.doc</div>
      <div class="H2_-_Heading_2"><a name="2151658">Remember to Store Public IDs in the External System</a></div>
      <div class="B_-_Body"><a name="2151670">In addition to the unique document IDs, remember to store the </a><span class="cv_-_computer_voice">PublicID</span> property for Guidewire entities such as <span class="cv_-_computer_voice">Document</span> in external document management systems. </div>
      <div class="B_-_Body"><a name="2151724">ClaimCenter uses public IDs to refer to objects if you later search for the entities or re-populate entities during </a>search or retrieval. If the public ID properties are missing on document entities during search or retrieval, the ClaimCenter user interface may have undefined behavior.</div>
      <div class="H2_-_Heading_2"><a name="2151652">Asynchronous Document Storage</a></div>
      <div class="B_-_Body"><a name="2151653">Some document production systems generate documents slowly. When many users try to generate documents at </a>the same time, multiple CPU threads compete and that makes the process even slower. One alternative is to create documents asynchronously so that user interaction with the application does not block waiting for document production. </div>
      <div class="B_-_Body"><a name="2145326">Similarly, transfer of large documents through the application server to an external document storage system </a>requires significant memory and resources. Even in the best case scenario of memory and CPU resources, the external document storage system (or intermediate network) may be slow. If so, synchronous actions with large documents may appear unresponsive to a ClaimCenter web user. To address these issues, ClaimCenter provides a system to asynchronously <span class="s_-_strong">send</span> document to the document management system without bringing documents into application server memory. A separate thread on the batch server sends documents to your real document management system using the messaging system. </div>
      <div class="B_-_Body"><a name="2122458">To implement this, ClaimCenter includes two software components:</a></div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="ri_-_run_in_header"><a name="2122542">Asychronous document content source.</a></span> ClaimCenter includes an document content source plugin implementation <span class="cv_-_computer_voice">gw.plugin.document.impl.AsyncDocumentContentSource</span><span class="ri_-_run_in_header">. </span>When it gets a request to send the document to the document management system, it immediately saves the files to a temporary directory on the local disk. In a clustered environment, map the local path to this temporary directory so that it references a server directory shared by all elements of the cluster. For example, map this to an SMB server.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="ri_-_run_in_header"><a name="2122551">Document storage messaging transport.</a></span> A separate task uses the ClaimCenter messaging system architecture to send documents as a separate task on the server. In a clustered environment, any server can create (submit) a new message, however only the batch server runs messaging plugins to actually send them. In the built-in configuration, the transport uses with the document storage plugin that you write. In a clustered environment, this means that your actual document content source implementation only runs on the batch server.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="2122770">By default, the asychronous document storage plugin is enabled. You specify to that plugin a class that imple</a>ments <span class="cv_-_computer_voice">IDocumentContentSource</span> that you write to send the documents to the external system. By default, it simply uses the built-in document content storage implementation.</div>
      <div class="NI_-_Note_Important">
        <span class="n_-_note">IMPORTANT   </span><a name="2123366">The built-in document storage plugins are for demonstration only. For maximum docu</a>ment data integrity and document management features, use a complete commercial document management system (DMS) and implement new <span class="cv_-_computer_voice">IDocumentMetadataSource</span> and <span class="cv_-_computer_voice">IDocumentContentSource</span> plugins to communicate with the DMS. Where at all possible, store the metadata in the DMS if it can natively store this information. In all cases, store the metadata in only one location: either in the DMS or ClaimCenter built-in metadata storage, but not both. Avoid duplicating metadata in the ClaimCenter database itself for production systems.</div>
      <div class="H3_-_Heading_3"><a name="2123375">Configuring Asychronous Document Storage</a></div>
      <div class="HS_-_Head_Sub"><a name="2123376">To configure asychronous sending</a></div>
      <div class="LS_-_List_Start_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="LS_-_List_Start_inner" style="width: 15pt; white-space: nowrap;">
                <span class="ri_-_run_in_header">	1.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LS_-_List_Start_inner"><a name="2123024">Write a content source plugin as described earlier in this topic. Your plugin implementation must implement </a>the interface <span class="cv_-_computer_voice">IDocumentContentSource</span><span class="ui_-_UI_element">. </span>However, it is important that you do <span class="s_-_strong">not</span> register it itself as the plugin implementation for the <span class="ui_-_UI_element">IDocumentContentSource</span> interface in the Plugins Editor in Studio.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="ri_-_run_in_header">	2.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="2123021">Instad, in Studio, click on </a><span class="ui_-_UI_element">Resources</span> → <span class="ui_-_UI_element">Plugin</span> → <span class="ui_-_UI_element">gw</span> → <span class="ui_-_UI_element">plugin</span> → <span class="ui_-_UI_element">IDocumentContentSource</span>. This opens the editor for the current implementation (the default implementation) for the built-in version of this plugin.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="ri_-_run_in_header">	3.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="2122941">In the </a><span class="ui_-_UI_element">Parameters</span> tab, set the <span class="cv_-_computer_voice">documents.path</span> parameter to the desired local file path for your stored files. In a clustered environment, map the local path to this temporary directory so that it references a <span class="s_-_strong">server directory</span> shared by all elements of the cluster. For example, map this to an SMB server.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="ri_-_run_in_header">	4.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="2123063">In the </a><span class="ui_-_UI_element">Parameters</span> tab, set the <span class="cv_-_computer_voice">SynchedContentSource</span> parameter to class name of the class that you wrote that implements <span class="cv_-_computer_voice">IDocumentContentSource</span>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="HS_-_Head_Sub"><a name="2123159">To temporarily disable asynchronous sending</a></div>
      <div class="LS_-_List_Start_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="LS_-_List_Start_inner" style="width: 15pt; white-space: nowrap;">
                <span class="ri_-_run_in_header">	1.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LS_-_List_Start_inner"><a name="2123172">In Studio, click on </a><span class="ui_-_UI_element">Resources</span> → <span class="ui_-_UI_element">Plugin</span> → <span class="ui_-_UI_element">gw</span> → <span class="ui_-_UI_element">plugin</span> → <span class="ui_-_UI_element">IDocumentContentSource</span>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="ri_-_run_in_header">	2.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="2123173">In the </a><span class="ui_-_UI_element">Parameters</span> tab, find the <span class="cv_-_computer_voice">TrySynchedAddFirst</span> parameter.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="ri_-_run_in_header">	3.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="2151112">Set this parameter to </a><span class="cv_-_computer_voice">false</span>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="HS_-_Head_Sub"><a name="2123189">To permanently disable asynchronous sending </a></div>
      <div class="LS_-_List_Start_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="LS_-_List_Start_inner" style="width: 15pt; white-space: nowrap;">
                <span class="ri_-_run_in_header">	1.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LS_-_List_Start_inner"><a name="2123202">In Studio, click on </a><span class="ui_-_UI_element">Resources</span> → <span class="ui_-_UI_element">Plugin</span> → <span class="ui_-_UI_element">gw</span> → <span class="ui_-_UI_element">plugin</span> → <span class="ui_-_UI_element">IDocumentContentSource</span>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="ri_-_run_in_header">	2.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="2123294">Set the class name to your fully-qualified class name rather than the built-in </a><span class="cv_-_computer_voice">AsyncDocumentContentSource</span> implementation class.</div>
            </td>
          </tr>
        </table>
      </div>
      <script type="text/javascript" language="JavaScript1.2">
        <!--
          // Clear related topics
          //
          WWHClearRelatedTopics();

          document.writeln(WWHRelatedTopicsInlineHTML());
        // -->
      </script>
    </blockquote>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag() + WWHALinksDivTag());
      // -->
    </script>
  </body>
</html>