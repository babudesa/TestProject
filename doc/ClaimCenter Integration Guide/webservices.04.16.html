<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <!-- MOTW-DISABLED saved from url=(0014)about:internet -->
    <title>Writing Command Line Tools to Call Web Services</title>
    <link rel="StyleSheet" href="css/webservices.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        var  WebWorksRootPath = "";
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        // Set reference to top level help frame
        //
        var  WWHFrame = WWHGetWWHFrame("", true);
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
    <!-- THE FOLLOWING IS A GUIDEWIRE STYLE DEFINITION FOR THE LINK TO THIS FEATURE -->
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <!-- THE FOLLOWING IS A GUIDEWIRE GSCRIPT FUNCTION FOR THE LINK TO THIS FEATURE -->
    <script type="text/javascript">
function guidewire_selectall()
{
var text_val=eval("document.linktothisurlform.urlfield");
text_val.focus();
text_val.select();
}
</script>
  </head>
  <body onLoad="WWHUpdate();" onUnload="WWHUnload();" onKeyDown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onKeyPress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onKeyUp="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">
    <!-- THE FOLLOWING IS A GUIDEWIRE DIV FOR THE 'LINK TO THIS' FEATURE -->
    <div id="linkToThisPage" class="popup" style="display: none;">
      <div class="popupTitle">Link Directly to This Page 
           <a href="#" onclick="var thePopup = getElementById('linkToThisPage');thePopup.style.display='none';return false;"><img class="popupClosebox" src="wwhelp/wwhimpl/common/images/close.gif" /></a></div>
      <div style="padding:6px;">
        <div class="popupText" id="linkToThisPageBookmark">An error has occurred if you see this messsage.</div>
        <form name="linktothisurlform" method="post" action="" style="width:275px;margin:0px">
          <input type="text" class="popupURLText" id="linkToThisPageURL" name="urlfield" rows="1" cols="55" onClick="guidewire_selectall();" onFocus="guidewire_selectall();"></input>
        </form>
      </div>
    </div>
    <br />
    <div class="WebWorks_Breadcrumbs" style="text-align: left;">
      <span>ClaimCenter Integration Guide</span> : 
    <span class="WebWorks_Breadcrumbs" style="text-align: left;"><a class="WebWorks_Breadcrumb_Link" href="webservices.04.01.html#3277467">Web Services (SOAP)</a> : Writing Command Line Tools to Call Web Services</span></div>
    <hr align="left" />
    <blockquote>
      <div class="H1_-_Heading_1"><a name="3277467">Writing Command Line Tools to Call Web Services</a></div>
      <div class="B_-_Body"><a name="3277468">Guidewire provides a Java class to compile your code into a command line tool and supports command line argu</a>ments. Use command line tools to encapsulate web services API client code for legacy systems that work best with command line tools.</div>
      <div class="B_-_Body"><a name="3431980">During development, you might also want to write command line tools for commonly used actions:</a></div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="3583801">Fix a claim with errors that seems not properly synchronized with an external system. You can trigger a claim </a><span class="e_-_emphasis">resync</span> remotely<span class="e_-_emphasis">.</span></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="3277472">Generate custom reports to evaluate whether an action was successful</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="3277473">Start a validation batch process </a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="3277474">Start other batch processes</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="3277478">Search for claims based on custom criteria</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="3277480">The Java class </a><span class="cv_-_computer_voice">CmdLineToolBase</span> in the package <span class="cv_-_computer_voice">com.guidewire.util.webservices</span> is an abstract implementation of a command line tool that provides:</div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="3440025">built-in support for calling a web service API interface</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="3440030">parsing of command line arguments</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="3440033">establishing a connection to the ClaimCenter</a><span style="font-family: Arial; font-size: 8.0pt"> </span>server providing request web services</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="3440034">provides an interface to output help information from the command line tool.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="3277487">The </a><span class="cv_-_computer_voice">CmdLineToolBase</span> class works in conjunction with standard open source Java classes from the Apache Foundation: <span class="cv_-_computer_voice">Option</span>, <span class="cv_-_computer_voice">Options</span>, and <span class="cv_-_computer_voice">OptionBuilder</span>. These classes provide a standard mechanism for command line option definitions, pattern definitions that define command line option validity, command line parsing, and the help information for that option.</div>
      <div class="B_-_Body"><a name="3277492">The following table lists built-in command line arguments defined by the </a><span class="cv_-_computer_voice">CmdLineToolBase</span> class:</div>
      <div class="T_-_Table"><a name="3277548">&nbsp;</a></div>
      <table class="withHeading" style="text-align: left" cellspacing="10" summary="">
        <caption></caption>
        <tr>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 1px; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: bottom">
            <div class="TH_-_Table_Heading"><a name="3277495">Built-in </a>option</div>
          </td>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 1px; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: bottom">
            <div class="TH_-_Table_Heading"><a name="3277497">Meaning</a></div>
          </td>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 1px; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: bottom">
            <div class="TH_-_Table_Heading"><a name="3277499">Details</a></div>
          </td>
        </tr>
        <tr>
          <td style="border-top-color: #000000; border-top-style: solid; border-top-width: 1px; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text" style="color: #000000; font-family: &quot;Lucida Sans Typewriter&quot;; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline"><span class="cv_-_computer_voice"><a name="3277501">-help</a></span></div>
          </td>
          <td style="border-top-color: #000000; border-top-style: solid; border-top-width: 1px; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="3277503">Display option help</a></div>
          </td>
          <td style="border-top-color: #000000; border-top-style: solid; border-top-width: 1px; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="3277505">Display the available options and default values for this command line tool.</a></div>
          </td>
        </tr>
        <tr>
          <td style="padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text" style="color: #000000; font-family: &quot;Lucida Sans Typewriter&quot;; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline"><span class="cv_-_computer_voice"><a name="3277507">-d</a></span></div>
          </td>
          <td style="padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="3277509">Set a system property </a>with <span class="pst_-_parameter_in_code_snippets_table">name</span><span class="cvt_-_computer_voice_table">=</span><span class="pst_-_parameter_in_code_snippets_table">value</span> syntax</div>
          </td>
          <td style="padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="3277511">Set a system property as shown in this example:</a><br />&nbsp;&nbsp;&nbsp;<span class="cvt_-_computer_voice_table">-D javax.net.ssl.trustStore=C:/cmd-tools/lib/keystore</span></div>
          </td>
        </tr>
        <tr>
          <td style="padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text" style="color: #000000; font-family: &quot;Lucida Sans Typewriter&quot;; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline"><span class="cv_-_computer_voice"><a name="3277513">-server</a></span></div>
          </td>
          <td style="padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="3277518"> ClaimCenter server</a></div>
          </td>
          <td style="padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="3277523">The ClaimCenter server that is publishing web services. The Java class can </a>override the method <span class="cvt_-_computer_voice_table">getDefaultServerUrl</span> to define the default URL.</div>
          </td>
        </tr>
        <tr>
          <td style="padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text" style="color: #000000; font-family: &quot;Lucida Sans Typewriter&quot;; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline"><span class="cv_-_computer_voice"><a name="3277525">-user</a></span></div>
          </td>
          <td style="padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="3277530">ClaimCenter user name</a></div>
          </td>
          <td style="padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="3277535">The ClaimCenter user name on this server. The Java class can override the </a>method <span class="cvt_-_computer_voice_table">getDefaultUserName</span> to define the default URL.</div>
          </td>
        </tr>
        <tr>
          <td style="padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text" style="color: #000000; font-family: &quot;Lucida Sans Typewriter&quot;; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline"><span class="cv_-_computer_voice"><a name="3277537">-password</a></span></div>
          </td>
          <td style="padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="3277542">ClaimCenter password</a></div>
          </td>
          <td style="padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="3277547">The ClaimCenter password for this user.</a></div>
          </td>
        </tr>
      </table>
      <div class="B_-_Body"><a name="3277549">To create custom command line arguments, create new </a><span class="cv_-_computer_voice">Option</span> objects and pass them in the constructor. The constructor includes an array of <span class="cv_-_computer_voice">Option</span> objects. In Java, create new objects as static class objects using the following syntax:</div>
      <PRE class="CM_-_Code_Middle_Line"><a name="3432458">@SuppressWarnings("static-access")</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3432459">private static final Option MYOPTIONNAME = OptionBuilder</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3432460">      .hasArg()</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3432461">      .withDescription("My description....")</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3432462">      .create("theoptionname");</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3432463"> </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3432464">   // a list of options...</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3432465">   private static final Option[] OPTIONS = {MYOPTIONNAME};</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3432453">&nbsp;</a></PRE>
      <div class="B_-_Body"><a name="3277550">The most important method for the tool for you to override is the </a><span class="cv_-_computer_voice">execute</span> method. It takes an <span class="cv_-_computer_voice">CommandLine</span> object (in package <span class="cv_-_computer_voice">org.apache.commons.cli</span>), a server URL, and a web service proxy. Cast the web service proxy to the specific interface subclass you are calling, such as <span class="cv_-_computer_voice">IUserAPI</span> or your custom web service API class. Get the proper URL from the web service endpoint using the SOAP binding stub that contains your web service name with the <span class="cv_-_computer_voice">SoapBindingStub</span> suffix. Refer to the example for details. Look for the following line in the constructor and change the bold text to your web service name:</div>
      <div class="CS_-_Code_Single_Line"><a name="3432507">super(OPTIONS, </a><span class="s_-_strong">MyServiceAPI</span>SoapBindingStub.ENDPOINT_ADDRESS_PROPERTY, <span class="s_-_strong">MyServiceAPI</span>.class);</div>
      <div class="B_-_Body"><a name="3432508">There are other required methods, such as </a><span class="cv_-_computer_voice">getProductCode</span>. You must implement this method to return the product code (<span class="cv_-_computer_voice">"cc"</span>, <span class="cv_-_computer_voice">"pc"</span>, or <span class="cv_-_computer_voice">"bc"</span>). For ClaimCenter, write a method that looks like the following:</div>
      <PRE class="CM_-_Code_Middle_Line"><a name="3432497">  protected String getProductCode() {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3432449">    return "cc";</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3432670">  }</a></PRE>
      <div class="NI_-_Note_Important">
        <span class="n_-_note">IMPORTANT   </span><a name="3432671">If you do not implement </a><span class="cv_-_computer_voice">getProductCode</span> properly, your tool throws exceptions during login.</div>
      <div class="B_-_Body"><a name="3432695">You must also implement the </a><span class="cv_-_computer_voice">getDefaultServerUrl</span> method. It must return the server URL of the ClaimCenter application, such as <span class="cv_-_computer_voice">"http://localhost:8080/cc"</span>.</div>
      <div class="HS_-_Head_Sub"><a name="3432699">If You Want to Call More than One Web Service</a></div>
      <div class="B_-_Body"><a name="3432419">This class makes it simple to code tools that only need to communicate with one web service interface. You can </a>use more than one ClaimCenter web service interface in your tool if necessary. From within your <span class="cv_-_computer_voice">execute</span> method, get an additional SOAP API proxy by calling <span class="cv_-_computer_voice">getProxy()</span> on the tool itself. The <span class="cv_-_computer_voice">getProxy</span> method is implement in the superclass <span class="cv_-_computer_voice">CmdLineToolBase</span>. Do not attempt to use the <span class="cv_-_computer_voice">APILocator</span> class discussed in <a href="javascript:WWHClickedPopup('integration', 'webservice-consuming.html#2001467', '');" title="Calling Web Services from Gosu">“Local SOAP Endpoints in Gosu”</a>, since the command line tool does <span class="s_-_strong">not</span> support using <span class="cv_-_computer_voice">APILocator</span>.</div>
      <div class="NI_-_Note_Important">
        <span class="n_-_note">IMPORTANT   </span><a name="3440072">If your command line tool calls more than one ClaimCenter SOAP API get a handle to </a>the desired API interface with the <span class="cv_-_computer_voice">CmdLineToolBase.getProxy(...)</span> method. Do not use the Java class <span class="cv_-_computer_voice">APILocator</span> within a tool that uses <span class="cv_-_computer_voice">CmdLineToolBase</span>.</div>
      <div class="H2_-_Heading_2"><a name="3432027">Example Command Line Tool</a></div>
      <div class="B_-_Body"><a name="3432413">The following example command line tool calls the web service defined in the </a><a href="javascript:WWHClickedPopup('integration', 'webservices.04.03.html#3394219', '');" title="Publishing a Web Service">“Publishing a Web Service”</a> and <a href="javascript:WWHClickedPopup('integration', 'webservices.04.05.html#3395304', '');" title="Testing Your Web Service">“Testing Your Web Service”</a>. The web service <span class="cv_-_computer_voice">MyServiceAPI</span> returns a custom Gosu class called <span class="cv_-_computer_voice">UserPhones</span> that represents properties in a <span class="cv_-_computer_voice">User</span> entity. For this example, the command line tool defines one option called <span class="cv_-_computer_voice">getuserphones</span>. This option takes a public ID of a user. </div>
      <div class="B_-_Body"><a name="3432039">Since the password is also a required parameter, the required arguments would look like:</a></div>
      <PRE class="CF_-_Code_First_Line"><a name="3432032">-password </a><span class="pc_-_parameter_in_code">PASSWORDHERE</span> -getuserphones <span class="pc_-_parameter_in_code">PUBLICID</span></PRE>
      <div class="B_-_Body"><a name="3432033">For example:</a></div>
      <div class="CS_-_Code_Single_Line"><a name="3448394">-password gw -getuserphones default_data:1</a></div>
      <div class="B_-_Body"><a name="3448397">If you want to use and test this example, first create the web service as shown in </a><a href="javascript:WWHClickedPopup('integration', 'webservices.04.03.html#3394219', '');" title="Publishing a Web Service">“Publishing a Web Service”</a>. Then, regenerate the integration libraries as discussed in <a href="javascript:WWHClickedPopup('integration', 'overview.03.3.html#2079851', '');" title="Preparing for Integration Development">“Regenerating the Integration Libraries”</a>. The generated libraries include your new web service <span class="cv_-_computer_voice">MyServiceAPI</span> in the Java JAR files.</div>
      <div class="B_-_Body"><a name="3432049">Create a new project directory. Relative to that project directory, create the following file at the location:</a></div>
      <div class="CS_-_Code_Single_Line"><a name="3432053">src/example/TestCLI.java</a></div>
      <div class="B_-_Body"><a name="3432057">In that file, insert the following code:</a></div>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431821">package example;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431823">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431921">import java.io.IOException;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431824">import java.net.MalformedURLException;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431825">import java.rmi.RemoteException;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431827">import javax.xml.rpc.ServiceException;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431829">import org.apache.commons.cli.CommandLine;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431830">import org.apache.commons.cli.Option;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431831">import org.apache.commons.cli.OptionBuilder;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431832">import org.apache.commons.cli.ParseException;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431833">import org.xml.sax.SAXException;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431835">import com.guidewire.util.webservices.CmdLineToolBase;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431836">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431837">// MY IMPORTS</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431838">import com.guidewire.cc.webservices.api.MyServiceAPI;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431839">import com.guidewire.cc.webservices.api.MyServiceAPISoapBindingStub;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431840">import com.guidewire.cc.webservices.entity.UserPhones;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431841">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431842">public class TestCLI extends CmdLineToolBase {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431843">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431844">  // my command line tool options...</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431845">   @SuppressWarnings("static-access")</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431846">private static final Option PUBLICID = OptionBuilder</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431847">      .hasArg()</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431848">      .withDescription("My custom parameter: Get user phones. Supply the PublicID of a USER entity!")</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431849">      .create("getuserphones");</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431850"> </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431851">   // a list of options...</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431852">   private static final Option[] OPTIONS = {PUBLICID};</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431853">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431854">   </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431855">   private static MyServiceAPI myAPI;  </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431856">   </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431857">   // Default Constructor</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431858">   public TestCLI() {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431859">     super(OPTIONS, MyServiceAPISoapBindingStub.ENDPOINT_ADDRESS_PROPERTY, MyServiceAPI.class);</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431860">   }</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431861">   </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431862">   // 3-option constructor</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431863">  public TestCLI(Option[] listofoptions, String s, Class aClass) {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431864">    super(listofoptions, s, aClass);</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431865">  }</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431866">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431867">  public void execute(CommandLine arguments, String arg1, Object apiObject)</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431868">      throws IOException, ParseException, RemoteException,</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431869">      MalformedURLException, ServiceException, SAXException {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431870">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431871">    System.out.println("Beginning command line tool test....");</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431872">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431873">    // cast the inbound object to the ImportToolsAPI web services interface</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431874">    myAPI = (MyServiceAPI) apiObject;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431875"> </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431876">    String publicID = arguments.getOptionValue("getuserphones");</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431877">    System.out.println("Call the web service with public ID " + publicID);</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431878">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431879">    // Call the web service method!</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431880">    UserPhones up = myAPI.getUserPhones(publicID);</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431881">    </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431882">    System.out.println("The home phone for this user is: " + up.getHomePhone());</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431883">    System.out.println("The work phone for this user is: " + up.getWorkPhone());</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431884">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431885">    System.out.println("Ending command line tool test.");</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431886">  }</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431887">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431888">  protected String getDefaultServerUrl() {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431889">    return "http://localhost:8080/cc";</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431890">  }</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431891">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431892">  protected String getDefaultUserName() {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431893">    return "su"; // usually you create a NEW user just for your SOAP access for easy tracking</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431894">  }</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431895">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431896">  public Option[] getOptionsOneRequired() {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431897">    return OPTIONS;  // return list of options -- caller must use ONE of them</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431898">  }</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431899">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3432378">&nbsp;</a>&nbsp;// Warning: you MUST implement getProductCode and return the product code ("cc", "pc", or "bc")</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431900">  protected String getProductCode() {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431901">    return "cc";</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431902">  }</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431903">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431904">  public static void main(String[] args) {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431905">    System.out.println("Starting main() method");</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431906">    try {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431907">      new TestCLI().execute(args); // this triggers main execute() method!</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431908">    } catch (RemoteException e) {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431909">      e.printStackTrace();</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431910">    }</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431911">    System.out.println("Ending main() method");</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431912">  }</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431913">}</a></PRE>
      <div class="B_-_Body"><a name="3431581">Given the command line arguments mentioned earlier, the tool outputs something like:</a></div>
      <PRE class="CM_-_Code_Middle_Line"><a name="3432567">Starting main() method</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3432568">Beginning command line tool test....</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3432569">Call the web service with public ID default_data:1</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3432570">The home phone for this user is: 415-555-1212</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3432571">The work phone for this user is: 415-555-1213</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3432572">Ending command line tool test.</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3432573">Ending main() method</a></PRE>
      <div class="HS_-_Head_Sub"><a name="3432555">Run the Tool From Command Line</a></div>
      <div class="B_-_Body"><a name="3431582">You can use the following Ant file to test your command line tool. This example assumes that the Java source file </a>is in the following directory relative to this Ant file at the path:</div>
      <div class="CS_-_Code_Single_Line"><a name="3431727">src/example/TestCLI.java</a></div>
      <div class="B_-_Body"><a name="3431733">Create the following </a><span class="cv_-_computer_voice">build.xml</span> file:</div>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431671">&lt;project name="Command Line Tool Test" default = "run"&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431672">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431673">  &lt;property name="dir.build" value="classes"/&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431674">  &lt;property name="dir.src" value="src"/&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431675">  &lt;property name="build.toolkit" value="C:/ClaimCenter/soap-api/libs"/&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431676">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431677">  &lt;path id="project.class.path"&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431678">    &lt;fileset dir="${build.toolkit}/lib"&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431679">      &lt;include name="*.jar"/&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431680">    &lt;/fileset&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431681">  &lt;/path&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431682">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431683">  &lt;target name="clean"&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431684">    &lt;delete dir="${dir.build}"/&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431685">  &lt;/target&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431686">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431687">  &lt;target name="init"&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431688">    &lt;mkdir dir="${dir.build}"/&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431689">  &lt;/target&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431690">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431691">  &lt;target name="compile" depends="init"&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431692">    &lt;depend srcdir="${dir.src}"</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431693">      destdir="${dir.build}" closure="true"&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431694">      &lt;classpath&gt; </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431695">        &lt;fileset dir="${build.toolkit}/lib"&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431696">         &lt;include name="gw-*-cc.*jar"/&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431697">        &lt;/fileset&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431698">      &lt;/classpath&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431699">    &lt;/depend&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431700">    &lt;javac srcdir="${dir.src}" destdir="${dir.build}" fork="true" failonerror="false"&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431701">      &lt;classpath refid="project.class.path"/&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431702">    &lt;/javac&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431703">  &lt;/target&gt; </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431705">  </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431706">&nbsp;</a>&nbsp;&lt;target name="run" depends="compile"&gt;</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3432200">       &lt;java classname="example.TestCLI"&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3432201">         &lt;arg line=${build.commandlineargs}"/&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3432202">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431710">         &lt;classpath&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431711">           &lt;pathelement location="${dir.build}"/&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431712">           &lt;pathelement path="${java.class.path}"/&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431713">            &lt;fileset dir="${build.toolkit}/lib"&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431714">            &lt;include name="*.jar"/&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431715">            &lt;/fileset&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431716">         &lt;/classpath&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431717">       &lt;/java&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431718">   &lt;/target&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431719">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3431720"> </a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="3431721">&lt;/project&gt;</a></PRE>
      <div class="B_-_Body"><a name="3440084">Compile and run this tool. Open a command line window and change your working directory to the same direc</a>tory that contains the Ant file and typing the command:</div>
      <div class="CS_-_Code_Single_Line"><a name="3440085">ant -Dbuild.commandlineargs="-password gw -getuserphones default_data:1"</a></div>
      <div class="B_-_Body"><a name="3432338">For a better interface to your command line tool, create a wrapper for it. For example, for Windows use create a </a>command line batch script (<span class="cv_-_computer_voice">.bat</span> file) file in that directory called <span class="cv_-_computer_voice">userphones.bat</span> with contents:</div>
      <div class="CS_-_Code_Single_Line"><a name="3432339">ant -Dbuild.commandlineargs="%*"</a></div>
      <div class="B_-_Body"><a name="3432371">Next, compile and run this tool. Open a command line window and changing your working directory to the same </a>directory that contains the Ant file and the <span class="cv_-_computer_voice">getuserphones.bat</span> file. Next, type the command:</div>
      <div class="CS_-_Code_Single_Line"><a name="3432372">getuserphones -password gw -getuserphones default_data:1</a></div>
      <div class="B_-_Body"><a name="3432257">This outputs something similar to the following:</a></div>
      <PRE class="CF_-_Code_First_Line"><a name="3432258">Buildfile: build.xml</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3432259">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3432260">init:</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3432261">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3432262">compile:</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3432263">    [javac] Compiling 1 source file to C:\Documents and Settings\MyLogin\workspace\cli\classes</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3432264">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3432265">run:</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3432266">     [java] Starting main() method</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3432267">     [java] Beginning command line tool test....</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3432268">     [java] Call the web service with public ID default_data:1</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3432269">     [java] The home phone for this user is: 415-555-1212</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3432270">     [java] The work phone for this user is: 415-555-1213</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3432271">     [java] Ending command line tool test.</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3432272">     [java] Ending main() method</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3432273">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3432274">BUILD SUCCESSFUL</a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="3432275">Total time: 21 seconds</a></PRE>
      <div class="B_-_Body"><a name="3432653">You can call your class as a command line tool without Ant to reduce the amount of text that outputs to standard </a>out. Simply run the <span class="cv_-_computer_voice">example.TestCLI</span> class directly with the <span class="cv_-_computer_voice">java</span> command line tool. Remember to include all the necessary JAR files using the <span class="cv_-_computer_voice">-classpath</span> argument.</div>
      <script type="text/javascript" language="JavaScript1.2">
        <!--
          // Clear related topics
          //
          WWHClearRelatedTopics();

          document.writeln(WWHRelatedTopicsInlineHTML());
        // -->
      </script>
    </blockquote>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag() + WWHALinksDivTag());
      // -->
    </script>
  </body>
</html>