<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <!-- MOTW-DISABLED saved from url=(0014)about:internet -->
    <title>Claim Financials Web Services</title>
    <link rel="StyleSheet" href="css/financials.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        var  WebWorksRootPath = "";
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        // Set reference to top level help frame
        //
        var  WWHFrame = WWHGetWWHFrame("", true);
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
    <!-- THE FOLLOWING IS A GUIDEWIRE STYLE DEFINITION FOR THE LINK TO THIS FEATURE -->
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <!-- THE FOLLOWING IS A GUIDEWIRE GSCRIPT FUNCTION FOR THE LINK TO THIS FEATURE -->
    <script type="text/javascript">
function guidewire_selectall()
{
var text_val=eval("document.linktothisurlform.urlfield");
text_val.focus();
text_val.select();
}
</script>
  </head>
  <body onLoad="WWHUpdate();" onUnload="WWHUnload();" onKeyDown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onKeyPress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onKeyUp="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">
    <!-- THE FOLLOWING IS A GUIDEWIRE DIV FOR THE 'LINK TO THIS' FEATURE -->
    <div id="linkToThisPage" class="popup" style="display: none;">
      <div class="popupTitle">Link Directly to This Page 
           <a href="#" onclick="var thePopup = getElementById('linkToThisPage');thePopup.style.display='none';return false;"><img class="popupClosebox" src="wwhelp/wwhimpl/common/images/close.gif" /></a></div>
      <div style="padding:6px;">
        <div class="popupText" id="linkToThisPageBookmark">An error has occurred if you see this messsage.</div>
        <form name="linktothisurlform" method="post" action="" style="width:275px;margin:0px">
          <input type="text" class="popupURLText" id="linkToThisPageURL" name="urlfield" rows="1" cols="55" onClick="guidewire_selectall();" onFocus="guidewire_selectall();"></input>
        </form>
      </div>
    </div>
    <br />
    <div class="WebWorks_Breadcrumbs" style="text-align: left;">
      <span>ClaimCenter Integration Guide</span> : 
    <span class="WebWorks_Breadcrumbs" style="text-align: left;"><a class="WebWorks_Breadcrumb_Link" href="financials.11.01.html#3300706">Financials Integration</a> : Claim Financials Web Services</span></div>
    <hr align="left" />
    <blockquote>
      <div class="H1_-_Heading_1"><a name="3300706">Claim Financials Web Services</a></div>
      <div class="B_-_Body"><a name="3300708">The claim financials API (</a><span class="cv_-_computer_voice">IClaimFinancialsAPI</span>) interface manipulates checks, transaction sets, and other financial information attached to claims.</div>
      <div class="H2_-_Heading_2"><a name="3300709">Check Update Status SOAP APIs</a></div>
      <div class="B_-_Body"><a name="3301142">An important method in the </a><span class="cv_-_computer_voice">IClaimFinancialsAPI</span> interface is the <span class="cv_-_computer_voice">updateCheckStatus</span> method. It updates the status of a payment based on information coming back from the check processing system or bank. For example, an external system could indicate that a check has cleared. </div>
      <div class="B_-_Body"><a name="3300713">To update check status from SOAP APIs, see </a><a href="javascript:WWHClickedPopup('integration', 'financials.11.04.html#3300953', '');" title="Check Integration">“Update Check Status”</a>.</div>
      <div class="H2_-_Heading_2"><a name="3300714">Check Void and Stop SOAP APIs</a></div>
      <div class="B_-_Body"><a name="3300718">To void or stop a check from SOAP APIs, see </a><a href="javascript:WWHClickedPopup('integration', 'financials.11.04.html#3300989', '');" title="Check Integration">“Voiding and Stopping Checks”</a>.</div>
      <div class="H2_-_Heading_2"><a name="3300720">Add Claim Financials SOAP APIs</a></div>
      <div class="B_-_Body"><a name="3300722">There are two methods in the </a><span class="cv_-_computer_voice">IClaimFinancialsAPI</span> interface for adding claim financials to a claim. </div>
      <div class="B_-_Body"><a name="3300723">Both methods take the financials information in the form of a subclass of </a><span class="cv_-_computer_voice">TransactionSet</span> that corresponds to the desired data:</div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="ri_-_run_in_header"><a name="3300725">Checks.</a></span> For checks, create a <span class="cv_-_computer_voice">CheckSet</span> object, which includes a list of checks, a list of check groups, and a set of associated reserves (<span class="cv_-_computer_voice">CheckSetReserve</span> objects). Check sets can include recurring checks.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="ri_-_run_in_header"><a name="3300728">Recoveries.</a></span> For recoveries, create a <span class="cv_-_computer_voice">RecoverySet</span> object, which is mostly a container for a one-item array of recovery (<span class="cv_-_computer_voice">Recovery</span>) objects. Refer to the SOAP API Reference Javadoc for details.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="ri_-_run_in_header"><a name="3300732">Reserves.</a></span> For checks, create a <span class="cv_-_computer_voice">ReserveSet</span> object, which is mostly a container for an array of reserve (<span class="cv_-_computer_voice">Reserve</span>) objects.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="3300734">For more details on the specific transaction properties, refer to the </a><span class="bt_-_book_title">SOAP API Reference Javadoc</span> for details. </div>
      <div class="B_-_Body"><a name="3300735">To submit new financials that have been processed neither in ClaimCenter or an external system yet, use the </a><span class="cv_-_computer_voice">addClaimFinancialsWithValidation</span> method. It triggers transaction validation, duplicate checking, approval, and submission. </div>
      <div class="B_-_Body"><a name="3301838">This method runs validation twice: both before submitting for approval, and also after committing to the data</a>base. If you are trying to integrate financial information for later editing and processing, use this input method because it parallels the steps in the user interface. </div>
      <div class="B_-_Body"><a name="3301849">If you want approval to run, set the financial transaction status for the financials to the draft status </a>(<span class="cv_-_computer_voice">TransactionStatus.TC_draft</span>). For checks and transactions, in general set the financial transaction status for incoming financials to the <span class="cv_-_computer_voice">draft</span> status (the typecode <span class="cv_-_computer_voice">TransactionStatus.TC_draft</span>). </div>
      <div class="B_-_Body"><a name="3301856">You can also choose to use </a><span class="cv_-_computer_voice">AwaitingSubmission</span> or <span class="cv_-_computer_voice">PendingApproval</span> status to mark the object for Rules to transition a recently-imported check to a later status such as <span class="cv_-_computer_voice">issued</span>. Do <span class="s_-_strong">not</span> set status to a status value that implies committed actions, such as the status <span class="cv_-_computer_voice">submitted</span>, <span class="cv_-_computer_voice">requesting</span>, <span class="cv_-_computer_voice">requested</span>, or <span class="cv_-_computer_voice">issued</span> (those values will throw exceptions on import).</div>
      <div class="B_-_Body"><a name="3300737">For situations in which ClaimCenter provides only </a><span class="e_-_emphasis">read-only</span> financial information entered from another system, use the <span class="cv_-_computer_voice">addClaimFinancials</span> method. Despite the lack of the phrase “with validation” in the method name, this method <span class="s_-_strong">does</span> trigger validation. Never attempt to import financials that would fail validation. However, this method does <span class="s_-_strong">not</span> perform the additional steps of duplicate checking, approval processing, or submission procession. You can only import transaction sets with status <span class="cv_-_computer_voice">approved</span>. All checks in the transaction set must have a status of <span class="cv_-_computer_voice">requested</span>, <span class="cv_-_computer_voice">pendingvoid</span>, <span class="cv_-_computer_voice">voided</span>, <span class="cv_-_computer_voice">pendingstop</span>, <span class="cv_-_computer_voice">stopped</span>, <span class="cv_-_computer_voice">issued</span>, or <span class="cv_-_computer_voice">cleared</span>. All other types of transactions in the transaction set must have a status of <span class="cv_-_computer_voice">submitted</span>, <span class="cv_-_computer_voice">pendingvoid</span>, <span class="cv_-_computer_voice">voided</span>, <span class="cv_-_computer_voice">pendingstop</span>, <span class="cv_-_computer_voice">stopped</span>, or <span class="cv_-_computer_voice">recoded</span>. </div>
      <div class="B_-_Body"><a name="3300739">Both of these methods can also take a set of new </a><span class="cv_-_computer_voice">Document</span> objects to attach to the claim. Encapsulate the documents within a <span class="cv_-_computer_voice">TransactionSetDocument</span> object. You can attach an array of an array of <span class="cv_-_computer_voice">TransactionSetDocument</span> objects to a <span class="cv_-_computer_voice">TransactionSet</span> subclass using the method on <span class="cv_-_computer_voice">TransactionSet</span> called <span class="cv_-_computer_voice">setDocuments</span>.</div>
      <div class="B_-_Body"><a name="3300745">These methods work only with active claims. If an external system tries to post updates on an </a><span class="e_-_emphasis">archived</span> claim, ClaimCenter throws the exception <span class="cv_-_computer_voice">BadIdentifierException</span> to the web service client.</div>
      <div class="B_-_Body"><a name="3300747">To check whether a claim is archived before calling this method, call the </a><span class="cv_-_computer_voice">IClaimAPI</span> method <span class="cv_-_computer_voice">getClaimInfo</span> with <span class="cv_-_computer_voice">null</span> as the second parameter and get the archived state:</div>
      <div class="CS_-_Code_Single_Line"><a name="3300748">archiveState = myClaimAPI.getClaimInfo("ABC:12345", null).getArchiveState();</a></div>
      <div class="B_-_Body"><a name="3300751">Additionally, you can use the </a><span class="cv_-_computer_voice">reopenClaim</span> method of <span class="cv_-_computer_voice">IClaimAPI</span> to reopen the claim if necessary, which would allow you to add financials to it.</div>
      <div class="H3_-_Heading_3"><a name="3300753">Multicurrency with New Financials</a></div>
      <div class="B_-_Body"><a name="3300754">If you import transactions with the </a><span class="cv_-_computer_voice">IClaimFinancialsAPI</span> method <span class="cv_-_computer_voice">addClaimFinancials</span>, there are two ways to import transactions.</div>
      <div class="B_-_Body"><a name="3300755">There are special method signatures of </a><span class="cv_-_computer_voice">addClaimFinancials</span> and <span class="cv_-_computer_voice">addClaimFinancialsWithValidation</span> that accept an exchange rate parameter and a comment about the exchange rate:</div>
      <PRE class="CF_-_Code_First_Line"><a name="3300756">String addClaimFinancials(TransactionSet tSet, BigDecimal rate, String exchangeRateDescrip)</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3300757">String </a><span class="cv_-_computer_voice">addClaimFinancialsWithValidation</span>(TransactionSet tSet, BigDecimal rate, </PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="3300758">&nbsp;</a>&nbsp;&nbsp;String exchangeRateDescrip)</PRE>
      <div class="B_-_Body"><a name="3300759">If you use any of the other alternative method signatures, all transactions in a transaction set </a><span class="s_-_strong">must</span> have the same currency and must use the same exchange rate. See <a href="javascript:WWHClickedPopup('app', 'multicurrency.22.1.html#4823749', '');" title="Multiple Currencies">“Multiple Currencies” in the </a><span class="bt_-_book_title"><a href="javascript:WWHClickedPopup('app', 'multicurrency.22.1.html#4823749', '');" title="Multiple Currencies">Application Guide</a></span> for more information about multicurrency and <a href="javascript:WWHClickedPopup('integration', 'financials.11.13.html#3238179', '');" title="Exchange Rate Integration">“Exchange Rate Integration”</a> for more information about specifying exchange rates. These methods throw an exception if you try to add a check with payments of differing currencies. Also, the exchange rate must not be set to <span class="cv_-_computer_voice">null</span>. </div>
      <div class="B_-_Body"><a name="3300770">There is internal validation that the passed-in amount is the same as the calculated value of the product (multipli</a>cation) of transaction amount and exchange rate. If they are not equal, ClaimCenter logs a warning message (logging level <span class="cv_-_computer_voice">WARN</span>), but still save such changes.</div>
      <div class="NW_-_Note_Warning">
        <span class="w_-_warning">WARNING  </span><a name="3300774">Avoid calling locally-hosted SOAP APIs from within a plugin or the rules engine. There </a>are various problems if you call SOAP APIs that modify entities that are currently in use. Additionally, messaging plugins must avoid calling other APIs that might change the message root entity in another bundle. For more details, refer to <a href="javascript:WWHClickedPopup('integration', 'eventsmessaging.10.02.html#3812734', '');" title="Messaging Overview">“Do Not Call SOAP APIs on the Same Server From Messaging Plugins”</a>. If there are SOAP APIs related to financials you want to call from plugin code and you do not know of a workaround, contact Guidewire Customer Support.</div>
      <div class="H2_-_Heading_2"><a name="3300779">Multicurrency Foreign Exchange Adjustment SOAP APIs</a></div>
      <div class="B_-_Body"><a name="3300780">There are two </a><span class="cv_-_computer_voice">IClaimFinancialsAPI</span> methods to perform foreign exchange adjustments using web services. There are two different methods, one to apply to a check, and one to apply to a payment.</div>
      <div class="B_-_Body"><a name="3300781">For a check, use the method:</a></div>
      <div class="CS_-_Code_Single_Line"><a name="3300782">applyForeignExchangeAdjustmentToCheck(String checkId, BigDecimal newClaimCurrencyAmount)</a></div>
      <div class="B_-_Body"><a name="3300783">For a payment, use the method:</a></div>
      <div class="CS_-_Code_Single_Line"><a name="3300784">applyForeignExchangeAdjustmentToPayment(String paymentId, BigDecimal newClaimCurrencyAmount)</a></div>
      <div class="B_-_Body"><a name="3300785">They both apply a foreign exchange adjustment to the payments on the indicated check or payment, once the </a>final converted amount is known. This method can only be called on a check/payment that has already been escalated and sent downstream, but has not been canceled or transferred. </div>
      <div class="B_-_Body"><a name="3300786">This method is only for the case of where the insurer’s deployment does not support multiple base currencies. </a>That is, use this if the claim and reporting currencies are always the same. For example, suppose you create a check with two payments in the amounts of $60.00 and $40.00 in the transaction currency. Initially, the payments have the same amounts in the claim currency, which means the exchange rate at the time of check creation is 1:1. If the check eventually cashes, suppose the exchange rate changes to be 1:1.1. The two payments now total $110.00 in the claim currency. If this happens, you can call this method and pass $110 as the new claim currency amount. The additional $10 divides up between the payments proportionally, resulting in one payment for $66.00, and one for $44.00, which is a 10% increase of each. If either payment had multiple line items, the additional monies divide up proportionally across line items. The Total Incurred and Total Payments calculated values change to reflect the foreign exchange rate adjustment.</div>
      <div class="B_-_Body"><a name="3300787">ClaimCenter does not support foreign exchange adjustments for multi-payee checks or payments. However, </a>joint-payee checks can have adjustments.</div>
      <div class="N_-_Note">
        <span class="n_-_note">Note: </span><a name="3300791">See </a><a href="javascript:WWHClickedPopup('app', 'multicurrency.22.1.html#4823749', '');" title="Multiple Currencies">“Multiple Currencies” in the </a><span class="bt_-_book_title"><a href="javascript:WWHClickedPopup('app', 'multicurrency.22.1.html#4823749', '');" title="Multiple Currencies">Application Guide</a></span> for more information about multicurrency and <a href="javascript:WWHClickedPopup('integration', 'financials.11.13.html#3238179', '');" title="Exchange Rate Integration">“Exchange Rate Integration”</a> for more information about specifying exchange rates. </div>
      <div class="NW_-_Note_Warning">
        <span class="w_-_warning">WARNING  </span><a name="3300795">Avoid calling locally-hosted SOAP APIs from within a plugin or the rules engine. There </a>are various problems if you call SOAP APIs that modify entities that are currently in use. Additionally, messaging plugins must avoid calling other APIs that might change the message root entity in another bundle. For more details, refer to <a href="javascript:WWHClickedPopup('integration', 'eventsmessaging.10.02.html#3812734', '');" title="Messaging Overview">“Do Not Call SOAP APIs on the Same Server From Messaging Plugins”</a>. If there are SOAP APIs related to financials you want to call from plugin code and you do not know of a workaround, contact Guidewire Customer Support.</div>
      <div class="H2_-_Heading_2"><a name="3300799">Getting Financials By Cost Type, Cost Category, and Cache Type</a></div>
      <div class="B_-_Body"><a name="3300801">The </a><span class="cv_-_computer_voice">IClaimFinancialsAPI</span> web services API interface extracts financials information for a set of claims or exposures based on a financials cache type, cost type, and cost category. Not all financials values map to a specific cost category or cost type. If you need the overall information for a claim or exposure, pass <span class="cv_-_computer_voice">null</span> for those parameters.</div>
      <div class="B_-_Body"><a name="3300803">To extract claim financials, use the </a><span class="cv_-_computer_voice">getClaimAmounts</span> method, which takes claims (as claim numbers), as well as a <span class="cv_-_computer_voice">FinancialsCacheType</span>, a <span class="cv_-_computer_voice">CostCategory</span>, and <span class="cv_-_computer_voice">CostType</span>.</div>
      <div class="B_-_Body"><a name="3300808">To extract claim financials, use the </a><span class="cv_-_computer_voice">getExposureAmounts</span> method, which is identical except takes a list of exposures instead of claims.</div>
      <div class="NW_-_Note_Warning">
        <span class="w_-_warning">WARNING  </span><a name="3300809">Avoid calling locally-hosted SOAP APIs from within a plugin or the rules engine. There </a>are various problems if you call SOAP APIs that modify entities that are currently in use. Additionally, messaging plugins must avoid calling other APIs that might change the message root entity in another bundle. For more details, refer to <a href="javascript:WWHClickedPopup('integration', 'eventsmessaging.10.02.html#3812734', '');" title="Messaging Overview">“Do Not Call SOAP APIs on the Same Server From Messaging Plugins”</a>. If there are SOAP APIs related to financials you want to call from plugin code and you do not know of a workaround, contact Guidewire Customer Support.</div>
      <script type="text/javascript" language="JavaScript1.2">
        <!--
          // Clear related topics
          //
          WWHClearRelatedTopics();

          document.writeln(WWHRelatedTopicsInlineHTML());
        // -->
      </script>
    </blockquote>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag() + WWHALinksDivTag());
      // -->
    </script>
  </body>
</html>