<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <!-- MOTW-DISABLED saved from url=(0014)about:internet -->
    <title>Startable Plugins</title>
    <link rel="StyleSheet" href="css/plugins.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        var  WebWorksRootPath = "";
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        // Set reference to top level help frame
        //
        var  WWHFrame = WWHGetWWHFrame("", true);
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
    <!-- THE FOLLOWING IS A GUIDEWIRE STYLE DEFINITION FOR THE LINK TO THIS FEATURE -->
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <!-- THE FOLLOWING IS A GUIDEWIRE GSCRIPT FUNCTION FOR THE LINK TO THIS FEATURE -->
    <script type="text/javascript">
function guidewire_selectall()
{
var text_val=eval("document.linktothisurlform.urlfield");
text_val.focus();
text_val.select();
}
</script>
  </head>
  <body onLoad="WWHUpdate();" onUnload="WWHUnload();" onKeyDown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onKeyPress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onKeyUp="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">
    <!-- THE FOLLOWING IS A GUIDEWIRE DIV FOR THE 'LINK TO THIS' FEATURE -->
    <div id="linkToThisPage" class="popup" style="display: none;">
      <div class="popupTitle">Link Directly to This Page 
           <a href="#" onclick="var thePopup = getElementById('linkToThisPage');thePopup.style.display='none';return false;"><img class="popupClosebox" src="wwhelp/wwhimpl/common/images/close.gif" /></a></div>
      <div style="padding:6px;">
        <div class="popupText" id="linkToThisPageBookmark">An error has occurred if you see this messsage.</div>
        <form name="linktothisurlform" method="post" action="" style="width:275px;margin:0px">
          <input type="text" class="popupURLText" id="linkToThisPageURL" name="urlfield" rows="1" cols="55" onClick="guidewire_selectall();" onFocus="guidewire_selectall();"></input>
        </form>
      </div>
    </div>
    <br />
    <div class="WebWorks_Breadcrumbs" style="text-align: left;">
      <span>ClaimCenter Integration Guide</span> : 
    <span class="WebWorks_Breadcrumbs" style="text-align: left;"><a class="WebWorks_Breadcrumb_Link" href="plugins.09.01.html#2525000">Plugin Overview</a> : Startable Plugins</span></div>
    <hr align="left" />
    <blockquote>
      <div class="H1_-_Heading_1"><a name="2525000">Startable Plugins</a></div>
      <div class="B_-_Body"><a name="2525088">You can register custom code that runs at server startup in the form of a </a><span class="e_-_emphasis">startable plugin</span> implementation. You can use this type of plugin as a listener, such as listening to a JMS queue. You can selectively start or stop each startable plugin in the Internal Tools interface, unlike other types of plugins. For a cluster, startable plugins only operate on the batch server.</div>
      <div class="NI_-_Note_Important">
        <span class="n_-_note">IMPORTANT   </span><a name="2584723">Startable plugins run only on the batch server.</a></div>
      <div class="B_-_Body"><a name="2525342">Startable plugins have some similarities with the messaging reply plugin, in the sense that they typically imple</a>ment some sort of listener code that initially runs at start up. A messaging transport’s main task is to send a message to an external system and listen for the reply acknowledgment. However, this metaphor might not apply to some integrations if you do not need send outgoing messages about data changes using the event and messaging system. However, if you need listener code and it must initialize with server startup, use a startable plugin. </div>
      <div class="N_-_Note">
        <span class="n_-_note">Note: </span><a name="2525404">Some integrations require external code to trigger an action within ClaimCenter but do not need </a>custom listener code. Depending on your needs, consider publishing a ClaimCenter <span class="e_-_emphasis">web service</span> instead of a startable plugin. For more information, see <a href="javascript:WWHClickedPopup('integration', 'webservices.04.01.html#3412469', '');" title="Web Services (SOAP)">“Web Services (SOAP)”</a>.</div>
      <div class="B_-_Body"><a name="2525109">For ClaimCenter users with administration privileges, you can view the status of each startable plugin and also </a>start or stop each one. To view the status, go to <span class="ui_-_UI_element">Server Tools</span> → <span class="ui_-_UI_element">Startable</span><span class="ui_-_UI_element">&nbsp;</span><span class="ui_-_UI_element">Plugin</span>. You can change the PCF files for this user interface. For example, you could customize this view to provide detailed information on your startable plugin, on its underlying transport mechanism, or any other information.</div>
      <div class="B_-_Body"><a name="2558508">Register your startable plugin in Studio just like any other plugin. Find this plugin interface in the Studio Plugins </a>editor in the following location <span class="ui_-_UI_element">Configuration</span> → <span class="ui_-_UI_element">Plugins</span> → <span class="ui_-_UI_element">gw</span> → <span class="ui_-_UI_element">api</span> → <span class="ui_-_UI_element">startable</span> → <span class="ui_-_UI_element">IStartablePlugin</span>. Right-click on that interface name and choose <span class="ui_-_UI_element">Add implementation..</span>.</div>
      <div class="N_-_Note">
        <span class="n_-_note">Note: </span><a name="2558569">This location is slightly different than most plugins, which are in </a><span class="ui_-_UI_element">Configuration</span> → <span class="ui_-_UI_element">Plugins</span> → <span class="ui_-_UI_element">gw</span> → <span class="ui_-_UI_element">plugin</span>.</div>
      <div class="NI_-_Note_Important">
        <span class="n_-_note">IMPORTANT   </span><a name="2585416">For another type of customer-defined background process, see </a><a href="javascript:WWHClickedPopup('integration', 'batchprocess.19.1.html#2185890', '');" title="Custom Batch Processes">“Custom Batch Processes”</a>. </div>
      <div class="H2_-_Heading_2"><a name="2525552">Writing a Startable Plugin</a></div>
      <div class="B_-_Body"><a name="2525665">The basics for a startable plugin are relatively straightforward. Most of your coding of a startable plugin is imple</a>menting your custom listener code or other special service. Write a new class that implements the <span class="cv_-_computer_voice">IStartablePlugin</span> interface and implement the following methods:</div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2525666">a </a><span class="cv_-_computer_voice">start</span> method to start your service (at startup, or from the <span class="ui_-_UI_element">Server Tools</span> → <span class="ui_-_UI_element">Startable</span><span class="ui_-_UI_element">&nbsp;</span><span class="ui_-_UI_element">Plugin </span>page)</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2525667">a </a><span class="cv_-_computer_voice">stop</span> method to stop your service (from the <span class="ui_-_UI_element">Server Tools</span> → <span class="ui_-_UI_element">Startable</span><span class="ui_-_UI_element">&nbsp;</span><span class="ui_-_UI_element">Plugin </span>page)</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2526201">a property accessor function to get the </a><span class="cv_-_computer_voice">State</span> property from your startable plugin. This method returns a typecode from the typelist <span class="cv_-_computer_voice">StartablePluginState</span>: the value <span class="cv_-_computer_voice">Stopped</span> or <span class="cv_-_computer_voice">Started</span>. The administration user interface uses this property accessor to show the state to the user. Define a private variable to hold the current state and your property accessor (get) function can look simple:</div>
            </td>
          </tr>
        </table>
      </div>
      <PRE class="CM_-_Code_Middle_Line"><a name="2526225">// private variables...</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2526238">var _state = StartablePluginState.Stopped;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2526203">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2526252">...</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2526259">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2526266">// property accessor (get) function...</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2526217">override property get State() : StartablePluginState {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2526205">    return _state // return our private variable</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2526206">  }</a></PRE>
      <div class="LP_-_List_Para"><a name="2528217">Alternatively, combine the variable definition with the shortcut keyword </a><span class="cv_-_computer_voice">as</span> to simplify your code. You can combine the variable definition with the property definition can be combined with the single variable definition:</div>
      <div class="CS_-_Code_Single_Line"><a name="2528218">var _state : StartablePluginState as State</a></div>
      <div class="B_-_Body"><a name="2526208">The plugin does include a constructor called on system startup. However, start your service code in the </a><span class="cv_-_computer_voice">start</span> method, not the constructor. Your start method must appropriately set the state (started or stopped) using an internal variable that you define. </div>
      <div class="B_-_Body"><a name="2527206">At minimum, your start method must set your internal variable that tracks your started or stopped state, with code </a>such as:</div>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527254">_state = Started</a></PRE>
      <div class="B_-_Body"><a name="2527255">Additionally, in your </a><span class="cv_-_computer_voice">start</span> method, start any listener code or threads such as a JMS queue listener.</div>
      <div class="B_-_Body"><a name="2525820">Your </a><span class="cv_-_computer_voice">start</span> method has a method parameter that is a callback handler of type <span class="cv_-_computer_voice">StartablePluginCallbackHandler</span>. This callback is important if your startable plugin modifies any entity data, which is likely the case for most real-world startable plugins. </div>
      <div class="B_-_Body"><a name="2585212">Your plugin must run any code that affects entity data within a code block that you pass to the callback handler </a>method called <span class="cv_-_computer_voice">execute</span>. The <span class="cv_-_computer_voice">execute</span> method takes as its argument a Gosu <span class="e_-_emphasis">block</span>, which is a special type of in-line function. (See <a href="javascript:WWHClickedPopup('gosu', 'blocks.17.1.html#1445150', '');" title="Gosu Blocks">“Gosu Blocks”</a>.) The Gosu block you pass to the <span class="cv_-_computer_voice">execute</span> method takes no arguments. </div>
      <div class="N_-_Note">
        <span class="n_-_note">Note: </span><a name="2585235">If you do not need a user context, use the simplest version of the callback handler method </a><span class="cv_-_computer_voice">execute</span>, whose one argument is the Gosu block. To run your code as a specific user, see <a href="javascript:WWHClickedPopup('integration', 'plugins.09.12.html#2528475', '');" title="Startable Plugins">“User Contexts for Startable Plugins”</a>.</div>
      <div class="B_-_Body"><a name="2622469">You do not need to create a separate </a><span class="e_-_emphasis">bundle</span>. If you create new entities to the current bundle, they are in the correct (default) database transaction the application sets up for you. Use the code <span class="cv_-_computer_voice">Transaction.getCurrent()</span> to get the current bundle if you need a reference to the current (writable) bundle. See <a href="javascript:WWHClickedPopup('gosu', 'transactions.21.1.html#1456387', '');" title="Bundles and Transactions">“Bundles and Transactions”</a> for more information about working with bundles.</div>
      <div class="NI_-_Note_Important">
        <span class="n_-_note">IMPORTANT   </span><a name="2622473">The Java language does not directly support blocks. If you implement your plugin in </a>Java, you cannot use a Gosu block but you can use an anonymous class to do the same thing. See <a href="javascript:WWHClickedPopup('integration', 'plugins.09.12.html#2584131', '');" title="Startable Plugins">“If You Define Your Startable Plugin In Java”</a>.</div>
      <div class="B_-_Body"><a name="2584653">The plugin’s </a><span class="cv_-_computer_voice">start</span> method also includes a <span class="cv_-_computer_voice">boolean</span> variable that indicates whether the server is starting. If <span class="cv_-_computer_voice">true</span>, the server is starting up. If <span class="cv_-_computer_voice">false</span>, the start request comes from the <span class="ui_-_UI_element">Server Tools</span> user interface.</div>
      <div class="B_-_Body"><a name="2528249">The following shows a simple Gosu block that changes entity data. This example assumes your listener defined a </a>variable <span class="cv_-_computer_voice">messageBody</span> with information from your remote system. If you get entities from a database query, remember to add them to the current bundle. Refer to <a href="javascript:WWHClickedPopup('gosu', 'querybuilder.09.08.html#2231888', '');" title="Returning Query Results">“Returning Query Results” in the </a><span class="bt_-_book_title"><a href="javascript:WWHClickedPopup('gosu', 'querybuilder.09.08.html#2231888', '');" title="Returning Query Results">Gosu Reference Guide</a></span> for more information about bundles.</div>
      <div class="B_-_Body"><a name="2585045">This simple example queries all </a><span class="cv_-_computer_voice">User</span> entities and sets a property on results of the query:</div>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527328">//variable definition earlier in your class...</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527385">var _callback : StartablePluginCallbackHandler;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527377">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527398">...</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527405">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527370">override function start( cbh: StartablePluginCallbackHandler, isStarting: boolean ) : void</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527329">  {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527330">    _callback = cbh</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527359">&nbsp;</a>&nbsp;&nbsp;&nbsp;_callback.execute( \ -&gt; {</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527487">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2584837">&nbsp;</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var q = gw.api.database.Query.make(User) // run a query</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2584970">&nbsp;</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var b = gw.Transaction.Transaction.Current // get the current bundle</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2584940">&nbsp;</a>&nbsp;&nbsp;&nbsp;&nbsp;</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2584942">&nbsp;</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for (e in q.select()) {</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2585305">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2585306">&nbsp;</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// add entity to writable bundle + save result. The original entity is in a readonly bundle</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2585307">&nbsp;</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// in query results. The add method adds to your writable bundle so you can modify it.</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2526030">&nbsp;</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var e_in_new_bundle = bundle.add(e) </PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527480">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527516">&nbsp;</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// modify properties as desired on the result of bundle.add(e)</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2526006">&nbsp;</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e_in_new_bundle.Department = "Example of setting a property on a writable entity."</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2526007">&nbsp;</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527556">&nbsp;</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527527">&nbsp;</a>&nbsp;&nbsp;&nbsp;})</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527565">&nbsp;</a>&nbsp;//Note: You do not need to commit the bundle here. The execute method commits after your block runs.</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527538">&nbsp;</a>&nbsp;}</PRE>
      <div class="B_-_Body"><a name="2528403">Just like your </a><span class="cv_-_computer_voice">start</span> method must set your internal variable that sets its state to started, your <span class="cv_-_computer_voice">stop</span> method must set your internal state variable to <span class="cv_-_computer_voice">StartablePluginState.Stopped</span>. Additionally, stop whatever background processes or listeners you started in your <span class="cv_-_computer_voice">start</span> method. For example, if your <span class="cv_-_computer_voice">start</span> method creates a new JMS queue listener, your <span class="cv_-_computer_voice">stop</span> method destroys the listener. Similar to the <span class="cv_-_computer_voice">start</span> method’s <span class="p_-_parameter">isStartingUp</span> parameter, the <span class="cv_-_computer_voice">stop</span> method includes a <span class="cv_-_computer_voice">boolean</span> variable that indicates whether the server is shutting down now. If <span class="cv_-_computer_voice">true</span>, the server is shutting down. If <span class="cv_-_computer_voice">false</span>, the stop request comes from the <span class="ui_-_UI_element">Server Tools</span> user interface.</div>
      <div class="H3_-_Heading_3"><a name="2528475">User Contexts for Startable Plugins</a></div>
      <div class="B_-_Body"><a name="2585062">If you use the simplest method signature for the </a><span class="cv_-_computer_voice">execute</span> method on <span style="font-family: &quot;Lucida Sans Typewriter&quot;; font-size: 7.0pt">StartablePluginCallbackHandler</span>, your code does not run with a current ClaimCenter user. Any code that directly or indirectly runs due to this plugin (including preupdate rules or any other code) must be prepared for the current user to be <span class="cv_-_computer_voice">null</span>. You must not rely on non-null values for current user if you use this version.</div>
      <div class="B_-_Body"><a name="2585097">However, there are alternate method signatures for the </a><span class="cv_-_computer_voice">execute</span> method. Use these to perform your startable plugin tasks as a specific <span class="cv_-_computer_voice">User</span>. Depending on the method variant, pass either a user name or the actual <span class="cv_-_computer_voice">User</span> entity.</div>
      <div class="B_-_Body"><a name="2584188">On a related note, the </a><span class="cv_-_computer_voice">gw.transaction.Transaction</span> class has an alternate version of the <span class="cv_-_computer_voice">runWithNewBundle</span> method to create a bundle with a specific user associated with it. You can use this in contexts in which there is no built-in user context or you need to use different users for different parts of your tasks. The method signature is:</div>
      <div class="CS_-_Code_Single_Line"><a name="2558489">gw.transaction.Transaction.runWithNewBundle(\ bundle -&gt; </a><span class="pc_-_parameter_in_code">YOUR_BLOCK_BODY</span>, user)</div>
      <div class="B_-_Body"><a name="2558490">For the second method argument to </a><span class="cv_-_computer_voice">runWithNewBundle</span>, pass either a <span class="cv_-_computer_voice">User</span> entity or a <span class="cv_-_computer_voice">String</span> that is the user name.</div>
      <div class="H3_-_Heading_3"><a name="2558461">Simple Startable Plugin Example</a></div>
      <div class="B_-_Body"><a name="2558462">The following is a complete simple startable plugin. This example does not do anything useful in its start </a>method, but demonstrates the basic structure of creating a block that you pass to the callback handler’s <span class="cv_-_computer_voice">execute</span> method:</div>
      <PRE class="CM_-_Code_Middle_Line"><a name="2525921">package gw.api.startableplugin</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2525505">uses gw.api.startable.IStartablePlugin</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2525506">uses gw.api.startable.StartablePluginCallbackHandler</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2525507">uses gw.api.startable.StartablePluginState</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2525508">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2525509">class HelloWorldStartablePlugin implements IStartablePlugin</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2525510">{</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2525511">  var _state = StartablePluginState.Stopped;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2525512">  var _callback : StartablePluginCallbackHandler;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2525513">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2525514">  construct()</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2525515">  {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2525516">  }</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2525517">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2525518">  override property get State() : StartablePluginState</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2525519">  {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2525520">    return _state</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2525521">  }</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2525522">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2525523">  override function start( cbh: StartablePluginCallbackHandler, isStarting: boolean ) : void</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2525524">  {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2525525">    _callback = cbh</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2525526">    _callback.execute( \ -&gt; {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2525527">      // Do some work:</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2525528">      // [...]</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2525529">    } )</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2525530">    _state = Started</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2525531">    _callback.log( "*** From HelloWorldStartablePlugin: Hello world." )</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2525532">  }</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2525533">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2525534">  override function stop( isShuttingDown: boolean ) : void</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2525535">  {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2525536">    _callback.log( "*** From HelloWorldStartablePlugin: Goodbye." )</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2525537">    _callback = null</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2525538">    _state = Stopped</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2525539">  }</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2525540">}</a></PRE>
      <div class="HS_-_Head_Sub"><a name="2527653">JMS Queue Startable Plugin Example</a></div>
      <div class="B_-_Body"><a name="2525493">The following is a more complex example that creates a JMS queue and listens on it:</a></div>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527678">package gw.api.startableplugin</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527679">uses gw.api.startable.IStartablePlugin</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527680">uses gw.api.startable.StartablePluginCallbackHandler</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527681">uses javax.jms.QueueReceiver;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527682">uses javax.jms.MessageListener;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527683">uses javax.jms.Message;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527684">uses java.lang.RuntimeException</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527685">uses gw.api.startable.StartablePluginState</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527686">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527687">class JMSStartablePlugin extends JMSExampleBase implements IStartablePlugin, MessageListener</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527688">{</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527689">  var _state = StartablePluginState.Stopped;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527690">  var _callback : StartablePluginCallbackHandler;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527691">  var _queueReceiver : QueueReceiver = null;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527692">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527693">  construct()</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527694">  {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527695">  }</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527696">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527697">  override property get State() : StartablePluginState</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527698">  {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527699">    return _state</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527700">  }</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527701">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527702">  override function initQueues() : void</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527703">  {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527704">    // Create reply queue and set up a receiver</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527705">    _queueReceiver = createQueueReceiver(SEND_QUEUE_NAME, this);</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527706">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527707">    try {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527708">      // Specify this object as the message listener on the queue</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527709">      _queueReceiver.setMessageListener(this);</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527710">    } catch (e) {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527711">      throw new RuntimeException("Failed to set listener for queue receiver: " + e.getMessage(), e);</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527712">    }</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527713">  }</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527714">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527715">  override function resetQueues() : void</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527716">  {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527717">    _queueReceiver = null;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527718">  }</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527719">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527720">  override function start( cbh: StartablePluginCallbackHandler, isStarting: boolean ) : void</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527721">  {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527722">    _callback = cbh</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527723">    _state = Started</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527724">    _callback.log( "***Starting JMS." )</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527725">    init()</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527726">    _callback.log( "***Started JMS." )</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527727">  }</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527728">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527729">  override function stop( isShuttingDown: boolean ) : void</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527730">  {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527731">    _callback.log( "***Stopping JMS." )</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527732">    shutdown()</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527733">    _callback.log( "***Stopped JMS." )</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527734">    _state = Stopped</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527735">  }</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527736">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527737">  override function shutdown() : void</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527738">  {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527739">    try {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527740">      // Prevent further message notifications on the callback thread</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527741">      if (_queueReceiver != null) {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527742">        _queueReceiver.setMessageListener(null);</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527743">      }</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527744">    } catch (jmse) {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527745">      _callback.log("Got error trying to shutdown: " + jmse.toString());</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527746">    }</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527747">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527748">    super.shutdown();</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527749">  }</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527750">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527751">  override function onMessage( messageReceived : Message )</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527752">  {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527753">    var messageBody = messageReceived.getStringProperty( BODY_PROPERTY_NAME );</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527754">    _callback.log( "***Received message with body: " + messageBody + "." )</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527755">    _callback.execute( \ -&gt; {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527786">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527793">&nbsp;</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// IMPORTANT: Change this find query to find whatever data you want</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2585338">&nbsp;</a>&nbsp;&nbsp;&nbsp;_callback.execute( \ -&gt; {</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2585339">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2585340">&nbsp;</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var q = gw.api.database.Query.make(User) // run a query</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2585341">&nbsp;</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var b = gw.Transaction.Transaction.Current // get the current bundle</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2585342">&nbsp;</a>&nbsp;&nbsp;&nbsp;&nbsp;</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2585343">&nbsp;</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for (e in q.select()) {</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2585344">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2585345">&nbsp;</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// add entity to writable bundle + save result. The original entity is in a readonly bundle</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2585346">&nbsp;</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// in query results. The add method adds to your writable bundle so you can modify it.</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2585347">&nbsp;</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var e_in_new_bundle = bundle.add(e) </PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2585348">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2585349">&nbsp;</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// modify properties as desired on the result of bundle.add(e)</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2585350">&nbsp;</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e_in_new_bundle.Department = "Example of setting a property on a writable entity."</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2585351">&nbsp;</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2585352">&nbsp;</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2585353">&nbsp;</a>&nbsp;&nbsp;&nbsp;})</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527761">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2585372">} )</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527762">  }</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527763">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527667">}</a></PRE>
      <div class="B_-_Body"><a name="2527819">This example uses another base class that implements much of the JMS-specific logic, as follows:</a></div>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527850">package gw.api.startableplugin</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527851">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527852">uses com.guidewire.logging.LoggerCategory;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527853">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527854">uses javax.jms.ExceptionListener;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527855">uses javax.jms.JMSException;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527856">uses javax.jms.MessageListener;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527857">uses javax.jms.QueueConnection;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527858">uses javax.jms.QueueConnectionFactory;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527859">uses javax.jms.QueueReceiver;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527860">uses javax.jms.QueueSender;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527861">uses javax.jms.QueueSession;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527862">uses javax.jms.Session;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527863">uses javax.naming.Context;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527864">uses javax.naming.InitialContext;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527865">uses javax.naming.NamingException;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527866">uses java.util.Hashtable;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527867">uses java.lang.RuntimeException</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527868">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527869">abstract class JMSExampleBase implements ExceptionListener</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527870">{</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527871">  protected static final var JMS_URL : String = "tcp://localhost:3035/";</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527872">  protected static final var CONNECTION_FACTORY_NAME : String = "ConnectionFactory";</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527873">  protected static final var SEND_QUEUE_NAME : String = "jms/exampleQueue";</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527874">  protected static final var BODY_PROPERTY_NAME : String = "body";</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527875">  protected static final var _logger : LoggerCategory = </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2559722">&nbsp;</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;new LoggerCategory(LoggerCategory.MESSAGING, "examples");</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527876">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527877">  private var _queueConnection : QueueConnection = null;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527878">  private var _queueSession : QueueSession = null;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527879">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527880">  protected function init() {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527881">    // Initialize factory.</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527882">    var factory : QueueConnectionFactory;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527883">    try {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527884">      factory = getQueueConnectionFactory();</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2559742">    } catch (e : NamingException) {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2559743">      throw new RuntimeException("Error initializing queue connection factory. </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2559748">&nbsp;</a>please ensure that your config properties are correct and that your JMS Server is running.", e);</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527887">    }</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527888">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527889">    // Init connection and session.</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527890">    try {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527891">      initQueueConnectionAndSession(factory);</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527892">    } catch (e: JMSException) {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527893">      throw new RuntimeException("Error initializing queue connection and session", e);</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527894">    }</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527895">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527896">    // Init queues.</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527897">    initQueues();</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527898">  }</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527899">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527900">  public function shutdown() {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527901">    closeJMSConnection();</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527902">    resetQueues();</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527903">  }</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527904">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527905">  /**</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527906">   * ****** ExceptionLister ************************************</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527907">   */</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527908">  public override function onException(jmsException : JMSException) {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527909">    _logger.error("JMS Exception: " + jmsException.toString());</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527910">  }</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527911">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527912">  /**</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527913">   * Initialize queues.</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527914">   */</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527915">  protected abstract function initQueues();</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527916">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527917">  /**</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527918">   * Reset the queues, ie. set them to null.</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527919">   */</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527920">  protected abstract function resetQueues();</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527921">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527922">  /**</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527923">   * @param payload payload</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527924">   * @return the JMS message</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527925">   * @throws JMSException</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527926">   */</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527927">  protected function createJMSMessage(payload : String) : javax.jms.Message {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527928">    var jmsMessage = _queueSession.createMessage();</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527929">    jmsMessage.setStringProperty(BODY_PROPERTY_NAME, payload);</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527930">    return jmsMessage;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527931">  }</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527932">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527933">  /**</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527934">   * Create a queue receiver.</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527935">   * @param queueReceiverName the name of the queue receiver</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527936">   * @param listener the listener for the queue receiver</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527937">   * @return queue receiver</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527938">   */</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527939">  protected function createQueueReceiver(queueReceiverName : String, listener : MessageListener) </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2559757">&nbsp;</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: QueueReceiver {</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527940">    try {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527941">      var replyQueue = _queueSession.createQueue(queueReceiverName);</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527942">      var receiver = _queueSession.createReceiver(replyQueue);</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527943">      receiver.setMessageListener(listener);</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527944">      return receiver;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527945">    }  catch (e : JMSException) {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527946">      // Close the JMS connection since we could not create the queue sender.</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527947">      closeJMSConnection();</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527948">      throw new RuntimeException("Failed to initialize receive queue", e);</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527949">    }</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527950">  }</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527951">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527952">  /**</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527953">   * Create a queue sender.</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527954">   * @param queueSenderName the name of the queue sender</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527955">   * @return queue sender</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527956">   * @throws InitializationException if a JMSException occurs</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527957">   */</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527958">  protected function createQueueSender(queueSenderName : String) : QueueSender {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527959">    // Create send queue and set up a sender</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527960">    try {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527961">      var sendQueue = _queueSession.createQueue(queueSenderName);</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527962">      return _queueSession.createSender(sendQueue);</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527963">    } catch (e : JMSException) {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527964">      // Close the JMS connection since we could not create the queue sender.</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527965">      closeJMSConnection();</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527966">      throw new RuntimeException("Failed to initialize send queue", e);</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527967">    }</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527968">  }</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527969">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527970">  /********* Private Methods *************************************/</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527971">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527972">  /**</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527973">   * Create Queue connection factory given the JMS url and the factory name.</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527974">   *</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527975">   * @return a queue connection factory</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527976">   */</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527977">  private function getQueueConnectionFactory() : QueueConnectionFactory {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527978">    // Setup relationship to JMS server</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527979">    var properties = new Hashtable&lt;String, String&gt;();</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527980">    properties.put(Context.INITIAL_CONTEXT_FACTORY, "org.exolab.jms.jndi.InitialContextFactory");</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527981">    properties.put(Context.PROVIDER_URL, JMS_URL);</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527982">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527983">    // Get the JNDI server</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527984">    var jndiContext = new InitialContext(properties);</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527985">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527986">    // Create a connection to the JMS Server</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527987">    return jndiContext.lookup(CONNECTION_FACTORY_NAME) as QueueConnectionFactory;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527988">  }</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527989">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527990">  /**</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527991">   * Initialize the queue connection and session.</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527992">   */</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527993">  private function initQueueConnectionAndSession(factory : QueueConnectionFactory) {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527994">    // Get connection and start it.</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527995">    _queueConnection = factory.createQueueConnection();</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527996">    _queueConnection.start();</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527997">    _queueConnection.setExceptionListener(this);</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527998">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2527999">    // Create a non-transaction session that requires the client to explicitly</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2528000">    // acknowledge the messages received.</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2528001">    _queueSession = _queueConnection.createQueueSession(false, Session.CLIENT_ACKNOWLEDGE);</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2528002">  }</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2528003">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2528004">  /**</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2528005">   * Close JMS connection.  That takes care of the session and queue.</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2528006">   */</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2528007">  private function closeJMSConnection() {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2528008">    if (_queueConnection != null) {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2528009">      try {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2528010">        _queueConnection.close();</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2528011">      } catch (jmse : JMSException) {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2528012">        throw new RuntimeException(jmse);</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2528013">      } finally {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2528014">        _queueConnection = null;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2528015">      }</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2528016">    }</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2528017">  }</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2528018">}</a></PRE>
      <div class="B_-_Body"><a name="2527835">To test this JMS startable plugin, you can use the following class that generates messages on the queue:</a></div>
      <PRE class="CM_-_Code_Middle_Line"><a name="2528064">package gw.api.startableplugin</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2528065">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2528066">uses gw.testharness.TestBase</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2528067">uses gw.api.system.server.Runlevel</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2528068">uses gw.testharness.RunLevel</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2528069">uses gw.testharness.DoNotRunInHarness</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2528070">uses gw.testharness.ProductUnderTest</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2528071">uses javax.jms.QueueSender;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2528072">uses javax.jms.JMSException;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2528073">uses java.lang.RuntimeException</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2528074">uses gw.api.util.DateUtil</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2528075">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2528078">@RunLevel(Runlevel.NONE)</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2528079">class JMSClientTest extends TestBase</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2528080">{</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2528081">  public function testClient() {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2528082">    var client = new JMSClient();</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2528083">    client.init();</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2528084">    client.send("Hello world @ " + DateUtil.currentDate());</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2528085">  }</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2528086">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2528087">  private static class JMSClient extends JMSExampleBase {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2528088">    private var _queueSender : QueueSender = null;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2528089">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2528090">    public function send(message : String) {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2528091">      _logger.info("JMSMessageTransport sending message: " + message);</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2528092">      try {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2528093">        // Create the JMS message.</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2528094">        var jmsMessage = createJMSMessage(message);</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2528095">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2528096">        // Send it to the JMS Server</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2528097">        _queueSender.send(jmsMessage);</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2528098">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2528099">      } catch (jmse : JMSException) {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2528100">        // Assume all JMS errors are unrecoverable</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2528101">        throw new RuntimeException("Error while sending jms message:" + jmse.getMessage(), jmse);</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2528102">      }</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2528103">    }</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2528104">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2528105">    override protected function resetQueues() {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2528106">      _queueSender = null;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2528107">    }</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2528108">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2528109">    override protected function initQueues() {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2528110">      _queueSender = createQueueSender(SEND_QUEUE_NAME);</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2528111">    }</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2528112">  }</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2584107">}</a></PRE>
      <div class="H2_-_Heading_2"><a name="2584117">Important Notes for Java and Startable Plugins</a></div>
      <div class="H3_-_Heading_3"><a name="2584131">If You Define Your Startable Plugin In Java</a></div>
      <div class="B_-_Body"><a name="2584305">In Gosu, your startable plugin must call the </a><span class="cv_-_computer_voice">execute</span> method on the callback handler object, as discussed in previous topics:</div>
      <PRE class="CM_-_Code_Middle_Line"><a name="2584306">override function start( cbh: StartablePluginCallbackHandler, isStarting: boolean ) : void {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2584613">    _callback = cbh</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2584614">&nbsp;</a>&nbsp;&nbsp;&nbsp;_callback.execute( \ -&gt; {</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2584615">&nbsp;</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//...</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2584310">&nbsp;</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="2584311">&nbsp;</a>}</PRE>
      <div class="B_-_Body"><a name="2584226">However, the Java language does not directly support blocks. If you implement your plugin in Java, you cannot </a>use a Gosu block. However, instead you can use an anonymous class.</div>
      <div class="B_-_Body"><a name="2584331">From Java, the method signatures for the </a><span class="cv_-_computer_voice">execute</span> methods (there are multiple variants) take a <span class="cv_-_computer_voice">GWRunnable</span> for the block argument. <span class="cv_-_computer_voice">GWRunnable</span> is a simple interface that contains a single method, called <span class="cv_-_computer_voice">run</span>. Instead of using a block, you can define an in-line anonymous Java class that implements the <span class="cv_-_computer_voice">run</span> method. This is analogous to the standard Java design pattern for creating an anonymous class to use the standard class <span class="cv_-_computer_voice">java.lang.Runnable</span>.</div>
      <div class="B_-_Body"><a name="2584469">For example:</a></div>
      <PRE class="CM_-_Code_Middle_Line"><a name="2584488">GWRunnable myBlock=new GWRunnable() {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2584489">&nbsp;</a>&nbsp;public void run() {</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2584501">&nbsp;</a>&nbsp;&nbsp;&nbsp;System.out.println("I am startable plugin code running in an anonymous inner class");</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2584547">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2584558">&nbsp;</a>&nbsp;&nbsp;// add more code here...</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2584491">&nbsp;</a>&nbsp;}</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2584414">};</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2584415">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2584601">_callbackHandler.execute(myBlock);</a></PRE>
      <div class="B_-_Body"><a name="2584604">For information about Gosu blocks and inner classes, see </a><a href="javascript:WWHClickedPopup('gosu', 'classes.11.6.html#2464956', '');" title="Inner Classes">“Gosu Block Shortcut for Anonymous Inner Classes Implementing an Interface” in the </a><span class="bt_-_book_title"><a href="javascript:WWHClickedPopup('gosu', 'classes.11.6.html#2464956', '');" title="Inner Classes">Gosu Reference Guide</a></span>.</div>
      <div class="H3_-_Heading_3"><a name="2584108">Where to Put Java Files for Your Startable Plugin</a></div>
      <div class="B_-_Body"><a name="2584109">If you have Java files for your startable plugin, place your Java class and libraries files in the same places as with </a>other plugin types.</div>
      <div class="B_-_Body"><a name="2559623">The instructions are slightly different depending on whether you define the plugin interface implementation itself </a>in Java or in Gosu:</div>
      <div class="BI2_-_Bullet_Item_002c_Level_2_outer" style="margin-left: 67pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner"><a name="2559567">If your main startable plugin class is a Java class, see </a><a href="javascript:WWHClickedPopup('integration', 'plugins.09.06.html#2445041', '');" title="Deploying Java Plugins">“Deploying Java Plugins”</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI2_-_Bullet_Item_002c_Level_2_outer" style="margin-left: 67pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner"><a name="2559582">If your main startable plugin class is a Gosu class, see </a><a href="javascript:WWHClickedPopup('integration', 'plugins.09.05.html#2559217', '');" title="Deploying Gosu Plugins">“If Your Gosu Plugin Needs Other Java Classes and Library Files”</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="H2_-_Heading_2"><a name="2584737">Persistence and Startable Plugins</a></div>
      <div class="B_-_Body"><a name="2584750">Your startable plugin can manipulate Guidewire entities. If your startable plugin needs to maintain state for itself, </a>do one of the following:</div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2584782">create your own custom entities to track your internal state information</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2584799">use the system parameter table for persistence</a></div>
            </td>
          </tr>
        </table>
      </div>
      <script type="text/javascript" language="JavaScript1.2">
        <!--
          // Clear related topics
          //
          WWHClearRelatedTopics();

          document.writeln(WWHRelatedTopicsInlineHTML());
        // -->
      </script>
    </blockquote>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag() + WWHALinksDivTag());
      // -->
    </script>
  </body>
</html>