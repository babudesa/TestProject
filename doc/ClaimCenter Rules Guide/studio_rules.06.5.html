<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <!-- MOTW-DISABLED saved from url=(0014)about:internet -->
    <title>Changing the Root Entity of a Rule</title>
    <link rel="StyleSheet" href="css/studio_rules.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        var  WebWorksRootPath = "";
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        // Set reference to top level help frame
        //
        var  WWHFrame = WWHGetWWHFrame("", true);
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
    <!-- THE FOLLOWING IS A GUIDEWIRE STYLE DEFINITION FOR THE LINK TO THIS FEATURE -->
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <!-- THE FOLLOWING IS A GUIDEWIRE GSCRIPT FUNCTION FOR THE LINK TO THIS FEATURE -->
    <script type="text/javascript">
function guidewire_selectall()
{
var text_val=eval("document.linktothisurlform.urlfield");
text_val.focus();
text_val.select();
}
</script>
  </head>
  <body onLoad="WWHUpdate();" onUnload="WWHUnload();" onKeyDown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onKeyPress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onKeyUp="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">
    <!-- THE FOLLOWING IS A GUIDEWIRE DIV FOR THE 'LINK TO THIS' FEATURE -->
    <div id="linkToThisPage" class="popup" style="display: none;">
      <div class="popupTitle">Link Directly to This Page 
           <a href="#" onclick="var thePopup = getElementById('linkToThisPage');thePopup.style.display='none';return false;"><img class="popupClosebox" src="wwhelp/wwhimpl/common/images/close.gif" /></a></div>
      <div style="padding:6px;">
        <div class="popupText" id="linkToThisPageBookmark">An error has occurred if you see this messsage.</div>
        <form name="linktothisurlform" method="post" action="" style="width:275px;margin:0px">
          <input type="text" class="popupURLText" id="linkToThisPageURL" name="urlfield" rows="1" cols="55" onClick="guidewire_selectall();" onFocus="guidewire_selectall();"></input>
        </form>
      </div>
    </div>
    <br />
    <div class="WebWorks_Breadcrumbs" style="text-align: left;">
      <span>ClaimCenter Rules Guide</span> : 
    <span class="WebWorks_Breadcrumbs" style="text-align: left;"><a class="WebWorks_Breadcrumb_Link" href="p-rules.html#1163063">Gosu Business Rules</a> : <a class="WebWorks_Breadcrumb_Link" href="studio_rules.06.1.html#1163063">Using the Rules Editor</a> : Changing the Root Entity of a Rule</span></div>
    <hr align="left" />
    <blockquote>
      <div class="H1_-_Heading_1"><a name="1163063">Changing the Root Entity of a Rule</a></div>
      <div class="BKN_-_Body_002c_Keep_Next"><a name="3369425">ClaimCenter bases each Gosu rule on a specific business entity. In general, the rule set name reflects this entity. </a>For example, in the Preupdate rule set category, you have Activity Preupdate rules and Contact Preupdate rules. This indicates that the root entity for each rule set is—respectively—the <span class="cv_-_computer_voice">Activity</span> object and the <span class="cv_-_computer_voice">Contact</span> object. You can also determine the root entity for a specific rule by using the Studio code completion functionality:</div>
      <div class="LS_-_List_Start_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="LS_-_List_Start_inner" style="width: 15pt; white-space: nowrap;">
                <span class="ri_-_run_in_header">	1.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LS_-_List_Start_inner"><a name="3369813">Create a sample line of code similar to the following:</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="CS_-_Code_Single_Line"><a name="3369845">var test = </a></div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="ri_-_run_in_header">	2.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="3369852">Right-click after the = sign and select </a><span class="ui_-_UI_element">Complete Code</span> from the menu. The Studio code completion functionality provides the root entity. For example:</div>
            </td>
          </tr>
        </table>
      </div>
      <PRE class="CF_-_Code_First_Line"><a name="3369897">activity : Activity</a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="3369904">contact </a>&nbsp;: Contact</PRE>
      <div class="N_-_Note">
        <span class="n_-_note">Note: </span><a name="3375443">You can also use CTRL-Space to access the Studio code completion functionality.</a></div>
      <div class="B_-_Body"><a name="3375431">ClaimCenter provides the ability to change the root entity of a rule through the use of the right-click </a><span class="ui_-_UI_element">Change Root </span><span class="ui_-_UI_element">Entity</span> command on a rule set.</div>
      <div class="H2_-_Heading_2"><a name="3374698">Why Change a Root Entity?</a></div>
      <div class="BKN_-_Body_002c_Keep_Next"><a name="3374727">The intent of this command is to enable you to edit a rule that you otherwise cannot open in Studio as the decla</a>rations failed to parse. <span class="s_-_strong">Guidewire does not recommend the use of this command in other circumstances</span>. </div>
      <div class="B_-_Body"><a name="3374825">For example, suppose that you have the following sequence of events:</a></div>
      <div class="LS_-_List_Start_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="LS_-_List_Start_inner" style="width: 15pt; white-space: nowrap;">
                <span class="ri_-_run_in_header">	1.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LS_-_List_Start_inner"><a name="3374755">You create a new entity in ClaimCenter, for example, </a><span class="cv_-_computer_voice">TestEntity</span>. Studio creates a <span class="cv_-_computer_voice">TestEntity.eti</span> file and places it in the following location:</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="CS_-_Code_Single_Line"><a name="3374877">modules/configuration/config/extensions</a></div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="ri_-_run_in_header">	2.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="3374774">You create a new rule set category called </a><span class="ui_-_UI_element">TestEntityRuleSetCategory</span> in <span class="ui_-_UI_element">Rule Sets</span>, setting <span class="cv_-_computer_voice">TestEntity</span> as the root entity. Studio creates a new folder named <span class="cv_-_computer_voice">TestEntityRuleSetCategory</span> and places it in the following location:</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="CS_-_Code_Single_Line"><a name="3374909">modules/configuration/config/rules/rules</a></div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="ri_-_run_in_header">	3.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="3374985">You create a new rule set under </a><span class="ui_-_UI_element">TestEntityRuleSetCategory</span> named <span class="ui_-_UI_element">TestEntityRuleSet</span>. Folder <span class="ui_-_UI_element">TestEntityRuleSetCategory</span> now contains the rule set definition file named <span class="cv_-_computer_voice">TestEntityRuleSet.grs</span>. This file contains the following (simplified) Gosu code:</div>
            </td>
          </tr>
        </table>
      </div>
      <PRE class="CF_-_Code_First_Line"><a name="3375017">@gw.rules.RuleName("TestEntityRuleSet")</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3375018">class TestEntityRuleSet extends gw.rules.RuleSetBase {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3375019">&nbsp;</a>&nbsp;static function invoke(bean : entity.TestEntity) : gw.rules.ExecutionSession {</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3375020">&nbsp;</a>&nbsp;&nbsp;&nbsp;return invoke( new gw.rules.ExecutionSession(), bean )</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3374799">&nbsp;</a>&nbsp;}</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3375061">&nbsp;</a>&nbsp;...</PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="3375068">}</a></PRE>
      <div class="LP_-_List_Para"><a name="3375050">Notice that the rule set definition explicitly invokes the root entity object: </a><span class="cv_-_computer_voice">TestEntity</span>.</div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="ri_-_run_in_header">	4.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="3374849">You create one or more rules in this rule set that use </a><span class="cv_-_computer_voice">TestEntity</span> object, for example, <span class="ui_-_UI_element">TestEntityRule</span>. Studio creates a <span class="cv_-_computer_voice">TestEntityRule.gr</span> file that contains the following (simplified) Gosu code:</div>
            </td>
          </tr>
        </table>
      </div>
      <PRE class="CF_-_Code_First_Line"><a name="3375142">internal class TestEntityRule {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3375143">&nbsp;</a>&nbsp;static function doCondition(testEntity : entity.TestEntity) : boolean {</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3375144">&nbsp;</a>&nbsp;&nbsp;&nbsp;return /*start00rule*/true/*end00rule*/</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3375127">&nbsp;</a>&nbsp;}</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3375163">&nbsp;</a>&nbsp;...</PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="3375170">}</a></PRE>
      <div class="LP_-_List_Para"><a name="3375194">Notice that this definition file also references the </a><span class="cv_-_computer_voice">TestEntity</span> object.</div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="ri_-_run_in_header">	5.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="3375093">Because of upgrade or other reasons, you rename your </a><span class="cv_-_computer_voice">TestEntity</span> object to <span class="cv_-_computer_voice">TestEntityNew</span> by changing the file name to <span class="cv_-_computer_voice">TestEntityNew.eti</span> and updating the entity name in the XML entity definition:</div>
            </td>
          </tr>
        </table>
      </div>
      <PRE class="CF_-_Code_First_Line"><a name="3375260">&lt;?xml version="1.0"?&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3375261">&lt;entity xmlns="http://guidewire.com/datamodel" </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3375309">&nbsp;</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;entity="TestEntityNew" ... &gt;</PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="3375271">&lt;/entity&gt;</a></PRE>
      <div class="LP_-_List_Para"><a name="3375468">This action effectively removes the </a><span class="cv_-_computer_voice">TestEntity</span> object from the data model. <span class="s_-_strong">This action does not remove </span><span class="s_-_strong">references to the entity that currently exist in the rules files.</span></div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="ri_-_run_in_header">	6.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="3375228">You update the database by stopping and restarting the application server.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="ri_-_run_in_header">	7.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="3375235">You stop and restart Studio. </a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="3375368">As Studio reopens, it presents you with an error message dialog. The message states that Studio could not parse </a>the listed rule set files. It is at this point that you can use the <span class="ui_-_UI_element">Change Root Entity</span> command to shift the root entity in the rule files to the new root entity. After you do so, Studio recognizes the new root entity for these rule files.</div>
      <div class="HS_-_Head_Sub"><a name="3369432">To change the root entity of a rule</a></div>
      <div class="LS_-_List_Start_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="LS_-_List_Start_inner" style="width: 15pt; white-space: nowrap;">
                <span class="ri_-_run_in_header">	1.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LS_-_List_Start_inner"><a name="3369934">Select a rule set.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="ri_-_run_in_header">	2.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="3369998">Right-click and select </a><span class="ui_-_UI_element">Change Root Entity</span> for the drop-down menu. Studio prompts you for an entity name.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="ri_-_run_in_header">	3.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="3370190">Enter the name of the new root entity.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BKN_-_Body_002c_Keep_Next"><a name="3370181">After you supply a name:</a></div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="3370042">Studio performs a check to ensure that the name you supplied is a valid entity name.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="3370055">Studio replace occurrences of the old entity in the function declarations of all the files in the rule set with the </a>new entity. This only works, however, if the old root type was in fact an entity.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="3370088">Studio changes the name of the entity instance passed into the condition and action of each rule.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt; vertical-align: baseline">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;color: #000000; font-style: italic; font-variant: normal; font-weight: normal; text-transform: none">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner" style="color: #000000; font-style: italic; font-variant: normal; font-weight: normal; text-transform: none"><span class="e_-_emphasis"><a name="3375408">Studio does not propagate the root entity change to the body of any affected rule. You must correct any code </a></span><span class="e_-_emphasis">that references the old entity manually.</span></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="NI_-_Note_Important">
        <span class="n_-_note">IMPORTANT   </span><a name="3370031">The intent of this command is to enable you to edit a rule that you otherwise cannot </a>open in Studio as the declarations failed to parse. Guidewire does <span class="s_-_strong">not</span> recommend the use of this command in other circumstances.</div>
      <script type="text/javascript" language="JavaScript1.2">
        <!--
          // Clear related topics
          //
          WWHClearRelatedTopics();

          document.writeln(WWHRelatedTopicsInlineHTML());
        // -->
      </script>
    </blockquote>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag() + WWHALinksDivTag());
      // -->
    </script>
  </body>
</html>