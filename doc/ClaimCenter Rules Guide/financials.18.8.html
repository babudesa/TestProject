<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <!-- MOTW-DISABLED saved from url=(0014)about:internet -->
    <title>Using Custom Calculation Building Blocks</title>
    <link rel="StyleSheet" href="css/financials.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        var  WebWorksRootPath = "";
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        // Set reference to top level help frame
        //
        var  WWHFrame = WWHGetWWHFrame("", true);
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
    <!-- THE FOLLOWING IS A GUIDEWIRE STYLE DEFINITION FOR THE LINK TO THIS FEATURE -->
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <!-- THE FOLLOWING IS A GUIDEWIRE GSCRIPT FUNCTION FOR THE LINK TO THIS FEATURE -->
    <script type="text/javascript">
function guidewire_selectall()
{
var text_val=eval("document.linktothisurlform.urlfield");
text_val.focus();
text_val.select();
}
</script>
  </head>
  <body style="" onLoad="WWHUpdate();" onUnload="WWHUnload();" onKeyDown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onKeyPress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onKeyUp="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">
    <!-- THE FOLLOWING IS A GUIDEWIRE DIV FOR THE 'LINK TO THIS' FEATURE -->
    <div id="linkToThisPage" class="popup" style="display: none;">
      <div class="popupTitle">Link Directly to This Page 
           <a href="#" onclick="var thePopup = getElementById('linkToThisPage');thePopup.style.display='none';return false;"><img class="popupClosebox" src="wwhelp/wwhimpl/common/images/close.gif" /></a></div>
      <div style="padding:6px;">
        <div class="popupText" id="linkToThisPageBookmark">An error has occurred if you see this messsage.</div>
        <form name="linktothisurlform" method="post" action="" style="width:275px;margin:0px">
          <input type="text" class="popupURLText" id="linkToThisPageURL" name="urlfield" rows="1" cols="55" onClick="guidewire_selectall();" onFocus="guidewire_selectall();"></input>
        </form>
      </div>
    </div>
    <br />
    <div class="WebWorks_Breadcrumbs" style="text-align: left;">
      <span>ClaimCenter Rules Guide</span> : 
    <span class="WebWorks_Breadcrumbs" style="text-align: left;"><a class="WebWorks_Breadcrumb_Link" href="p-rules_advanced.html#4233216">Advanced Topics</a> : <a class="WebWorks_Breadcrumb_Link" href="financials.18.1.html#4233216">Financial Calculations</a> : Using Custom Calculation Building Blocks</span></div>
    <hr align="left" />
    <div>
      <div class="H1_-_Heading_1"><a name="4233216">Using Custom Calculation Building Blocks</a></div>
      <div class="B_-_Body"><a name="4199094">To support custom financial calculations, ClaimCenter provides a set of financial building blocks from which </a>you can construct these calculations. Each is an instance of <span class="cv_-_computer_voice">FinancialsExpression</span> and you access each using a <span class="e_-_emphasis">getter</span> method on <span class="cv_-_computer_voice">gw.api.financials.FinancialCalculationsUtil</span>. Most of the building blocks are similar to the predefined calculations, except for the fact that they can be combined with each other. The following list describes the Guidewire-supplied custom calculations building blocks. Note that all are prefixed with <span class="cv_-_computer_voice">gw.api.financials.FinancialCalculationsUtil</span>.</div>
      <div class="T_-_Table"><a name="4199217">&nbsp;</a></div>
      <table class="Shading" style="text-align: left;" cellspacing="10" summary="">
        <caption></caption>
        <tr>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 1px; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: bottom;">
            <div class="TH_-_Table_Heading"><a name="4199098">gw.api.financials.FinancialCalculationUtil.get*</a></div>
          </td>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 1px; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: bottom;">
            <div class="TH_-_Table_Heading"><a name="4199100">Description</a></div>
          </td>
        </tr>
        <tr>
          <td style="border-top-color: #000000; border-top-style: solid; border-top-width: 1px; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top;">
            <div class="TT_-_Table_Text"><a name="4601271">getAvailableReservesExpression</a></div>
          </td>
          <td style="border-top-color: #000000; border-top-style: solid; border-top-width: 1px; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top;">
            <div class="TT_-_Table_Text"><a name="4601276">Same as </a><a href="javascript:WWHClickedPopup('rules', 'financials.18.3.html#4601082', '');" title="Pre-Defined Financial Calculations">Available Reserves</a> for the pre-defined calculations.</div>
          </td>
        </tr>
        <tr>
          <td style="background-color: #F7F7F7; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top;">
            <div class="TT_-_Table_Text"><a name="4601278">getErodingPayments</a><br />ForeignExchangeAdjustmentsExpression </div>
          </td>
          <td style="background-color: #F7F7F7; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top;">
            <div class="TT_-_Table_Text"><a name="4601282">Same as </a><a href="javascript:WWHClickedPopup('rules', 'financials.18.3.html#4601095', '');" title="Pre-Defined Financial Calculations">ErodingPaymentsForeignExchangeAdjustments</a> for the pre-defined calculations.</div>
          </td>
        </tr>
        <tr>
          <td style="padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top;">
            <div class="TT_-_Table_Text"><a name="4601285">getForeignExchangeAdjustmentsExpression </a></div>
          </td>
          <td style="padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top;">
            <div class="TT_-_Table_Text"><a name="4601290">Same as </a><a href="javascript:WWHClickedPopup('rules', 'financials.18.3.html#4601100', '');" title="Pre-Defined Financial Calculations">ForeignExchangeAdjustments</a> for the pre-defined calculations.</div>
          </td>
        </tr>
        <tr>
          <td style="background-color: #F7F7F7; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top;">
            <div class="TT_-_Table_Text"><a name="4601293">getFuturePaymentsExpression</a></div>
          </td>
          <td style="background-color: #F7F7F7; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top;">
            <div class="TT_-_Table_Text"><a name="4601298">Same as </a><a href="javascript:WWHClickedPopup('rules', 'financials.18.3.html#4601106', '');" title="Pre-Defined Financial Calculations">Future Payments</a> for the pre-defined calculations.</div>
          </td>
        </tr>
        <tr>
          <td style="padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top;">
            <div class="TT_-_Table_Text"><a name="4601301">getGrossTotalIncurredExpression</a></div>
          </td>
          <td style="padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top;">
            <div class="TT_-_Table_Text"><a name="4601306">Same as </a><a href="javascript:WWHClickedPopup('rules', 'financials.18.3.html#4601159', '');" title="Pre-Defined Financial Calculations">Gross Total Incurred</a> for the pre-defined calculations.</div>
          </td>
        </tr>
        <tr>
          <td style="background-color: #F7F7F7; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top;">
            <div class="TT_-_Table_Text"><a name="4601308">getNonErodingPayments</a><br />ForeignExchangeAdjustmentsExpression </div>
          </td>
          <td style="background-color: #F7F7F7; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top;">
            <div class="TT_-_Table_Text"><a name="4601312">Same as </a><a href="javascript:WWHClickedPopup('rules', 'financials.18.3.html#4601179', '');" title="Pre-Defined Financial Calculations">NonErodingPayments ForeignExchangeAdjustments</a> for the pre-defined calculations.</div>
          </td>
        </tr>
        <tr>
          <td style="padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top;">
            <div class="TT_-_Table_Text"><a name="4601316">getOpenRecoveryReservesExpression</a></div>
          </td>
          <td style="padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top;">
            <div class="TT_-_Table_Text"><a name="4601321">Same as </a><a href="javascript:WWHClickedPopup('rules', 'financials.18.3.html#4601185', '');" title="Pre-Defined Financial Calculations">Open Recovery Reserves</a> for the pre-defined calculations.</div>
          </td>
        </tr>
        <tr>
          <td style="background-color: #F7F7F7; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top;">
            <div class="TT_-_Table_Text"><a name="4601324">getOpenReservesExpression</a></div>
          </td>
          <td style="background-color: #F7F7F7; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top;">
            <div class="TT_-_Table_Text"><a name="4601329">Same as </a><a href="javascript:WWHClickedPopup('rules', 'financials.18.3.html#4601203', '');" title="Pre-Defined Financial Calculations">Open Reserves</a> for the pre-defined calculations.</div>
          </td>
        </tr>
        <tr>
          <td style="padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top;">
            <div class="TT_-_Table_Text"><a name="4601337">getPendingApprovalErodingPaymentsExpression</a></div>
          </td>
          <td style="padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top;">
            <div class="TT_-_Table_Text"><a name="4601339">Sum of all pending approval payments that are eroding. </a></div>
          </td>
        </tr>
        <tr>
          <td style="background-color: #F7F7F7; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top;">
            <div class="TT_-_Table_Text"><a name="4601332">getPendingApprovalNonErodingPaymentsExpression</a></div>
          </td>
          <td style="background-color: #F7F7F7; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top;">
            <div class="TT_-_Table_Text"><a name="4601334">Sum of all pending approval payments that are non-eroding. </a></div>
          </td>
        </tr>
        <tr>
          <td style="padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top;">
            <div class="TT_-_Table_Text"><a name="4601342">getPendingApprovalPaymentsExpression</a></div>
          </td>
          <td style="padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top;">
            <div class="TT_-_Table_Text"><a name="4601344">Sum of all pending approval payments.</a></div>
          </td>
        </tr>
        <tr>
          <td style="background-color: #F7F7F7; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top;">
            <div class="TT_-_Table_Text"><a name="4601347">getPendingApprovalReservesExpression</a></div>
          </td>
          <td style="background-color: #F7F7F7; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top;">
            <div class="TT_-_Table_Text"><a name="4601349">Sum of all pending approval reserves. </a></div>
          </td>
        </tr>
        <tr>
          <td style="padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top;">
            <div class="TT_-_Table_Text"><a name="4601353">getRemainingReservesExpression</a></div>
          </td>
          <td style="padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top;">
            <div class="TT_-_Table_Text"><a name="4601358">Same as </a><a href="javascript:WWHClickedPopup('rules', 'financials.18.3.html#4601191', '');" title="Pre-Defined Financial Calculations">Remaining Reserves</a> for the pre-defined calculations.</div>
          </td>
        </tr>
        <tr>
          <td style="background-color: #F7F7F7; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top;">
            <div class="TT_-_Table_Text"><a name="4601361">getTotalIncurredNetRecoveriesExpression</a></div>
          </td>
          <td style="background-color: #F7F7F7; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top;">
            <div class="TT_-_Table_Text"><a name="4601366">Same as </a><a href="javascript:WWHClickedPopup('rules', 'financials.18.3.html#4601136', '');" title="Pre-Defined Financial Calculations">Net Total Incurred</a> for the pre-defined calculations.</div>
          </td>
        </tr>
        <tr>
          <td style="padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top;">
            <div class="TT_-_Table_Text"><a name="4601369">getTotalIncurredNetRecoveryReservesExpression</a></div>
          </td>
          <td style="padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top;">
            <div class="TT_-_Table_Text"><a name="4601373">Same as </a><a href="javascript:WWHClickedPopup('rules', 'financials.18.3.html#4601113', '');" title="Pre-Defined Financial Calculations">Net Total Incurred Minus Open Recovery Reserves</a> for the pre-defined calculations.</div>
          </td>
        </tr>
        <tr>
          <td style="background-color: #F7F7F7; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top;">
            <div class="TT_-_Table_Text"><a name="4601377">getTotalPaymentsExpression</a></div>
          </td>
          <td style="background-color: #F7F7F7; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top;">
            <div class="TT_-_Table_Text"><a name="4601382">Same as </a><a href="javascript:WWHClickedPopup('rules', 'financials.18.3.html#4601211', '');" title="Pre-Defined Financial Calculations">Total Payments</a> for the pre-defined calculations.</div>
          </td>
        </tr>
        <tr>
          <td style="padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top;">
            <div class="TT_-_Table_Text"><a name="4601393">getTotalRecoveriesExpression</a></div>
          </td>
          <td style="padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top;">
            <div class="TT_-_Table_Text"><a name="4601398">Same as </a><a href="javascript:WWHClickedPopup('rules', 'financials.18.3.html#4601227', '');" title="Pre-Defined Financial Calculations">Total Recoveries</a> for the pre-defined calculations.</div>
          </td>
        </tr>
        <tr>
          <td style="background-color: #F7F7F7; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top;">
            <div class="TT_-_Table_Text"><a name="4601385">getTotalRecoveryReservesExpression</a></div>
          </td>
          <td style="background-color: #F7F7F7; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top;">
            <div class="TT_-_Table_Text"><a name="4601390">Same as </a><a href="javascript:WWHClickedPopup('rules', 'financials.18.3.html#4601221', '');" title="Pre-Defined Financial Calculations">Total Recovery Reserves</a> for the pre-defined calculations.</div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 1px; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top;">
            <div class="TT_-_Table_Text"><a name="4601401">getTotalReservesExpression</a></div>
          </td>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 1px; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top;">
            <div class="TT_-_Table_Text"><a name="4601406">Same as </a><a href="javascript:WWHClickedPopup('rules', 'financials.18.3.html#4601233', '');" title="Pre-Defined Financial Calculations">Total Reserves</a> for the pre-defined calculations.</div>
          </td>
        </tr>
      </table>
      <div class="B_-_Body"><a name="4147720">You manipulate these building blocks using two basic operations: </a><span class="e_-_emphasis" style="font-family: &quot;Times New Roman&quot;; font-size: 10.0pt;">plus</span> and <span class="e_-_emphasis" style="font-family: &quot;Times New Roman&quot;; font-size: 10.0pt;">minus</span>. Use these operations to combine the <span class="cv_-_computer_voice">FinancialsExpression</span> objects to produce custom expressions from which you can obtain the desired value. For example:</div>
      <PRE class="CM_-_Code_Middle_Line"><a name="4152987">FinancialsExpression.plus(FinancialsExpression)</a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="4152994">FinancialsExpression.minus(FinancialsExpression)</a></PRE>
      <div class="B_-_Body"><a name="4190607">Note that you combine </a><span class="cv_-_computer_voice">FinancialsExpression</span> objects, not <span class="cv_-_computer_voice">FinancialCalculation</span> objects. Therefore, the following is valid:</div>
      <PRE class="CF_-_Code_First_Line"><a name="4190639">//Valid expression using FinancialExpression objects</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="4190667">gw.api.financials.FinancialsCalculationUtil.getTotalIncurredNetRecoveriesExpression().</a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="4508573">&nbsp;</a>&nbsp;minus( gw.api.financials.FinancialsCalculationUtil.getOpenRecoveryReservesExpression() )</PRE>
      <div class="B_-_Body"><a name="4190643">but not the following:</a></div>
      <PRE class="CF_-_Code_First_Line"><a name="4190645">//Invalid expression using FinancialsCalculation objects</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="4190668">gw.api.financials.FinancialsCalculationUtil.getTotalIncurredNetRecoveries().</a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="4508580">&nbsp;</a>&nbsp;minus( gw.api.financials.FinancialsCalculationUtil.getOpenRecoveryReserves() )</PRE>
      <div class="H2_-_Heading_2"><a name="4152971">Forming Composite Custom Expressions</a></div>
      <div class="B_-_Body"><a name="4147721">You can combine the supplied </a><span class="cv_-_computer_voice">FinancialsExpression</span> instances to form composite custom expressions. For example, if ClaimCenter did not supply a <span class="cv_-_computer_voice">TotalIncurredNetRecoveryReserves</span> expression, you could create such an expression in either of the following ways: </div>
      <PRE class="CF_-_Code_First_Line"><a name="4139486">//Example 1</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="4152915">gw.api.financials.FinancialsCalculationUtil.getTotalIncurredNetRecoveriesExpression().</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="4508590">&nbsp;</a>&nbsp;minus(gw.api.financials.FinancialsCalculationUtil.getOpenRecoveryReservesExpression() )</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="4190652">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="4190653">//Example 2</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="4190655">gw.api.financials.FinancialsCalculationUtil.getGrossTotalIncurredExpression().</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="4508591">&nbsp;</a>&nbsp;minus(gw.api.financials.FinancialsCalculationUtil.getTotalRecoveryReservesExpression() )</PRE>
      <div class="B_-_Body"><a name="4190656">In either case, the method returns a new </a><span class="cv_-_computer_voice">FinancialsExpression</span> instance that is equivalent to the <span class="cv_-_computer_voice">TotalIncurredNetRecoveryReserves</span> expression.</div>
      <div class="B_-_Body"><a name="4139490">However, to be useful, you need to obtain a calculated value for the financial expression. To do this, you must </a>generate an instance of a <span class="cv_-_computer_voice">FinancialCalculation</span> that is backed by this custom expression. This is done with a specialized method on <span class="cv_-_computer_voice">gw.api.financials.FinancialsCalculation.Util</span>: </div>
      <PRE class="CF_-_Code_First_Line"><a name="4139492">getFinancialsCalculation(FinancialsExpression)</a></PRE>
      <div class="B_-_Body"><a name="4139500">Thus, to generate a </a><span class="cv_-_computer_voice">FinancialCalculation</span> for the example <span class="cv_-_computer_voice">FinancialExpression</span>, you would use: </div>
      <div class="CS_-_Code_Single_Line"><a name="4139502">var TotalIncurredNetRecoveryReserves = gw.api.financials.FinancialsCalculationUtil.</a></div>
      <PRE class="CM_-_Code_Middle_Line"><a name="4508598">&nbsp;</a>&nbsp;getFinancialsCalculation( gw.api.financials.FinancialsCalculationUtil.</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="4508599">&nbsp;</a>&nbsp;getTotalIncurredNetRecoveryReservesExpression().</PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="4508600">&nbsp;</a>&nbsp;minus( gw.api.financials.FinancialsCalculationUtil.getOpenRecoveryReservesExpression() ) )</PRE>
      <div class="H2_-_Heading_2"><a name="4233420">Creating Custom Financial Gosu Classes</a></div>
      <div class="B_-_Body"><a name="4153285">Clearly, having to repeat this long string each time that you want to make use of a custom calculation is very </a>tedious. It is also error prone and inefficient from a performance point of view. Instead, Guidewire recommends that you create a custom Gosu utility class that contains all your custom financial calculations, which insures that they are all defined in one location. You can then reference these calculations each place that you reference Gosu code (rules, Gosu classes and enhancements, and PCF files). </div>
      <div class="B_-_Body"><a name="4153286">Guidewire provides an example of how to do this in Studio, under the </a><span class="cv_-_computer_voice">Classes</span> folder: <span class="cv_-_computer_voice">util.financials.CustomCalcs</span>: </div>
      <PRE class="CF_-_Code_First_Line"><a name="4139505">package util.financials</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="4153258">&nbsp;</a>&nbsp;</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="4139516">class CustomCalcs {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="4190788">&nbsp;</a>&nbsp;//Clas constructor</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="4190802">&nbsp;</a>&nbsp;function CustomCalcs() {&nbsp;&nbsp;&nbsp;}</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="4190805">&nbsp;</a>&nbsp;</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="4190806">&nbsp;</a>&nbsp;private static var lib application = gw.api.financials.FinancialsCalculationUtil</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="4190807">&nbsp;</a>&nbsp;private static var calcMyTotalIncurredNet application = </PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="4508610">&nbsp;</a>&nbsp;&nbsp;&nbsp;lib.getFinancialsCalculation( lib.getGrossTotalIncurredExpression().</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="4508611">&nbsp;</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;minus( lib.getTotalRecoveryReservesExpression() ) )</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="4190808">&nbsp;</a>&nbsp;</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="4190809">&nbsp;</a>&nbsp;public static property get MyTotalIncurredNet() : FinancialsCalculation {</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="4190811">&nbsp;</a>&nbsp;&nbsp;&nbsp;return calcMyTotalIncurredNet</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="4153279">&nbsp;</a>&nbsp;}</PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="4190831">}</a></PRE>
      <div class="B_-_Body"><a name="4139530">This Gosu class defines the sample custom calculation as a static property of the class with “application” scope. </a>This makes it simple to reference the calculation from any place in the application. If you create a custom Gosu class that defines all the desired custom calculations as static properties, then it is a simple matter to use those custom calculations. You can use them, for example, in rules, PCF files, Gosu plugins, or any place else that ClaimCenter supports Gosu. </div>
      <div class="B_-_Body"><a name="4739896">You would reference the previous example class thusly: </a></div>
      <div class="CS_-_Code_Single_Line"><a name="4139535">util.financials.CustomCalcs.MyTotalIncurredNet.getAmount(...)</a></div>
      <div class="B_-_Body"><a name="4139536">The Guidewire-provided sample rules show an example usage of the </a><span class="cv_-_computer_voice">CustomCalcs</span> class in the <a href="javascript:WWHClickedPopup('rules', 'cc_rulesets.09.17.html#16507608', '');" title="Transaction Approval">Transaction Approval</a> rule set. Since <span class="cv_-_computer_voice">MyTotalIncurredNet</span> is merely an instance of a <span class="cv_-_computer_voice">FinancialCalculation</span>t object, the <span class="cv_-_computer_voice">getAmount</span> method works as described previously for the pre-defined calculations. </div>
      <div class="HS_-_Head_Sub"><a name="4198938">Condition</a></div>
      <div class="CS_-_Code_Single_Line"><a name="4198975">TransactionSet.Subtype == "CheckSet" </a></div>
      <div class="HS_-_Head_Sub"><a name="4198976">Actions</a></div>
      <PRE class="CF_-_Code_First_Line"><a name="4198989">var totalIncurredAmt = util.financials.CustomCalcs.MyTotalIncurredNet.getAmount(TransactionSet.Claim)</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="4198990">&nbsp;</a>&nbsp;if (totalIncurredAmt &gt; 20000) {</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="4198991">&nbsp;</a>&nbsp;&nbsp;&nbsp;TransactionSet.requireApproval( "Total Incurred on the claim exceeds $20,000" )</PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="4198939">}</a></PRE>
      <script type="text/javascript" language="JavaScript1.2">
        <!--
          // Clear related topics
          //
          WWHClearRelatedTopics();

          document.writeln(WWHRelatedTopicsInlineHTML());
        // -->
      </script>
    </div>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag() + WWHALinksDivTag());
      // -->
    </script>
  </body>
</html>