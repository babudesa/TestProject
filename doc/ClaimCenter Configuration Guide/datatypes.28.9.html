<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <!-- MOTW-DISABLED saved from url=(0014)about:internet -->
    <title>Defining a New Tax Identification Number Data Type</title>
    <link rel="StyleSheet" href="css/datatypes.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        var  WebWorksRootPath = "";
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        // Set reference to top level help frame
        //
        var  WWHFrame = WWHGetWWHFrame("", true);
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
    <!-- THE FOLLOWING IS A GUIDEWIRE STYLE DEFINITION FOR THE LINK TO THIS FEATURE -->
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <!-- THE FOLLOWING IS A GUIDEWIRE GSCRIPT FUNCTION FOR THE LINK TO THIS FEATURE -->
    <script type="text/javascript">
function guidewire_selectall()
{
var text_val=eval("document.linktothisurlform.urlfield");
text_val.focus();
text_val.select();
}
</script>
  </head>
  <body onLoad="WWHUpdate();" onUnload="WWHUnload();" onKeyDown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onKeyPress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onKeyUp="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">
    <!-- THE FOLLOWING IS A GUIDEWIRE DIV FOR THE 'LINK TO THIS' FEATURE -->
    <div id="linkToThisPage" class="popup" style="display: none;">
      <div class="popupTitle">Link Directly to This Page 
           <a href="#" onclick="var thePopup = getElementById('linkToThisPage');thePopup.style.display='none';return false;"><img class="popupClosebox" src="wwhelp/wwhimpl/common/images/close.gif" /></a></div>
      <div style="padding:6px;">
        <div class="popupText" id="linkToThisPageBookmark">An error has occurred if you see this messsage.</div>
        <form name="linktothisurlform" method="post" action="" style="width:275px;margin:0px">
          <input type="text" class="popupURLText" id="linkToThisPageURL" name="urlfield" rows="1" cols="55" onClick="guidewire_selectall();" onFocus="guidewire_selectall();"></input>
        </form>
      </div>
    </div>
    <br />
    <div class="WebWorks_Breadcrumbs" style="text-align: left;">
      <span>ClaimCenter Configuration Guide</span> : 
    <span class="WebWorks_Breadcrumbs" style="text-align: left;"><a class="WebWorks_Breadcrumb_Link" href="p-datamodel_2.html#2648253">Data Model Configuration</a> : <a class="WebWorks_Breadcrumb_Link" href="datatypes.28.1.html#2648253">Data Types</a> : Defining a New Tax Identification Number Data Type</span></div>
    <hr align="left" />
    <blockquote>
      <div class="H1_-_Heading_1"><a name="2648253">Defining a New Tax Identification Number Data Type</a></div>
      <div class="B_-_Body"><a name="2648254">The following examples illustrates the steps involved in defining a new data type and using it. The example </a>defines a new data type for <span class="e_-_emphasis">Tax Identification Number</span> objects, called <span class="cv_-_computer_voice">TaxID</span>. The data type has one required property, the <span class="cv_-_computer_voice">name</span> of the property on the context object. This property—called <span class="cv_-_computer_voice">countryProperty</span>—identifies which country is in context for validating the data. </div>
      <div class="BKN_-_Body_002c_Keep_Next"><a name="2648287">This example contains the following steps:</a></div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a href="javascript:WWHClickedPopup('config', 'datatypes.28.9.html#2648305', '');" title="Defining a New Tax Identification Number Data Type" name="2648291">Step 1: Register the Data Type</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a href="javascript:WWHClickedPopup('config', 'datatypes.28.9.html#2648344', '');" title="Defining a New Tax Identification Number Data Type" name="2648295">Step 2: Implement the IDataTypeDef Interface</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a href="javascript:WWHClickedPopup('config', 'datatypes.28.9.html#2648407', '');" title="Defining a New Tax Identification Number Data Type" name="2648299">Step 3: Implement the Data Type Aspect Handlers</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="H2_-_Heading_2"><a name="2648305">Step 1: Register the Data Type</a></div>
      <div class="B_-_Body"><a name="2648306">To register a new data type, create a file named </a><span class="cv_-_computer_voice">XXX.dti</span>, with <span class="cv_-_computer_voice">XXX</span> as the name of the new data type. In this case, create a file named <span class="cv_-_computer_voice">TaxID.dti</span>. To do this:</div>
      <div class="LS_-_List_Start_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="LS_-_List_Start_inner" style="width: 15pt; white-space: nowrap;">
                <span class="ri_-_run_in_header">	1.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LS_-_List_Start_inner"><a name="2648307">Select </a><span class="ui_-_UI_element">Other Resources</span>, right-click and select <span class="ui_-_UI_element">New</span> → <span class="ui_-_UI_element">Other file</span>. </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="ri_-_run_in_header">	2.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="2729552">Enter </a><span class="it_-_input_text">TaxID.dti</span> as the file name. This action creates an empty data type file and places it in the <span class="ui_-_UI_element">datatypes</span> folder.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="ri_-_run_in_header">	3.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="2648308">Enter the following text in the file:</a></div>
            </td>
          </tr>
        </table>
      </div>
      <PRE class="CF_-_Code_First_Line"><a name="2648309">&lt;?xml version="1.0"?&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648310">&lt;DataTypeDef xmlns="http://guidewire.com/datatype" type="gw.newdatatypes.TaxIDDataTypeDef"</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648312">&nbsp;</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;valueType="java.lang.String"&gt;</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648313">&nbsp;</a>&nbsp;&lt;ParameterDef name="countryProperty" desc="The name of a property on the owning entity, </PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648702">&nbsp;</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;whose value contains the country with which to validate and format values."</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648316">&nbsp;</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;required="true" type="java.lang.String"/&gt;</PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="2648317">&lt;/DataTypeDef&gt;</a></PRE>
      <div class="LP_-_List_Para"><a name="2648318">The root element of </a><span class="cv_-_computer_voice">TaxID.dti</span> is <span class="cv_-_computer_voice">&lt;DataTypeDef&gt;</span> and the namespace is <span class="cv_-_computer_voice">http://guidewire.com/datatype</span>. </div>
      <div class="LP_-_List_Para"><a name="2648319">This example defines the following:</a></div>
      <div class="T_-_Table"><a name="2648337">&nbsp;</a></div>
      <table class="withHeadingIndent" style="text-align: left" cellspacing="10" summary="">
        <caption></caption>
        <tr>
          <td style="padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="2648322">data type name</a></div>
          </td>
          <td style="padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text" style="color: #000000; font-family: &quot;Lucida Sans Typewriter&quot;; font-style: normal; font-variant: normal; font-weight: normal; margin-top: 3.0pt; text-transform: none; vertical-align: baseline"><span class="cvt_-_computer_voice_table"><a name="2648324">TaxID</a></span></div>
          </td>
        </tr>
        <tr>
          <td style="padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="2648326">value type</a></div>
          </td>
          <td style="padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text" style="color: #000000; font-family: &quot;Lucida Sans Typewriter&quot;; font-style: normal; font-variant: normal; font-weight: normal; margin-top: 3.0pt; text-transform: none; vertical-align: baseline"><span class="cvt_-_computer_voice_table"><a name="2648328">String</a></span></div>
          </td>
        </tr>
        <tr>
          <td style="padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="2648330">parameter</a></div>
          </td>
          <td style="padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text" style="color: #000000; font-family: &quot;Lucida Sans Typewriter&quot;; font-style: normal; font-variant: normal; font-weight: normal; margin-top: 3.0pt; text-transform: none; vertical-align: baseline"><span class="cvt_-_computer_voice_table"><a name="2648332">contactType</a></span></div>
          </td>
        </tr>
        <tr>
          <td style="padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="2648334">implementation type</a></div>
          </td>
          <td style="padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text" style="color: #000000; font-family: &quot;Lucida Sans Typewriter&quot;; font-style: normal; font-variant: normal; font-weight: normal; margin-top: 3.0pt; text-transform: none; vertical-align: baseline"><span class="cvt_-_computer_voice_table"><a name="2648336">gw.newdatatypes.TaxIDDataTypeDef</a></span></div>
          </td>
        </tr>
      </table>
      <div class="HS_-_Head_Sub"><a name="2648338">See Also</a></div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2648341">For details on the attributes and elements relevant to the data type definition, see </a><a href="javascript:WWHClickedPopup('config', 'entities.22.01.html#2824556', '');" title="The ClaimCenter Data Model">“The ClaimCenter Data Model”</a>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="H2_-_Heading_2"><a name="2648344">Step 2: Implement the IDataTypeDef Interface</a></div>
      <div class="BKN_-_Body_002c_Keep_Next"><a name="2648345">The implementation class that you create to handle the </a><span class="cv_-_computer_voice">TaxID</span> data type must do the following:</div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2648346">It must implement the </a><span class="cv_-_computer_voice">gw.datatype.def.IDataTypeDef interface</span>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2648347">It must have a no-argument constructor.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2648348">It must have a property for each of the data type parameters. </a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="2650061">For example, suppose that you have a new data type that has a </a><span class="cv_-_computer_voice">String</span> parameter named <span class="cv_-_computer_voice">someParameter</span>. The implementation class (specified in the <span class="cv_-_computer_voice">type</span> attribute) must define a writable property named <span class="cv_-_computer_voice">someParameter</span>, so that the data type factory can pass the argument values to the implementation. The implementation can then use the parameters in the implementation of the various handlers, which are:</div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt; margin-bottom: 2.0pt; vertical-align: baseline">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;color: #000000; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner" style="color: #000000; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none"><span class="cv_-_computer_voice"><a name="2648350">gw.datatype.handler.IDataTypeConstraintsHandler</a></span></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt; margin-bottom: 2.0pt; vertical-align: baseline">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;color: #000000; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner" style="color: #000000; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none"><span class="cv_-_computer_voice"><a name="2648351">gw.datatype.handler.IDataTypePersistenceHandler</a></span></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt; margin-bottom: 2.0pt; vertical-align: baseline">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;color: #000000; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner" style="color: #000000; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none"><span class="cv_-_computer_voice"><a name="2648352">gw.datatype.handler.IDataTypePresentationHandler</a></span></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><span class="ri_-_run_in_header"><a name="2648353">Class TaxIDDataTypeDef.</a></span> For our example data type, the <span class="cv_-_computer_voice">gw.newdatatypes.TaxIDDataTypeDef</span> class looks similar to the following. To create this file, first create the package, then the class file, in the Studio <span class="ui_-_UI_element">Classes</span> folder.</div>
      <PRE class="CF_-_Code_First_Line"><a name="2648718">package gw.newdatatypes</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648719"> </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648720">uses gw.datatype.def.IDataTypeDef</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648721">uses gw.datatype.handler.IDataTypeConstraintsHandler</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648722">uses gw.datatype.handler.IDataTypePresentationHandler</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648723">uses gw.datatype.handler.IDataTypePersistenceHandler</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648724">uses gw.lang.reflect.IPropertyInfo</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648725">uses gw.datatype.handler.IDataTypeValueHandler</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648726">uses gw.datatype.def.IDataTypeDefValidationErrors</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648727">uses gw.datatype.impl.VarcharPersistenceHandler</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648728">uses gw.datatype.impl.SimpleValueHandler</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648729"> </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648730">class TaxIDDataTypeDef implements IDataTypeDef {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648731"> </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648732">&nbsp;</a>&nbsp;private var _countryProperty : String as CountryProperty</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648733"> </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648734">&nbsp;</a>&nbsp;override property <span class="s_-_strong">get ConstraintsHandler()</span> : IDataTypeConstraintsHandler {</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648735">&nbsp;</a>&nbsp;&nbsp;&nbsp;return new TaxIDConstraintsHandler(CountryProperty)</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648736">&nbsp;</a>&nbsp;}</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648737"> </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648738">&nbsp;</a>&nbsp;override property <span class="s_-_strong">get PersistenceHandler()</span> : IDataTypePersistenceHandler {</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648739">&nbsp;</a>&nbsp;&nbsp;&nbsp;return new VarcharPersistenceHandler(/* encrypted */ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;false, </PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648887">&nbsp;</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* trimWhitespace */ true, </PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648841">&nbsp;</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* size */ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;30)</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648740">&nbsp;</a>&nbsp;}</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648741"> </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648742">&nbsp;</a>&nbsp;override property <span class="s_-_strong">get PresentationHandler()</span> : IDataTypePresentationHandler {</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648743">&nbsp;</a>&nbsp;&nbsp;&nbsp;return new TaxIDPresentationHandler(CountryProperty)</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648744">&nbsp;</a>&nbsp;}</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648745"> </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648746">&nbsp;</a>&nbsp;override property get ValueHandler() : IDataTypeValueHandler {</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648747">&nbsp;</a>&nbsp;&nbsp;&nbsp;return new SimpleValueHandler(String)</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648748">&nbsp;</a>&nbsp;}</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648749"> </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648750">&nbsp;</a>&nbsp;override function validate(prop : IPropertyInfo, errors : IDataTypeDefValidationErrors) {</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648852">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648751">&nbsp;</a>&nbsp;&nbsp;&nbsp;// Check that the CountryProperty names an actual property on the owning type, and that</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648752">&nbsp;</a>&nbsp;&nbsp;&nbsp;// the type of the property is typekey.Country.</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648753">&nbsp;</a>&nbsp;&nbsp;&nbsp;var countryProp = prop.OwnersType.TypeInfo.getProperty(CountryProperty)</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648863">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648754">&nbsp;</a>&nbsp;&nbsp;&nbsp;if (countryProp == null) {</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648916">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648755">&nbsp;</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;errors.addError("Property \"" + CountryProperty + "\" does not exist on type " +</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648870">&nbsp;</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prop.OwnersType)</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648927">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648756">&nbsp;</a>&nbsp;&nbsp;&nbsp;} else if (not typekey.Country.Type.isAssignableFrom(countryProp.Type)) {</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648898">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648757">&nbsp;</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;errors.addError("Property " + countryProp + " does not resolve to a " + typekey.Country)</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648909">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648758">&nbsp;</a>&nbsp;&nbsp;&nbsp;}</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648759">&nbsp;</a>&nbsp;}</PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="2648403">}</a></PRE>
      <div class="B_-_Body"><a name="2648404">Note that the class defines a property named </a><span class="cv_-_computer_voice">CountryProperty</span>, which the system calls to pass the <span class="cv_-_computer_voice">countryProperty</span> parameter. Also notice how the implementation reads the value of <span class="cv_-_computer_voice">CountryProperty</span> as its constructs its constraints and presentation handlers. Guidewire guarantees to fill the implementation parameters before calling the handlers.</div>
      <div class="B_-_Body"><a name="2648405">In the example code, the class refers to constraints and presentation handlers created specifically for this data </a>type. However, it also reuses a Guidewire-provided persistence handler, the <span class="cv_-_computer_voice">VarcharPersistenceHandler</span>. You do not usually need to create your own persistence handler, as Guidewire defines persistence handlers for all the basic database column types. </div>
      <div class="H2_-_Heading_2"><a name="2648407">Step 3: Implement the Data Type Aspect Handlers</a></div>
      <div class="B_-_Body"><a name="2648408">As you define a new data type, it is possible (actually likely) that you need to define one or more handlers for the </a>data type. These handler interfaces are different than the Data Type API interfaces. For example, clients that use the Data Type API use the following:</div>
      <div class="CS_-_Code_Single_Line"><a name="2648409">gw.datatype.IConstrainedDataType</a></div>
      <div class="BKN_-_Body_002c_Keep_Next"><a name="2648410">However, if you define a new data type, you must implement the following:</a></div>
      <div class="CS_-_Code_Single_Line"><a name="2648411">gw.datatype.handler.IDataTypeConstraintsHandler</a></div>
      <div class="B_-_Body"><a name="2648412">This separation of interfaces allows the definition of a caller-friendly interface for data type clients and a imple</a>mentation-friendly interface for data type designers.</div>
      <div class="B_-_Body"><a name="2648413">The example data type defines a handler for both constraints and presentation.</a></div>
      <div class="B_-_Body"><span class="ri_-_run_in_header"><a name="2648414">Class TaxIDConstraintsHandler.</a></span> This class looks similar to the following:</div>
      <PRE class="CF_-_Code_First_Line"><a name="2648939">package gw.newdatatypes</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648940"> </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648941">uses gw.datatype.handler.IStringConstraintsHandler</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648942">uses gw.lang.reflect.IPropertyInfo</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648943">uses java.lang.Iterable</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648944">uses java.lang.Integer</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648945">uses java.lang.CharSequence</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648946">uses gw.datatype.DataTypeException</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648947"> </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648948">class TaxIDConstraintsHandler implements IStringConstraintsHandler {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648949"> </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648950">&nbsp;</a>&nbsp;var _countryProperty : String</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648951"> </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648952">&nbsp;</a>&nbsp;construct(countryProperty : String) {</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648953">&nbsp;</a>&nbsp;&nbsp;&nbsp;_countryProperty = countryProperty</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648954">&nbsp;</a>&nbsp;}</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648955"> </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648956">&nbsp;</a>&nbsp;override function validateValue(ctx : Object, prop : IPropertyInfo, value : Object) {</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648957">&nbsp;</a>&nbsp;&nbsp;&nbsp;var country = getCountry(ctx)</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2649366">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648958">&nbsp;</a>&nbsp;&nbsp;&nbsp;switch (country) {</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648959">&nbsp;</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case "US": validateUSTaxID(ctx, prop, value as java.lang.String)</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648961">&nbsp;</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648962">&nbsp;</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// other countries ... </PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648963">&nbsp;</a>&nbsp;&nbsp;&nbsp;}</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2649379">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648964">&nbsp;</a>&nbsp;}</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648965"> </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648966">&nbsp;</a>&nbsp;override function validateUserInput(ctx : Object, prop : IPropertyInfo, strValue : String) {</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648967">&nbsp;</a>&nbsp;&nbsp;&nbsp;validateValue(ctx, prop, strValue)</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648968">&nbsp;</a>&nbsp;}</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648969"> </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648970">&nbsp;</a>&nbsp;override function getConsistencyCheckerPredicates(columnName : String) : Iterable&lt;CharSequence&gt; {</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648971">&nbsp;</a>&nbsp;&nbsp;&nbsp;return {}</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648972">&nbsp;</a>&nbsp;}</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648973"> </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648974">&nbsp;</a>&nbsp;override function getLoaderValidationPredicates(columnName : String) : Iterable&lt;CharSequence&gt; {</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648975">&nbsp;</a>&nbsp;&nbsp;&nbsp;return {}</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648976">&nbsp;</a>&nbsp;}</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648977"> </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648978">&nbsp;</a>&nbsp;override function getLength(ctx : Object, prop : IPropertyInfo) : Integer {</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648979">&nbsp;</a>&nbsp;&nbsp;&nbsp;var country = getCountry(ctx)</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2649386">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648980">&nbsp;</a>&nbsp;&nbsp;&nbsp;switch (country) {</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648981">&nbsp;</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case "US": return ctx typeis Person ? 11 : 10</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648983">&nbsp;</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// other countries ... </PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648984">&nbsp;</a>&nbsp;&nbsp;&nbsp;}</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2649399">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648985">&nbsp;</a>&nbsp;&nbsp;&nbsp;return null</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2649406">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648986">&nbsp;</a>&nbsp;}</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648987"> </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648988">&nbsp;</a>&nbsp;private function getCountry(ctx : Object) : Country {</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648989">&nbsp;</a>&nbsp;&nbsp;&nbsp;return ctx[_countryProperty] as Country</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648990">&nbsp;</a>&nbsp;}</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648991"> </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648992">&nbsp;</a>&nbsp;private function validateUSTaxID(ctx : Object, prop : IPropertyInfo, value : String) {</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648993">&nbsp;</a>&nbsp;&nbsp;&nbsp;var pattern = ctx typeis Person ? "\\d{3}-\\d{2}-\\d{4}" : "\\d{2}-\\d{7}"</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648994">&nbsp;</a>&nbsp;&nbsp;&nbsp;if (not value.matches(pattern)) {</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2649268">&nbsp;</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw new DataTypeException("${value} does not match required pattern ${pattern}", prop,</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2649274">&nbsp;</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"Validation.TaxID", { value })</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2649269">&nbsp;</a>&nbsp;&nbsp;&nbsp;}</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2648997">&nbsp;</a>&nbsp;}</PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="2648512">}</a></PRE>
      <div class="B_-_Body"><span class="ri_-_run_in_header"><a name="2649071">Class TaxIDPresentationHandler.</a></span> This class looks similar to the following:</div>
      <PRE class="CF_-_Code_First_Line"><a name="2649083">package gw.newdatatypes</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2649084"> </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2649085">uses gw.lang.reflect.IPropertyInfo</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2649086">uses gw.datatype.handler.IStringPresentationHandler</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2649087"> </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2649088">class TaxIDPresentationHandler implements IStringPresentationHandler {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2649089"> </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2649090">&nbsp;</a>&nbsp;private var _countryProperty : String</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2649091"> </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2649092">&nbsp;</a>&nbsp;construct(countryProperty : String) {</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2649093">&nbsp;</a>&nbsp;&nbsp;&nbsp;_countryProperty = countryProperty</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2649094">&nbsp;</a>&nbsp;}</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2649095"> </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2649096">&nbsp;</a>&nbsp;function getEditorValue(ctx : Object, prop : IPropertyInfo) : Object {</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2649097">&nbsp;</a>&nbsp;&nbsp;&nbsp;return null</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2649098">&nbsp;</a>&nbsp;}</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2649099"> </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2649100">&nbsp;</a>&nbsp;override function getDisplayFormat(ctx : Object, prop : IPropertyInfo ) : String {</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2649101">&nbsp;</a>&nbsp;&nbsp;&nbsp;return null</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2649102">&nbsp;</a>&nbsp;}</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2649103"> </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2649104">&nbsp;</a>&nbsp;override function getInputMask(ctx : Object, prop : IPropertyInfo) : String {</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2649413">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2649105">&nbsp;</a>&nbsp;&nbsp;&nbsp;switch (getCountry(ctx)) {</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2649106">&nbsp;</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case "US": return ctx typeis Person ? "###-##-####" : "##-#######"</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2649108">&nbsp;</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// other countries ...</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2649109">&nbsp;</a>&nbsp;&nbsp;&nbsp;}</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2649426">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2649110">&nbsp;</a>&nbsp;&nbsp;&nbsp;return null</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2649433">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2649111">&nbsp;</a>&nbsp;}</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2649112"> </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2649113">&nbsp;</a>&nbsp;override function getPlaceholderChar(ctx : Object, prop : IPropertyInfo) : String {</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2649114">&nbsp;</a>&nbsp;&nbsp;&nbsp;return null</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2649115">&nbsp;</a>&nbsp;}</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2649116"> </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2649117">&nbsp;</a>&nbsp;private function getCountry(ctx : Object) : Country {</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2649118">&nbsp;</a>&nbsp;&nbsp;&nbsp;return ctx[_countryProperty] as Country</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2649119">&nbsp;</a>&nbsp;}</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2649440">&nbsp;</a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="2649063">}</a></PRE>
      <div class="B_-_Body"><a name="2649056">Notice how each of these handlers makes use of the context object in order to determine the type of input mask </a>and validation string to use. </div>
      <div class="B_-_Body"><a name="2647714">&nbsp;</a></div>
      <script type="text/javascript" language="JavaScript1.2">
        <!--
          // Clear related topics
          //
          WWHClearRelatedTopics();

          document.writeln(WWHRelatedTopicsInlineHTML());
        // -->
      </script>
    </blockquote>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag() + WWHALinksDivTag());
      // -->
    </script>
  </body>
</html>