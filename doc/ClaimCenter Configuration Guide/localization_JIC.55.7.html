<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <!-- MOTW-DISABLED saved from url=(0014)about:internet -->
    <title>Setting a Field to Conditionally Display the Japanese Imperial Calendar</title>
    <link rel="StyleSheet" href="css/localization_JIC.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        var  WebWorksRootPath = "";
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        // Set reference to top level help frame
        //
        var  WWHFrame = WWHGetWWHFrame("", true);
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
    <!-- THE FOLLOWING IS A GUIDEWIRE STYLE DEFINITION FOR THE LINK TO THIS FEATURE -->
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <!-- THE FOLLOWING IS A GUIDEWIRE GSCRIPT FUNCTION FOR THE LINK TO THIS FEATURE -->
    <script type="text/javascript">
function guidewire_selectall()
{
var text_val=eval("document.linktothisurlform.urlfield");
text_val.focus();
text_val.select();
}
</script>
  </head>
  <body onLoad="WWHUpdate();" onUnload="WWHUnload();" onKeyDown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onKeyPress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onKeyUp="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">
    <!-- THE FOLLOWING IS A GUIDEWIRE DIV FOR THE 'LINK TO THIS' FEATURE -->
    <div id="linkToThisPage" class="popup" style="display: none;">
      <div class="popupTitle">Link Directly to This Page 
           <a href="#" onclick="var thePopup = getElementById('linkToThisPage');thePopup.style.display='none';return false;"><img class="popupClosebox" src="wwhelp/wwhimpl/common/images/close.gif" /></a></div>
      <div style="padding:6px;">
        <div class="popupText" id="linkToThisPageBookmark">An error has occurred if you see this messsage.</div>
        <form name="linktothisurlform" method="post" action="" style="width:275px;margin:0px">
          <input type="text" class="popupURLText" id="linkToThisPageURL" name="urlfield" rows="1" cols="55" onClick="guidewire_selectall();" onFocus="guidewire_selectall();"></input>
        </form>
      </div>
    </div>
    <br />
    <div class="WebWorks_Breadcrumbs" style="text-align: left;">
      <span>ClaimCenter Configuration Guide</span> : 
    <span class="WebWorks_Breadcrumbs" style="text-align: left;"><a class="WebWorks_Breadcrumb_Link" href="p-localization.html#2187848">Configuring Localization</a> : <a class="WebWorks_Breadcrumb_Link" href="localization_JIC.55.1.html#2187848">Working with the Japanese Imperial Calendar</a> : Setting a Field to Conditionally Display the Japanese Imperial Calendar</span></div>
    <hr align="left" />
    <blockquote>
      <div class="H1_-_Heading_1"><a name="2187848">Setting a Field to Conditionally Display the Japanese </a>Imperial Calendar</div>
      <div class="BKN_-_Body_002c_Keep_Next"><a name="2187284">Suppose, for example, that you want to treat a field as either a Gregorian date or a Japanese Imperial calendar </a>date depending on certain factors. In this case, it is possible to write a datatype annotation that causes ClaimCenter to display certain fields in different formats in different situations. For example (as described in <a href="javascript:WWHClickedPopup('config', 'localization_JIC.55.5.html#2188554', '');" title="Working with the Japanese Imperial Date Data Type">“Working with the Japanese Imperial Date Data Type”</a>), suppose that you want to do the following:</div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2188711">If the user's locale is </a><span class="cv_-_computer_voice">ja_JP</span> and <span class="cv_-_computer_voice">Policy.PolicyType!="CALI"</span>, then ClaimCenter is to show these fields using the Gregorian calendar. </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2188875">If the user's locale is </a><span class="cv_-_computer_voice">ja_JP</span> and <span class="cv_-_computer_voice">Policy.PolicyType=="CALI"</span>, then ClaimCenter is to show these fields using the Japanese calendar.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BKN_-_Body_002c_Keep_Next"><a name="2188750">ClaimCenter provides several different ways to accomplish this date formatting. For example, you can:</a></div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2188965">Annotate an entity field (database column)</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2188979">Annotate a Gosu property</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="HS_-_Head_Sub"><a name="2188918">To annotate an entity field</a></div>
      <div class="LS_-_List_Start_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="LS_-_List_Start_inner" style="width: 15pt; white-space: nowrap;">
                <span class="ri_-_run_in_header">	1.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LS_-_List_Start_inner"><a name="2189017">First, configure the data type for the entity field in an extension file. For example:</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="CS_-_Code_Single_Line"><a name="2189018">&lt;column name="JICDate" type="japaneseimperialdate"/&gt;</a></div>
      <div class="LP_-_List_Para"><a name="2189021">See the discussion in </a><a href="javascript:WWHClickedPopup('config', 'localization_JIC.55.6.html#2188517', '');" title="Setting a Field to Always Display the Japanese Imperial Calendar">“Setting a Field to Always Display the Japanese Imperial Calendar”</a> for details if necessary.</div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="ri_-_run_in_header">	2.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="2189023">Define a </a><span class="cv_-_computer_voice">PresentationHandler</span> class for the data type. For example:</div>
            </td>
          </tr>
        </table>
      </div>
      <PRE class="CF_-_Code_First_Line"><a name="2189024">class JapaneseImperialDateDataTypeDef implements IDataTypeDef {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2189025">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2189026">&nbsp;</a>&nbsp;construct() { }</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2189027">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2189028">&nbsp;</a>&nbsp;override property get PresentationHandler() : IDataTypePresentationHandler {</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2189029">&nbsp;</a>&nbsp;&nbsp;&nbsp;return new JapaneseImperialCalendarPresentationHandler()</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2189030">&nbsp;</a>&nbsp;}</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2189031">&nbsp;</a>&nbsp;...</PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="2189032">}</a></PRE>
      <div class="LP_-_List_Para"><a name="2198524">If the class that you create implements an interface (in this case, </a><span class="cv_-_computer_voice">IDataTypePresentationHandler</span>), then ­Studio highlights the interface name in red and marks the class as invalid. This is because you need to provide implementations for all methods and properties in the interface. If you place your cursor in the class definition line, and press ALT-ENTER, Studio automatically inserts the required method and property bodies for you. You then need to define these properties and methods to suit your business needs.</div>
      <div class="N_-_Note">
        <span class="n_-_note">Note: </span><a name="2198527">For an example of how to implement a presentation handler class, see </a><a href="javascript:WWHClickedPopup('config', 'datatypes.28.9.html#2648253', '');" title="Defining a New Tax Identification Number Data Type">“Defining a New Tax Identification Number Data Type”</a>.</div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="ri_-_run_in_header">	3.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="2198530">Implement the date presentation handler for the data type. You can make the implementation logic dynamic </a>based on the entity context. For example:</div>
            </td>
          </tr>
        </table>
      </div>
      <PRE class="CF_-_Code_First_Line"><a name="2189043">class JapaneseImperialCalendarPresentationHandler implements IDatePresentationHandler {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2189153">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2189164">&nbsp;</a>&nbsp;construct() { }</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2189171">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2189045">&nbsp;</a>&nbsp;override function getCalendar( ctx: Object, prop: IPropertyInfo ) : DisplayCalendar {</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2189182">&nbsp;</a>&nbsp;&nbsp;&nbsp;/** if the "ctx" object is an policy and the policy is "cali" type and the "prop" </PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2189208">&nbsp;</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* is the effectivedate field ...</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2189222">&nbsp;</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;**/</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2189228">&nbsp;</a>&nbsp;&nbsp;&nbsp;if (...) </PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2189239">&nbsp;</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return JAPANESEIMPERIAL }</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2189049">&nbsp;</a>&nbsp;&nbsp;&nbsp;else </PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2189050">&nbsp;</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return GREGORIAN</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2189051">&nbsp;</a>&nbsp;}</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2189052">&nbsp;</a>&nbsp;...</PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="2189053">}</a></PRE>
      <div class="B_-_Body"><a name="2198778">See </a><a href="javascript:WWHClickedPopup('config', 'localization_JIC.55.8.html#2198762', '');" title="Sample JIC Presentation Handler">“Sample JIC Presentation Handler”</a> for sample code for a JIC presentation handler.</div>
      <div class="HS_-_Head_Sub"><a name="2189321">To annotate a Gosu property</a></div>
      <div class="LS_-_List_Start_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="LS_-_List_Start_inner" style="width: 15pt; white-space: nowrap;">
                <span class="ri_-_run_in_header">	1.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LS_-_List_Start_inner"><a name="2189332">Annotate the data type for the Gosu property. For example:</a></div>
            </td>
          </tr>
        </table>
      </div>
      <PRE class="CF_-_Code_First_Line"><a name="2189334">@DataType("japaneseimperialdate")</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2189335">property get JICDate() : Date {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2189336">&nbsp;</a>&nbsp;return _bean.DateField1</PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="2189337">}</a></PRE>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="ri_-_run_in_header">	2.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="2189339">Define a </a><span class="cv_-_computer_voice">PresentationHandler</span> class for the data type in a similar fashion to that described previously in <a href="javascript:WWHClickedPopup('config', 'localization_JIC.55.7.html#2189023', '');" title="Setting a Field to Conditionally Display the Japanese Imperial Calendar">step 2</a> of <span class="e_-_emphasis"><a href="javascript:WWHClickedPopup('config', 'localization_JIC.55.7.html#2188918', '');" title="Setting a Field to Conditionally Display the Japanese Imperial Calendar">To annotate an entity field</a></span>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="ri_-_run_in_header">	3.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="2189342">Implement the date presentation handler class for the data type in a similar fashion to that described previ</a>ously in <a href="javascript:WWHClickedPopup('config', 'localization_JIC.55.7.html#2198530', '');" title="Setting a Field to Conditionally Display the Japanese Imperial Calendar">step 3</a> of <span class="e_-_emphasis"><a href="javascript:WWHClickedPopup('config', 'localization_JIC.55.7.html#2188918', '');" title="Setting a Field to Conditionally Display the Japanese Imperial Calendar">To annotate an entity field</a></span>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="HS_-_Head_Sub"><a name="2190307">See Also</a></div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2190321">For a working example of how to implement the </a><span class="cv_-_computer_voice">IDataTypeDef</span> interface, see <a href="javascript:WWHClickedPopup('config', 'datatypes.28.9.html#2648253', '');" title="Defining a New Tax Identification Number Data Type">“Defining a New Tax Identification Number Data Type”</a>. Specifically, see <a href="javascript:WWHClickedPopup('config', 'datatypes.28.9.html#2648344', '');" title="Defining a New Tax Identification Number Data Type">“Step 2: Implement the IDataTypeDef Interface”</a>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2198822">For sample code for a JIC presentation handler, see </a><a href="javascript:WWHClickedPopup('config', 'localization_JIC.55.8.html#2198762', '');" title="Sample JIC Presentation Handler">“Sample JIC Presentation Handler”</a>.</div>
            </td>
          </tr>
        </table>
      </div>
      <script type="text/javascript" language="JavaScript1.2">
        <!--
          // Clear related topics
          //
          WWHClearRelatedTopics();

          document.writeln(WWHRelatedTopicsInlineHTML());
        // -->
      </script>
    </blockquote>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag() + WWHALinksDivTag());
      // -->
    </script>
  </body>
</html>