<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <!-- MOTW-DISABLED saved from url=(0014)about:internet -->
    <title>Synchronicity, Transactions, and Errors</title>
    <link rel="StyleSheet" href="css/workflow.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        var  WebWorksRootPath = "";
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        // Set reference to top level help frame
        //
        var  WWHFrame = WWHGetWWHFrame("", true);
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
    <!-- THE FOLLOWING IS A GUIDEWIRE STYLE DEFINITION FOR THE LINK TO THIS FEATURE -->
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <!-- THE FOLLOWING IS A GUIDEWIRE GSCRIPT FUNCTION FOR THE LINK TO THIS FEATURE -->
    <script type="text/javascript">
function guidewire_selectall()
{
var text_val=eval("document.linktothisurlform.urlfield");
text_val.focus();
text_val.select();
}
</script>
  </head>
  <body onLoad="WWHUpdate();" onUnload="WWHUnload();" onKeyDown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onKeyPress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onKeyUp="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">
    <!-- THE FOLLOWING IS A GUIDEWIRE DIV FOR THE 'LINK TO THIS' FEATURE -->
    <div id="linkToThisPage" class="popup" style="display: none;">
      <div class="popupTitle">Link Directly to This Page 
           <a href="#" onclick="var thePopup = getElementById('linkToThisPage');thePopup.style.display='none';return false;"><img class="popupClosebox" src="wwhelp/wwhimpl/common/images/close.gif" /></a></div>
      <div style="padding:6px;">
        <div class="popupText" id="linkToThisPageBookmark">An error has occurred if you see this messsage.</div>
        <form name="linktothisurlform" method="post" action="" style="width:275px;margin:0px">
          <input type="text" class="popupURLText" id="linkToThisPageURL" name="urlfield" rows="1" cols="55" onClick="guidewire_selectall();" onFocus="guidewire_selectall();"></input>
        </form>
      </div>
    </div>
    <br />
    <div class="WebWorks_Breadcrumbs" style="text-align: left;">
      <span>ClaimCenter Configuration Guide</span> : 
    <span class="WebWorks_Breadcrumbs" style="text-align: left;"><a class="WebWorks_Breadcrumb_Link" href="p-workflow.html#1406509">Workflow and Activity Configuration</a> : <a class="WebWorks_Breadcrumb_Link" href="workflow.41.01.html#1406509">Guidewire Workflow</a> : <a class="WebWorks_Breadcrumb_Link" href="workflow.41.33.html#1406509">The Workflow Engine</a> : Synchronicity, Transactions, and Errors</span></div>
    <hr align="left" />
    <blockquote>
      <div class="H2B_-_Heading_2_Break"><a name="1406509">Synchronicity, Transactions, and Errors</a></div>
      <div class="B_-_Body"><a name="2047468">To understand how error handling works in the internal Workflow engine, you must know whether the workflow </a>is running synchronously or asynchronously.</div>
      <div class="HS_-_Head_Sub"><a name="2047469">Synchronous and Asynchronous Workflow</a></div>
      <div class="BKN_-_Body_002c_Keep_Next"><a name="2047471">It is possible to start workflow either </a><span class="e_-_emphasis">synchronously</span> or <span class="e_-_emphasis">asynchronously</span>. To do so, use one of the <span class="cv_-_computer_voice">start</span> methods described in <a href="javascript:WWHClickedPopup('config', 'workflow.41.32.html#1890369', '');" title="Instantiating a Workflow">“Instantiating a Workflow”</a>. To review, these are:</div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt; margin-bottom: 2.0pt; vertical-align: baseline">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;color: #000000; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner" style="color: #000000; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none"><span class="cv_-_computer_voice"><a name="2047475">start()</a></span></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt; margin-bottom: 2.0pt; vertical-align: baseline">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;color: #000000; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner" style="color: #000000; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none"><span class="cv_-_computer_voice"><a name="2047476">start(</a></span><span class="ps_-_parameter_in_code_snippets">version</span><span class="cv_-_computer_voice">)</span></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt; margin-bottom: 2.0pt; vertical-align: baseline">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;color: #000000; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner" style="color: #000000; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none"><span class="cv_-_computer_voice"><a name="2047477">startAsynchronously()</a></span></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt; margin-bottom: 2.0pt; vertical-align: baseline">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;color: #000000; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner" style="color: #000000; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none"><span class="cv_-_computer_voice"><a name="2047478">startAsynchronously(</a></span><span class="ps_-_parameter_in_code_snippets">version</span><span class="cv_-_computer_voice">)</span></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="2047485">If a workflow runs synchronously, then it continues to go through one </a><span class="cv_-_computer_voice"><a href="javascript:WWHClickedPopup('config', 'workflow.41.20.html#2068701', '');" title="AutoStep">AutoStep</a></span> or <span class="cv_-_computer_voice"><a href="javascript:WWHClickedPopup('config', 'workflow.41.23.html#2313199', '');" title="ManualStep">ManualStep</a></span> after another until it arrives at a stop condition. This advance through the workflow can encompass one or multiple steps. The workflow executes the current step (unless there is an error), and then continues to the next step, if possible. There can be many different reasons that a workflow cannot continue to the next step. For example:</div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2047489">It can encounter an activity step (</a><span class="cv_-_computer_voice"><a href="javascript:WWHClickedPopup('config', 'workflow.41.22.html#1406412', '');" title="ActivityStep">ActivityStep</a></span>). This can result in the creation of one or more activities, causing the workflow to pause until the closure of all the activities.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2047493">It can encounter a communication step (</a><span class="cv_-_computer_voice"><a href="javascript:WWHClickedPopup('config', 'workflow.41.21.html#1406382', '');" title="MessageStep">MessageStep</a></span>). This can result in a message being sent to another system, causing the workflow to wait until receiving a response.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2047497">It can encounter a step that stipulates a timeout (</a><span class="cv_-_computer_voice"><a href="javascript:WWHClickedPopup('config', 'workflow.41.23.html#2313199', '');" title="ManualStep">ManualStep</a></span>). This causes the workflow to wait for the timeout to complete.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2047501">It can encounter a step that requires a trigger (</a><span class="cv_-_computer_voice"><a href="javascript:WWHClickedPopup('config', 'workflow.41.23.html#2313199', '');" title="ManualStep">ManualStep</a></span>). This causes the workflow to wait until someone (or something) activates the trigger.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2047505">And, of course, ultimately, the workflow can run until it reaches an </a><span class="cv_-_computer_voice"><a href="javascript:WWHClickedPopup('config', 'workflow.41.24.html#1884063', '');" title="Outcome">Outcome</a></span>, at which point, it is done.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BKN_-_Body_002c_Keep_Next"><a name="2047506">After pausing, the workflow waits for one of the following to occur:</a></div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2047507">If waiting on one or more activities to complete, it continues after the closure of the last activity.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2047508">If waiting for an acknowledgement of a message, it continues after receiving the appropriate response.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2047509">If waiting on a timeout, it continues after the timeout elapses.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2047510">If waiting on an external trigger, then someone or something must manually invoke a </a><span class="cv_-_computer_voice">Trigger</span> from outside the workflow infrastructure. This can happen either from the ClaimCenter interface (a user clicking a button) or from Gosu. In either case, this is done through a call to the <span class="cv_-_computer_voice">invokeTrigger</span> method on a <span class="cv_-_computer_voice">Workflow</span> instance.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="2047514">The action of completing an activity or the receipt of a message response automatically creates a work item to </a>advance the workflow. A background batch process checks for timeout elements. It is responsible for finding timed-out workflows that are ready to advance and creating a work item to advance them. </div>
      <div class="HS_-_Head_Sub"><a name="2047515">The invokeTrigger Method</a></div>
      <div class="B_-_Body"><a name="2047522">If a user (or Gosu code) invokes an available trigger (</a><span class="cv_-_computer_voice"><a href="javascript:WWHClickedPopup('config', 'workflow.41.28.html#1412870', '');" title="TRIGGER">TRIGGER</a></span>) on a <span class="cv_-_computer_voice"><a href="javascript:WWHClickedPopup('config', 'workflow.41.23.html#2313199', '');" title="ManualStep">ManualStep</a></span>, the workflow can execute <span class="e_-_emphasis">either</span> synchronously or asynchronously. A Boolean parameter in the <span class="cv_-_computer_voice">invokeTrigger</span> method determines the execution type. This method takes the following signature:</div>
      <div class="CS_-_Code_Single_Line"><a name="2047523">void invokeTrigger(WorkflowTrigger triggerKey, boolean synchronous)</a></div>
      <div class="B_-_Body"><a name="2047524">For example (from PolicyCenter):</a></div>
      <div class="CS_-_Code_Single_Line"><a name="2047525">policyPeriod.ActiveWorkflow.invokeTrigger( trigger, false )</a></div>
      <div class="B_-_Body"><a name="2047529">The </a><span class="cv_-_computer_voice">trigger</span> parameter defines the <a href="javascript:WWHClickedPopup('config', 'workflow.41.28.html#1412870', '');" title="TRIGGER">TRIGGER</a> to use. This must be a valid trigger defined in the <span class="cv_-_computer_voice">WorkflowTriggerKey</span> typelist. </div>
      <div class="B_-_Body"><a name="2047530">The </a><span class="cv_-_computer_voice">synchronous</span> value in this method has the following meanings:</div>
      <div class="T_-_Table"><a name="2047540">&nbsp;</a></div>
      <table class="withoutHeading" style="text-align: left" cellspacing="10" summary="">
        <caption></caption>
        <tr>
          <td style="padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text" style="color: #000000; font-family: &quot;Lucida Sans Typewriter&quot;; font-style: normal; font-variant: normal; font-weight: normal; margin-top: 3.0pt; text-transform: none; vertical-align: baseline"><span class="cvt_-_computer_voice_table"><a name="2047533">true</a></span></div>
          </td>
          <td style="padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="2047535">(Default) Instructs the workflow to immediately execute in the current transaction and to block the calling code until </a>the workflow encounters a new stopping point.</div>
          </td>
        </tr>
        <tr>
          <td style="padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text" style="color: #000000; font-family: &quot;Lucida Sans Typewriter&quot;; font-style: normal; font-variant: normal; font-weight: normal; margin-top: 3.0pt; text-transform: none; vertical-align: baseline"><span class="cvt_-_computer_voice_table"><a name="2047537">false</a></span></div>
          </td>
          <td style="padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="2047539">Instructs the workflow to run in the background, with the calling code continuing to execute. The workflow continues </a>until it encounters a new stopping point.</div>
          </td>
        </tr>
      </table>
      <div class="HS_-_Head_Sub"><a name="2047541">Trigger Availability</a></div>
      <div class="BKN_-_Body_002c_Keep_Next"><a name="2047542">For a trigger to be available, the workflow execution sequence must select a branch for which both of the follow</a>ing conditions are true:</div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2047543">A trigger must exist on the step. </a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2047544">There is no other determinable path (which usually means that no timeout has already expired).</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="2047545">Thus, if both of these conditions are true, after an invocation to the </a><span class="cv_-_computer_voice">invokeTrigger</span> method, the Workflow engine starts to advance the workflow from the selected branch again.</div>
      <div class="HS_-_Head_Sub"><a name="2047546">Invoking a Trigger</a></div>
      <div class="BKN_-_Body_002c_Keep_Next"><a name="2047547">Invoking a trigger (either synchronously or asynchronously) does the following:</a></div>
      <div class="LS_-_List_Start_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="LS_-_List_Start_inner" style="width: 15pt; white-space: nowrap;">
                <span class="ri_-_run_in_header">	1.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LS_-_List_Start_inner"><a name="2047548">It updates the workflow. Any changes made to a transaction bundle that were committed by the actual invoca</a>tion of the trigger, are committed.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="ri_-_run_in_header">	2.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="2047549">It causes the workflow to create a log entry of the trigger request. If there is an error in the workflow advance, </a>any request to the workflow to resume causes the process to start again. (See also <a href="javascript:WWHClickedPopup('config', 'workflow.41.36.html#1406536', '');" title="Workflow Administration">“Workflow Administration”</a>.)</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="ri_-_run_in_header">	3.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="2047553">If the Workflow engine determines that all the preconditions are met for continuing, it does the following:</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LS2A_-_List_Start_002c_Level_2_Alpha_outer" style="margin-left: 67pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="LS2A_-_List_Start_002c_Level_2_Alpha_inner" style="width: 15pt; white-space: nowrap;">
                <span class="ri_-_run_in_header">a.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LS2A_-_List_Start_002c_Level_2_Alpha_inner"><a name="2047555">It determines the </a><span class="e_-_emphasis">locale</span> in which to execute.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LP2_-_List_Para_002c_Level_2"><a name="2047559">This is the locale that ClaimCenter uses for display keys, dates, numbers, and other similar items. By </a>default, this is the application default locale. It is important for the Workflow engine to determine the locale as it is possible to override this locale for any specific workflow subtype. You can also override the locale in the workflow definition on the workflow element. See <a href="javascript:WWHClickedPopup('config', 'localization_workflow.49.2.html#1945448', '');" title="Localize a Workflow">“Localize a Workflow”</a> for more information.</div>
      <div class="LI2A_-_List_Item_002c_Level_2_Alpha_outer" style="margin-left: 67pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="LI2A_-_List_Item_002c_Level_2_Alpha_inner" style="width: 15pt; white-space: nowrap;">
                <span class="ri_-_run_in_header">b.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI2A_-_List_Item_002c_Level_2_Alpha_inner"><a name="2047560">It steps through each of the workflow steps (meaning that it performs all the actions within that step) until </a>it cannot keep going.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LI2A_-_List_Item_002c_Level_2_Alpha_outer" style="margin-left: 67pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="LI2A_-_List_Item_002c_Level_2_Alpha_inner" style="width: 15pt; white-space: nowrap;">
                <span class="ri_-_run_in_header">c.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI2A_-_List_Item_002c_Level_2_Alpha_inner"><a name="2047562">It commits the transaction associated with the executed steps to the database.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="HS_-_Head_Sub"><a name="2047563">Error Handling and Transaction Rollback</a></div>
      <div class="B_-_Body"><a name="2047564">If there is an error during a workflow step, the Workflow engine rolls the database back and leaves it in the state </a>that it was. If working with an external system, you need to one of the following:</div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2047565">You need to design the services in the external system, or,</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2047566">You need to use the Guidewire message subsystem to keep an external system state in synchronization with </a>the application database state.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="2047567">It is important to understand whether a workflow executes synchronously or asynchronously as it affects errors </a>and transaction rollbacks: </div>
      <div class="T_-_Table"><a name="2047613">&nbsp;</a></div>
      <table class="Shading" style="text-align: left" cellspacing="10" summary="">
        <caption></caption>
        <tr>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 1px; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: bottom">
            <div class="TH_-_Table_Heading"><a name="2047570">Execution type</a></div>
          </td>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 1px; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: bottom">
            <div class="TH_-_Table_Heading"><a name="2047572">Application behavior</a></div>
          </td>
        </tr>
        <tr>
          <td style="border-top-color: #000000; border-top-style: solid; border-top-width: 1px; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="2047574">Synchronous</a></div>
          </td>
          <td style="border-top-color: #000000; border-top-style: solid; border-top-width: 1px; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="2047576">If any exception occurs during </a><span class="e_-_emphasis">synchronous</span> execution, even after the workflow has gone through several steps, ClaimCenter rolls back all workflow steps (along with everything else in the bundle). The error cascades all the way up to the calling code (the code that started the workflow or invoked the trigger on the workflow).</div>
            <div class="BIT_-_Bullet_Item_Table_outer" style="margin-left: 2.16pt">
              <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
                <tr style="vertical-align: baseline;">
                  <td>
                    <div class="BIT_-_Bullet_Item_Table_inner" style="width: 7.199999999999999pt; white-space: nowrap;">
                      <span class="but_-_bullet_in_table">•	</span>
                    </div>
                  </td>
                  <td width="100%">
                    <div class="BIT_-_Bullet_Item_Table_inner"><a name="2047586">If you start the workflow or invoke the trigger from the ClaimCenter interface, ClaimCenter displays the </a>exception in the interface. </div>
                  </td>
                </tr>
              </table>
            </div>
            <div class="BIT_-_Bullet_Item_Table_outer" style="margin-left: 2.16pt">
              <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
                <tr style="vertical-align: baseline;">
                  <td>
                    <div class="BIT_-_Bullet_Item_Table_inner" style="width: 7.199999999999999pt; white-space: nowrap;">
                      <span class="but_-_bullet_in_table">•	</span>
                    </div>
                  </td>
                  <td width="100%">
                    <div class="BIT_-_Bullet_Item_Table_inner"><a name="2047587">If some other code started the workflow, that code receives the exception.</a></div>
                  </td>
                </tr>
              </table>
            </div>
          </td>
        </tr>
        <tr>
          <td style="background-color: #F7F7F7; border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 1px; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="2047589">Asynchronous</a></div>
          </td>
          <td style="background-color: #F7F7F7; border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 1px; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="2047591">If any exception occurs during </a><span class="e_-_emphasis">asynchronous</span> execution (as it executes in the background), ClaimCenter logs the exception and rolls back the bundle, in a similar manner to the synchronous case.</div>
            <div class="TT_-_Table_Text"><a name="2047598">ClaimCenter then handles workflow retries in the standard way through the distributed worker. </a>ClaimCenter leaves the work item used to advance the workflow checked out. It simply waits until the <span class="cvt_-_computer_voice_table">progressinterval</span> defined for the workflow work queue expires. At that point, a worker picks it up and retries it. The work queue configuration limits the number of retries. If all retries fail, ClaimCenter marks the work item as failed and it puts the workflow into the <span class="cvt_-_computer_voice_table">Error</span> state. A workflow in the Error <span class="cvt_-_computer_voice_table">state</span> merely sits idle until you restore it from the <span class="ui_-_UI_element">Administration</span> tab within ClaimCenter. Restoring the workflow creates another work item.</div>
            <div class="TT_-_Table_Text"><a name="2047608">After you manually restore a workflow from an </a><span class="cvt_-_computer_voice_table">Error</span> to an <span class="cvt_-_computer_voice_table">Active</span> state, it again tries to resume whatever it was doing as it left off, typically:</div>
            <div class="BIT_-_Bullet_Item_Table_outer" style="margin-left: 2.16pt">
              <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
                <tr style="vertical-align: baseline;">
                  <td>
                    <div class="BIT_-_Bullet_Item_Table_inner" style="width: 7.199999999999999pt; white-space: nowrap;">
                      <span class="but_-_bullet_in_table">•	</span>
                    </div>
                  </td>
                  <td width="100%">
                    <div class="BIT_-_Bullet_Item_Table_inner"><a name="2047609">entering the step</a></div>
                  </td>
                </tr>
              </table>
            </div>
            <div class="BIT_-_Bullet_Item_Table_outer" style="margin-left: 2.16pt">
              <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
                <tr style="vertical-align: baseline;">
                  <td>
                    <div class="BIT_-_Bullet_Item_Table_inner" style="width: 7.199999999999999pt; white-space: nowrap;">
                      <span class="but_-_bullet_in_table">•	</span>
                    </div>
                  </td>
                  <td width="100%">
                    <div class="BIT_-_Bullet_Item_Table_inner"><a name="2047610">following the branch</a></div>
                  </td>
                </tr>
              </table>
            </div>
            <div class="BIT_-_Bullet_Item_Table_outer" style="margin-left: 2.16pt">
              <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
                <tr style="vertical-align: baseline;">
                  <td>
                    <div class="BIT_-_Bullet_Item_Table_inner" style="width: 7.199999999999999pt; white-space: nowrap;">
                      <span class="but_-_bullet_in_table">•	</span>
                    </div>
                  </td>
                  <td width="100%">
                    <div class="BIT_-_Bullet_Item_Table_inner"><a name="2047611">or, attempting to perform whatever it was doing at the time the exception occurred</a></div>
                  </td>
                </tr>
              </table>
            </div>
            <div class="TT_-_Table_Text"><a name="2047612">Of course, if you have not corrected the problem that caused the error, then the workflow can drop right </a>back into <span class="cv_-_computer_voice">Error</span> state again. This is only after the work item performs its specified number of retries, however.</div>
          </td>
        </tr>
      </table>
      <div class="H3_-_Heading_3"><a name="2047614">Guidelines</a></div>
      <div class="B_-_Body"><a name="2047615">In practice, Guidewire recommends that you keep the following guidelines in mind as you work with workflows:</a></div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2047619">If you invoke a workflow </a><span class="cv_-_computer_voice"><a href="javascript:WWHClickedPopup('config', 'workflow.41.28.html#1412870', '');" title="TRIGGER">TRIGGER</a></span>, do so synchronously if you need to make immediate use (in code) of the results of that trigger. For this reason, the ClaimCenter rendering framework typically always invokes the trigger synchronously. But notice that you only get immediate results from an <span class="cv_-_computer_voice"><a href="javascript:WWHClickedPopup('config', 'workflow.41.20.html#2068701', '');" title="AutoStep">AutoStep</a></span> that might have executed. If the workflow encounters a <span class="cv_-_computer_voice"><a href="javascript:WWHClickedPopup('config', 'workflow.41.23.html#2313199', '');" title="ManualStep">ManualStep</a></span> or an <span class="cv_-_computer_voice"><a href="javascript:WWHClickedPopup('config', 'workflow.41.22.html#1406412', '');" title="ActivityStep">ActivityStep</a></span>, it immediately goes into the background. </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2047632">If you complete an activity, it does not synchronously (meaning immediately) advance the workflow. Instead, </a>a background process checks for workflows whose activities are complete and which are therefore ready to move forward. Guidewire provides this behavior, as otherwise, if an error occurs, the user who completes the activity sees the error, which is possibly confusing for that user.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2047633">If you invoke a workflow </a><span class="cv_-_computer_voice">Trigger</span> from code that does not necessarily care whether there was a failure in the workflow, you need to invoke the <span class="cv_-_computer_voice">Trigger</span> asynchronously. (You do this by setting the <span class="cv_-_computer_voice">synchronous</span> value in the workflow method to <span class="cv_-_computer_voice">false</span>.) That way, the workflow advances in the background and any errors it encounters force the workflow into the <span class="cv_-_computer_voice">Error</span> state. The exception does not affect the caller code. However, the calling code creates an exception if it tries to invoke an unavailable or non-existent workflow <span class="cv_-_computer_voice">Trigger</span>. Messaging plugins, in particular, need to always invoke triggers asynchronously.</div>
            </td>
          </tr>
        </table>
      </div>
      <script type="text/javascript" language="JavaScript1.2">
        <!--
          // Clear related topics
          //
          WWHClearRelatedTopics();

          document.writeln(WWHRelatedTopicsInlineHTML());
        // -->
      </script>
    </blockquote>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag() + WWHALinksDivTag());
      // -->
    </script>
  </body>
</html>