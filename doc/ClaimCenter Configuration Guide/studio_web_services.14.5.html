<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <!-- MOTW-DISABLED saved from url=(0014)about:internet -->
    <title>Calling a Web Service from Gosu: Example</title>
    <link rel="StyleSheet" href="css/studio_web_services.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        var  WebWorksRootPath = "";
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        // Set reference to top level help frame
        //
        var  WWHFrame = WWHGetWWHFrame("", true);
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
    <!-- THE FOLLOWING IS A GUIDEWIRE STYLE DEFINITION FOR THE LINK TO THIS FEATURE -->
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <!-- THE FOLLOWING IS A GUIDEWIRE GSCRIPT FUNCTION FOR THE LINK TO THIS FEATURE -->
    <script type="text/javascript">
function guidewire_selectall()
{
var text_val=eval("document.linktothisurlform.urlfield");
text_val.focus();
text_val.select();
}
</script>
  </head>
  <body style="" onLoad="WWHUpdate();" onUnload="WWHUnload();" onKeyDown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onKeyPress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onKeyUp="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">
    <!-- THE FOLLOWING IS A GUIDEWIRE DIV FOR THE 'LINK TO THIS' FEATURE -->
    <div id="linkToThisPage" class="popup" style="display: none;">
      <div class="popupTitle">Link Directly to This Page 
           <a href="#" onclick="var thePopup = getElementById('linkToThisPage');thePopup.style.display='none';return false;"><img class="popupClosebox" src="wwhelp/wwhimpl/common/images/close.gif" /></a></div>
      <div style="padding:6px;">
        <div class="popupText" id="linkToThisPageBookmark">An error has occurred if you see this messsage.</div>
        <form name="linktothisurlform" method="post" action="" style="width:275px;margin:0px">
          <input type="text" class="popupURLText" id="linkToThisPageURL" name="urlfield" rows="1" cols="55" onClick="guidewire_selectall();" onFocus="guidewire_selectall();"></input>
        </form>
      </div>
    </div>
    <br />
    <div class="WebWorks_Breadcrumbs" style="text-align: left;">
      <span>ClaimCenter Configuration Guide</span> : 
    <span class="WebWorks_Breadcrumbs" style="text-align: left;"><a class="WebWorks_Breadcrumb_Link" href="p-editors.html#3220321">Guidewire Studio Editors</a> : <a class="WebWorks_Breadcrumb_Link" href="studio_web_services.14.1.html#3220321">Working with Web Services</a> : Calling a Web Service from Gosu: Example</span></div>
    <hr align="left" />
    <div>
      <div class="H1_-_Heading_1"><a name="3220321">Calling a Web Service from Gosu: Example</a></div>
      <div class="N_-_Note">
        <span class="n_-_note">Note: </span><a name="3031451">See also </a><a href="javascript:WWHClickedPopup('integration', 'webservice-consuming.html#2001714', '');" title="Calling Web Services from Gosu">“Calling Web Services from Gosu” in the </a><span class="bt_-_book_title"><a href="javascript:WWHClickedPopup('integration', 'webservice-consuming.html#2001714', '');" title="Calling Web Services from Gosu">Integration Guide</a></span> for more information.</div>
      <div class="B_-_Body"><a name="3031458">The following example illustrates how you create a web service in Studio, then call that web service from within </a>Gosu code.</div>
      <div class="HS_-_Head_Sub"><a name="3031461">Calling Web Service from Gosu: ICD-9 Example</a></div>
      <div class="B_-_Body"><a name="3031462">Suppose that your application wanted to look up special codes. For example, maybe this is the ICD-9 codes that </a>represent International Statistical Classification of Diseases and Related Health Problems. You can put all the information directly into your application, such as in a big look-up table. However, in some cases it might be necessary to let an external system look up the code, especially if the information changes frequently. This example illustrates how you would do the following:</div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="3162154">Look up these codes using an external web service.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="3162165">Create a utility class in Gosu to help connect to this service.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="3162167">Prepare its arguments.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><span class="ri_-_run_in_header"><a name="3031463">IMPORTANT</a></span> Guidewire does not certify the web service illustrated in the example is the standard way to integrate with ICD-9 codes. Guidewire includes this example to demonstrate the following:</div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="3162186">how to use web services in application logic</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="3162187">how to write Gosu utility classes to prepare data for the service</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="3162195">how to perform post-processing after retrieving the results</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="HS_-_Head_Sub"><a name="3031464">To set up the external web service in Studio</a></div>
      <div class="LS_-_List_Start_outer" style="margin-left: 57pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="LS_-_List_Start_inner" style="width: 15pt; white-space: nowrap;">
                <span class="ri_-_run_in_header">	1.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LS_-_List_Start_inner"><a name="3031465">Launch Studio. </a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="ri_-_run_in_header">	2.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="3031666">Create a new web service, naming it </a><span class="cv_-_computer_voice">ICD9</span>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="ri_-_run_in_header">	3.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="3031667">Click </a><span class="ui_-_UI_element">Edit</span> (next to the <span class="ui_-_UI_element">URL</span> field) and enter the following URL:</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="CS_-_Code_Single_Line"><a name="3031668">http://www.webservicemart.com/icd9code.asmx?WSDL</a></div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="ri_-_run_in_header">	4.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="3031470">Save the web service definition.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="N_-_Note">
        <span class="n_-_note">Note: </span><a name="3031471">Inspect the created service name. As you published it as a Microsoft .NET web service, the service </a>class has the original name of the class plus <span class="cv_-_computer_voice">Soap</span> at the end. Because the original name for the service is <span class="cv_-_computer_voice">ICD9Code</span>, Gosu creates this class as <span class="cv_-_computer_voice">ICD9CodeSoap</span>. That is the name that you use to connect to it.</div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="ri_-_run_in_header">	5.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="3031472">To create a class to represent a single ICD-9 code, add the following code in the package </a><span class="cv_-_computer_voice">example.webservice.icd9</span> in Studio:</div>
            </td>
          </tr>
        </table>
      </div>
      <PRE class="CM_-_Code_Middle_Line"><a name="3031473">package example.webservice.icd9</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3031474">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3031475">/**</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3031476">&nbsp;</a>* A single ICD9 code containing a code and a description.</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3031477">&nbsp;</a>* </PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3031478">*/</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3031479">class ICD9Code {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3031481">&nbsp;</a>&nbsp;private var _code : String as Code</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3031482">&nbsp;</a>&nbsp;private var _desc : String as Desc</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3031483">&nbsp;</a>&nbsp;construct() {</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3031683">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3031485">&nbsp;</a>&nbsp;}</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3031486">&nbsp;</a>&nbsp; </PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3031487">&nbsp;</a>&nbsp;construct(aCode  : String, aDesc : String) {</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3031488">&nbsp;</a>&nbsp;&nbsp;&nbsp;_code = aCode</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3031489">&nbsp;</a>&nbsp;&nbsp;&nbsp;_desc = aDesc</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3031490">&nbsp;</a>&nbsp;}</PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="3031491">}</a></PRE>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="ri_-_run_in_header">	6.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="3031493">Next, you need a utility class to talk to this web service and to prepare data to send over the web service. In </a>this case, the service requires a list of string lengths (code lengths) to be provided as a list. For example, to look for 3-to-6 character long codes, the service expects the string <span class="cv_-_computer_voice">"(3,4,5,6)"</span>. The <span style="font-family: &quot;Lucida Sans Typewriter&quot;; font-size: 7.0pt;">lookupICD9CodesByPrefix</span> method provides an easy-to-use API to this by providing a minimum and maximum length argument, and the method generates the list automatically</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LP_-_List_Para"><a name="3031494">Add the following class in the package </a><span class="cv_-_computer_voice">example.webservice.icd9</span>. </div>
      <PRE class="CM_-_Code_Middle_Line"><a name="3031495">package example.webservice.icd9</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3031496">uses java.lang.Integer</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3031497">uses java.lang.IllegalArgumentException</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3031498">uses java.util.ArrayList</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3031499">uses gw.api.xml.XMLNode</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3031500">uses java.lang.RuntimeException</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3031501">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3031502">class ICD9Util {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3031504">&nbsp;</a>&nbsp;private var _api : soap.ICD9.api.ICD9CodeSoap</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3031505">  </a>&nbsp;</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3031506">&nbsp;</a>&nbsp;construct() {</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3031508">&nbsp;</a>&nbsp;&nbsp;&nbsp;_api = new soap.ICD9.api.ICD9CodeSoap()</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3031509">&nbsp;</a>&nbsp;}</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3031510">&nbsp;</a>&nbsp;</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3031511">&nbsp;</a>&nbsp;private function getICD9Codes(code : String, len : String) : String {</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3031512">&nbsp;</a>&nbsp;&nbsp;&nbsp;return _api.ICD9Codes( code, len )</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3031513">&nbsp;</a>&nbsp;}</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3031514">  </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3031515">&nbsp;</a>&nbsp;static function getICD9Codes2(code : String, len : String) : String {</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3031516">&nbsp;</a>&nbsp;&nbsp;&nbsp;var util = new ICD9Util()</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3031517">&nbsp;</a>&nbsp;&nbsp;&nbsp;return util.getICD9Codes( code, len )</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3031518">&nbsp;</a>&nbsp;}</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3031519">  </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3031520">&nbsp;</a>&nbsp;/**</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3031521">&nbsp;</a>&nbsp;&nbsp;* @codePrefix the prefix of any code that to look up.</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3031522">&nbsp;</a>&nbsp;&nbsp;* @minLen the minimum number of characters the code should contain.  This may be null</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3031523">&nbsp;</a>&nbsp;&nbsp;* @maxLen the maximum number of characters the code should contain.  This may be null. </PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3031524">&nbsp;</a>&nbsp;&nbsp;* If both the minLen and maxLen are null, then </PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3031525">&nbsp;</a>&nbsp;&nbsp;*/</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3031526">&nbsp;</a>&nbsp;static function lookupICD9CodesByPrefix(codePrefix : String, minLen : Integer, </PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3031527">&nbsp;</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;maxLen : Integer) : List&lt;ICD9Code&gt;{</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3031528">&nbsp;</a>&nbsp;&nbsp;&nbsp;//no-op   </PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3031529">&nbsp;</a>&nbsp;&nbsp;&nbsp;var pre = codePrefix + "*"</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3031530">&nbsp;</a>&nbsp;&nbsp;&nbsp;var lenStr = createLengthFilter( minLen, maxLen )</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3031531">&nbsp;</a>&nbsp;&nbsp;&nbsp;var result = getICD9Codes2( pre, lenStr )</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3031532">&nbsp;</a>&nbsp;&nbsp;&nbsp;return parseResultIntoCodes( result )    </PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3031533">&nbsp;</a>&nbsp;}</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3031534">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3031535">&nbsp;</a>&nbsp;private static function parseResultIntoCodes(result : String) : List&lt;ICD9Code&gt; {</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3031536">&nbsp;</a>&nbsp;&nbsp;&nbsp;var codes = new ArrayList&lt;ICD9Code&gt;()</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3031537">&nbsp;</a>&nbsp;&nbsp;&nbsp;var itemsNode = XMLNode.parse( result )</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3031538">&nbsp;</a>&nbsp;&nbsp;&nbsp;if (itemsNode.ElementName != "items"){</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3031539">&nbsp;</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw new RuntimeException("Could not parse the result into ICD9 Codes.")</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3031540">&nbsp;</a>&nbsp;&nbsp;&nbsp;}</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3031541">&nbsp;</a>&nbsp;&nbsp;&nbsp;itemsNode.Children.each( \ item -&gt; { </PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3031542">&nbsp;</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var code = item.Attributes.get( "code")</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3031543">&nbsp;</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var desc = item.Attributes.get( "description")</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3031544">&nbsp;</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (item.ElementName != "item" || code == null){</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3031545">&nbsp;</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw new RuntimeException("Unable to parse the result into ICD9 Codes.")</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3031546">&nbsp;</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3031547">&nbsp;</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;codes.add(new ICD9Code(code, desc))      </PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3031548">&nbsp;</a>&nbsp;&nbsp;&nbsp;})</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3031549">&nbsp;</a>&nbsp;&nbsp;&nbsp;</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3031550">&nbsp;</a>&nbsp;&nbsp;&nbsp;return codes</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3031551">&nbsp;</a>&nbsp;}</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3031552">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3031553">&nbsp;</a>&nbsp;private static function createLengthFilter(minLen : Integer, maxLen : Integer) : String{</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3031554">&nbsp;</a>&nbsp;if ((minLen != null &amp;&amp; minLen &lt; 0) || (maxLen != null &amp;&amp; maxLen &lt; 0)){</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3031555">&nbsp;</a>&nbsp;&nbsp;&nbsp;throw new IllegalArgumentException("Cannot have a minimum length or maximum </PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3031556">&nbsp;</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;length that is negative: Min:" + minLen + ", Max:" + maxLen)</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3031557">&nbsp;</a>&nbsp;}</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3031558">&nbsp;</a>&nbsp;</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3031559">&nbsp;</a>&nbsp;if (minLen != null &amp;&amp; maxLen != null &amp;&amp; minLen &gt; maxLen){</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3031560">&nbsp;</a>&nbsp;&nbsp;&nbsp;throw new IllegalArgumentException("Maximum length is less than the minimum length: "</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3031561">&nbsp;</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ minLen + " &gt; " + maxLen)</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3031562">&nbsp;</a>&nbsp;}</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3031563">&nbsp;</a>&nbsp;var min = minLen == null ? 0 : minLen</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3031564">&nbsp;</a>&nbsp;var max = maxLen == null ? 15 : maxLen //assume that no ICD9 code is more than 15 characters long</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3031565">&nbsp;</a>&nbsp;var diff = (max + 1) - min</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3031566">&nbsp;</a>&nbsp;var range : int[] = new int[diff]</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3031567">&nbsp;</a>&nbsp;for (i in diff){</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3031568">&nbsp;</a>&nbsp;&nbsp;&nbsp;range[i] = i + min</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3031569">&nbsp;</a>&nbsp;}    </PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3031570">&nbsp;</a>&nbsp;var rangeStr = range.join( "," )</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3031571">&nbsp;</a>&nbsp;return "(" + rangeStr + ")"</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3031572">&nbsp;</a>&nbsp;}</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3031573">}</a></PRE>
      <div class="B_-_Body"><a name="3032924">Notice that Studio now displays the service name using code completion.</a></div>
      <div class="HS_-_Head_Sub"><a name="3031574">Test the ICD-9 Web Service from Gosu Tester</a></div>
      <div class="B_-_Body"><a name="3031575">Launch the Gosu Tester and invoke the web service to test it. You must create an instance of the web service, </a>which has the class:</div>
      <div class="CS_-_Code_Single_Line"><a name="3031576">soap.</a><span class="pc_-_parameter_in_code">WEBSERVICE</span>.api.<span class="pc_-_parameter_in_code">SERVICE</span></div>
      <div class="B_-_Body"><a name="3031577">In this case, it is </a><span class="cv_-_computer_voice">soap.ICD9.api.ICD9CodeSoap</span>.</div>
      <div class="B_-_Body"><a name="3031578">For a simple test, paste the following code in the Gosu Tester, then click </a><span class="ui_-_UI_element">Run</span>:</div>
      <PRE class="CF_-_Code_First_Line"><a name="3031579">var api = new soap.ICD9.api.ICD9CodeSoap()</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3031580">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3031581">var code = "E*"</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3031582">var len = "(2,3,4)"</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3031583">var result = api.ICD9Codes( code, len )</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3031584">&nbsp;</a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="3031585">print(result) // print the final answer</a></PRE>
      <div class="B_-_Body"><a name="3032804">This returns the following result (slightly reformatted for readability.)</a></div>
      <PRE class="CF_-_Code_First_Line"><a name="3032807">&lt;items&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3032817">&nbsp;</a>&nbsp;&lt;item code="E01" description="*HIGH REFRACTIVE ERROR (+/-8 DIOPTRE OR MORE)"/&gt;</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3032818">&nbsp;</a>&nbsp;&lt;item code="E02" description="*CHANGE OF 0.5 DIOPTRES OR &amp;gt; TO SPHERICAL OR CYLINDER LENS."/&gt;</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3032825">&nbsp;</a>&nbsp;&lt;item code="E03" description="*0.5 DIOPTRES OR GREATER CHANGE TO CYLINDER LENS"/&gt;</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3032826">&nbsp;</a>&nbsp;&lt;item code="E04" description="*CHANGE IN AXIS = &amp;gt; CYLINDER LENS OF .5 DIOPTRES AND </PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3032855">&nbsp;</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;20 DEGREE"/&gt;</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3032827">&nbsp;</a>&nbsp;&lt;item code="E05" description="*CHANGE IN AXIS OF =/&amp;gt; 20 DEGREES FOR A CYLINDER LENS OF </PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3032856">&nbsp;</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0.5 DIOPTRE OR &amp;lt;"/&gt;</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3032828">&nbsp;</a>&nbsp;&lt;item code="E06" description="*10 DEGREES FOR A CYLINDER LENS OF &amp;gt;0.5 DIOPTRE BUT </PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3032857">&nbsp;</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NOT &amp;gt;1.0 DIOPTRE"/&gt;</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3032829">&nbsp;</a>&nbsp;&lt;item code="E07" description="*INTRAOCULAR SURGERY"/&gt;</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3032830">&nbsp;</a>&nbsp;&lt;item code="E08" description="MEDICATIONS"/&gt;</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3032831">&nbsp;</a>&nbsp;&lt;item code="E0800" description="ANTI-INFECTIVES"/&gt;</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3032832">&nbsp;</a>&nbsp;&lt;item code="E0801" description="AGENTS AFFECTING THE CENTRAL NERVOUS SYSTEM"/&gt;</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3032833">&nbsp;</a>&nbsp;&lt;item code="E0802" description="ANALGESICS, NARCOTIC ANTAGONISTS, ARTHRITIS AGENTS"/&gt;</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3032834">&nbsp;</a>&nbsp;&lt;item code="E0803" description="AGENTS USED IN ANESTHESIA"/&gt;</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3032835">&nbsp;</a>&nbsp;&lt;item code="E0804" description="GASTROINTESTINAL AGENTS"/&gt;</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3032836">&nbsp;</a>&nbsp;&lt;item code="E0805" description="CARDIAC, VASCULAR, AND RENAL AGENTS"/&gt;</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3032837">&nbsp;</a>&nbsp;&lt;item code="E0806" description="HORMONES + AGENTS AFFECTING HORMONAL MECHANISMS"/&gt;</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3032838">&nbsp;</a>&nbsp;&lt;item code="E0807" description="AGENTS AFFECTING BLOOD FORMATION AND COAGULABILITY"/&gt;</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3032839">&nbsp;</a>&nbsp;&lt;item code="E0808" description="HOMEOSTATIC AND NUTRIENT AGENTS"/&gt;</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3032840">&nbsp;</a>&nbsp;&lt;item code="E09" description="*3 DEGREES FOR A CYLINDER LENS OF MORE THAN 1.0 DIOPTRE"/&gt;</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3032841">&nbsp;</a>&nbsp;&lt;item code="E10" description="*PREVIOUSLY +/- 8 D OR GREATER, AT RISK OF RETINAL DETACHMENT"/&gt;</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3032842">&nbsp;</a>&nbsp;&lt;item code="E91" description="*NO INDICATOR PRESENT"/&gt;</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3032843">&nbsp;</a>&nbsp;&lt;item code="E92" description="*INDICATOR OF OCULAR PATHOLOGY: EXTERNAL"/&gt;</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3032844">&nbsp;</a>&nbsp;&lt;item code="E93" description="*INDICATOR OF OCULAR PATHOLOGY: INTERNAL"/&gt;</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3032845">&nbsp;</a>&nbsp;&lt;item code="E94" description="*INDICATOR OF BINOCULARITY: PHORIA"/&gt;</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3032846">&nbsp;</a>&nbsp;&lt;item code="E95" description="*INDICATOR OF BINOCULARITY: STRABISMUS"/&gt;</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3032847">&nbsp;</a>&nbsp;&lt;item code="E96" description="*INDICATOR OF VISION: AMBLYOPIA"/&gt;</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3032848">&nbsp;</a>&nbsp;&lt;item code="E97" description="*INDICATOR OF REFRACTIVE ERROR: ASTIGMATISM"/&gt;</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3032849">&nbsp;</a>&nbsp;&lt;item code="E98" description="*INDICATOR OF REFRACTIVE ERROR: HYPEROPIA"/&gt;</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3032850">&nbsp;</a>&nbsp;&lt;item code="E99" description="*INDICATOR OF REFRACTIVE ERROR: MYOPIA"/&gt;</PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="3032851">&lt;/items&gt;</a></PRE>
      <script type="text/javascript" language="JavaScript1.2">
        <!--
          // Clear related topics
          //
          WWHClearRelatedTopics();

          document.writeln(WWHRelatedTopicsInlineHTML());
        // -->
      </script>
    </div>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag() + WWHALinksDivTag());
      // -->
    </script>
  </body>
</html>