<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <!-- MOTW-DISABLED saved from url=(0014)about:internet -->
    <title>Configuring the Registry Element for Clustering</title>
    <link rel="StyleSheet" href="css/clustering.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        var  WebWorksRootPath = "";
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        // Set reference to top level help frame
        //
        var  WWHFrame = WWHGetWWHFrame("", true);
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
    <!-- THE FOLLOWING IS A GUIDEWIRE STYLE DEFINITION FOR THE LINK TO THIS FEATURE -->
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <!-- THE FOLLOWING IS A GUIDEWIRE GSCRIPT FUNCTION FOR THE LINK TO THIS FEATURE -->
    <script type="text/javascript">
function guidewire_selectall()
{
var text_val=eval("document.linktothisurlform.urlfield");
text_val.focus();
text_val.select();
}
</script>
  </head>
  <body style="" onLoad="WWHUpdate();" onUnload="WWHUnload();" onKeyDown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onKeyPress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onKeyUp="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">
    <!-- THE FOLLOWING IS A GUIDEWIRE DIV FOR THE 'LINK TO THIS' FEATURE -->
    <div id="linkToThisPage" class="popup" style="display: none;">
      <div class="popupTitle">Link Directly to This Page 
           <a href="#" onclick="var thePopup = getElementById('linkToThisPage');thePopup.style.display='none';return false;"><img class="popupClosebox" src="wwhelp/wwhimpl/common/images/close.gif" /></a></div>
      <div style="padding:6px;">
        <div class="popupText" id="linkToThisPageBookmark">An error has occurred if you see this messsage.</div>
        <form name="linktothisurlform" method="post" action="" style="width:275px;margin:0px">
          <input type="text" class="popupURLText" id="linkToThisPageURL" name="urlfield" rows="1" cols="55" onClick="guidewire_selectall();" onFocus="guidewire_selectall();"></input>
        </form>
      </div>
    </div>
    <br />
    <div class="WebWorks_Breadcrumbs" style="text-align: left;">
      <span>ClaimCenter System Administration Guide</span> : 
    <span class="WebWorks_Breadcrumbs" style="text-align: left;"><a class="WebWorks_Breadcrumb_Link" href="clustering.07.01.html#1066289">Managing Clustered Servers</a> : <a class="WebWorks_Breadcrumb_Link" href="clustering.07.03.html#1066289">Configuring a Cluster</a> : Configuring the Registry Element for Clustering</span></div>
    <hr align="left" />
    <div>
      <div class="H2B_-_Heading_2_Break"><a name="1066289">Configuring the Registry Element for Clustering</a></div>
      <div class="B_-_Body"><a name="1115962">The registry element and ClaimCenter environment properties play an important role in creating a cluster. Since </a>the <span class="cv_-_computer_voice">config.xml</span> file and the <span class="cv_-_computer_voice">config</span> subdirectories must be identical, create a configuration that runs on all servers. If you have not already done so, review <a href="javascript:WWHClickedPopup('admin', 'configndeploy.04.3.html#1178730', '');" title="Defining the Application Server Environment">"Defining the Application Server Environment"</a>. The following <span class="cv_-_computer_voice">registry</span> element illustrates a simple scenario for defining a cluster with environment properties:</div>
      <PRE class="CF_-_Code_First_Line"><a name="1115970">&lt;registry&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1116013">&nbsp;</a>&nbsp;&lt;server serverid="buffy" isbatchserver="true" /&gt; </PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1115984">&nbsp;</a>&nbsp;&lt;server serverid="spike"/&gt;</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1115985">&nbsp;</a>&nbsp;&lt;server serverid="watcher"/&gt;</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1115998">&lt;/registry&gt;</a></PRE>
      <div class="B_-_Body"><a name="1116095">Of course, you need not use the registry element at all, you can use JVM options. See </a><a href="javascript:WWHClickedPopup('admin', 'configndeploy.04.3.html#1184829', '');" title="Defining the Application Server Environment">"Setting Java Virtual Machine (JVM) Options"</a> for more information.</div>
      <div class="H3_-_Heading_3"><a name="1271511">Developing Sophisticated Configurations Using Localized Parameters</a></div>
      <div class="B_-_Body"><a name="1116096">Since all servers in a cluster must use an identical </a><span class="cv_-_computer_voice">config.xml</span> file, the value of most configuration parameters is the same for all of them. However, you can also develop more sophisticated configurations that make extensive use of the ClaimCenter environment properties and localized parameters. You can develop multiple configurations that work in multiple situations. </div>
      <div class="B_-_Body"><a name="1116124">For example, you might develop a configuration that had the ability to run each server alone </a><span class="e_-_emphasis">or</span> in a cluster. The following configuration illustrates this.</div>
      <PRE class="CF_-_Code_First_Line"><a name="1069425">&lt;registry&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1069426">&nbsp;</a>&nbsp;&lt;systemproperty name="env" value="my.env" default="cluster1"/&gt;</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1134889">&nbsp;</a>&nbsp;</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1134890">&nbsp;</a>&nbsp;&lt;server serverid="giles" env="cluster1" isbatchserver="true"/&gt;</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1134891">&nbsp;</a>&nbsp;&lt;server serverid="spike" env="cluster1" isbatchserver="true"/&gt;</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1134892">&nbsp;</a>&nbsp;&lt;server serverid="buffy" env="cluster1" isbatchserver="true"/&gt;</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1069438">&lt;/registry&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1116068">...</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1116071">&lt;param name="ClusteringEnabled" value="true" env="cluster1" /&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1116072">&lt;param name="ClusteringEnabled" value="false" env="standalone" /&gt;</a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="1116069">...</a></PRE>
      <div class="B_-_Body"><a name="1069423">At startup, ClaimCenter first resolves the </a><span class="cv_-_computer_voice">env</span> element. Assuming that there are <span class="cv_-_computer_voice">-Dgw.cc.env</span> is not set on the command line to something else, this <span class="cv_-_computer_voice">registry</span> would result in the <span class="cv_-_computer_voice">env</span> resolving to <span class="cv_-_computer_voice">cluster1</span>. </div>
      <div class="B_-_Body"><a name="1069495">This same configuration can be used to start any of these servers in standalone mode. To do this, start the appli</a>cation server with a <span class="cv_-_computer_voice">-Dgw.cc.env=standalone</span> JVM option. Notice that, in the previous example, the localized parameter <span class="cv_-_computer_voice">ClusteringEnabled</span> supports resolves to a different value in the standalone environment than the clustered environment:</div>
      <PRE class="CF_-_Code_First_Line"><a name="1116127">&lt;param name="ClusteringEnabled" value="true" env="cluster1" /&gt;</a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="1116128">&lt;param name="ClusteringEnabled" value="false" env="standalone" /&gt;</a></PRE>
      <div class="B_-_Body"><a name="1116114">For a complete discussion of localized parameters including a list of the parameters you can localize, see, </a><a href="javascript:WWHClickedPopup('admin', 'configndeploy.04.3.html#1184960', '');" title="Defining the Application Server Environment">"Specifying Parameters by Environment"</a>.</div>
      <div class="H3_-_Heading_3"><a name="1069036">Defining a Batch Server with the isbatchserver Environment Property</a></div>
      <div class="B_-_Body"><a name="1069037">A batch server performs the following operations:</a></div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="1068667">upgrade the database</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="1362670">perform staging table operations</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="1068669">dispatch integration messages</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="1134946">start scheduled processes, such as activity escalation and statistics calculation</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="1134974">Only one ClaimCenter server can act as the cluster’s batch server. Having only one batch server prevents </a>multiple servers from attempting to upgrade the same database and possibly running into conflicts over important resources. Since batch server operations can be resource intensive, a single batch server in a cluster reduces the network load.</div>
      <div class="B_-_Body"><a name="1134970">Within the cluster, the </a><span class="cv_-_computer_voice">isBatchServer</span> property must resolve to <span class="cv_-_computer_voice">true</span> on at least one server. If you configure multiple servers in a cluster to act as a batch server, then the servers race for the designation. The first server that starts becomes the batch server — the others operate as regular servers regardless of their designation. In a standalone configuration in which <span class="cv_-_computer_voice">ClusteringEnabled</span> is <span class="cv_-_computer_voice">false</span>, the individual server always acts as its own batch server. </div>
      <div class="B_-_Body"><a name="1068691">Identify a batch server by setting the </a><span class="cv_-_computer_voice">isbatchserver</span> attribute of the <span class="cv_-_computer_voice">server</span> element in <span class="cv_-_computer_voice">config.xml</span> to <span class="cv_-_computer_voice">true</span>:</div>
      <PRE class="CF_-_Code_First_Line"><a name="1347116">&lt;registry&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1347117">  &lt;server isbatchserver="true" serverid="</a><span class="pc_-_parameter_in_code">hostname of batch server</span>"/&gt;</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1347118">  &lt;server serverid="</a><span class="pc_-_parameter_in_code">hostname of the nonbatch server</span>"/&gt;</PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="1347113">&lt;/registry&gt; </a></PRE>
      <div class="B_-_Body"><a name="1347112">The </a><span class="cv_-_computer_voice">serverid</span> is case-sensitive. Specify the <span class="cv_-_computer_voice">serverid</span> exactly as you named the server. Otherwise, ClaimCenter can not find the batch server.</div>
      <div class="B_-_Body"><a name="1347137">Alternatively, you can edit the </a><span class="cv_-_computer_voice">config.xml</span> file and create a <span class="cv_-_computer_voice">systemproperty</span> of type <span class="cv_-_computer_voice">isbatchserver</span> to redefine the <span class="cv_-_computer_voice">gw.cc.isbatchserver</span> option:</div>
      <PRE class="CF_-_Code_First_Line"><a name="1347154">&lt;registy&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1347155">    &lt;systemproperty name="isbatchserver" value="gw.cc.isbatchserver" default="false"/&gt;</a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="1347152">&lt;/registry&gt; </a></PRE>
      <div class="B_-_Body"><a name="1347150">For a complete discussion of how environment properties work, see </a><a href="javascript:WWHClickedPopup('admin', 'configndeploy.04.3.html#1178730', '');" title="Defining the Application Server Environment">"Defining the Application Server Environment"</a>.</div>
      <div class="B_-_Body"><a name="1068639">If you do not specify </a><span class="cv_-_computer_voice">isbatchserver</span> through the JVM options, ClaimCenter does the following to determine whether the server is a batch server:</div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="ri_-_run_in_header">	1.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="1068731">ClaimCenter takes the </a><span class="cv_-_computer_voice">isbatchserver</span> value of the first <span class="cv_-_computer_voice">serverid</span> that it matches. Regardless of whether you set the <span class="cv_-_computer_voice">isbatchserver</span> parameter on the <span class="cv_-_computer_voice">server</span> subelement or not, the default value of <span class="cv_-_computer_voice">isbatchserver</span> is <span class="cv_-_computer_voice">false</span>. This means that the following:</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="CS_-_Code_Single_Line"><a name="1115718">&lt;server env="cluster1" serverid="buffy"/&gt;</a></div>
      <div class="LP_-_List_Para"><a name="1070170">is the same as:</a></div>
      <div class="CS_-_Code_Single_Line"><a name="1115708">&lt;server env="cluster1" serverid="buffy" isbatchserver="false"/&gt;</a></div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="ri_-_run_in_header">	2.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="1068764">Checks for a default value defined in the </a><span class="cv_-_computer_voice">systemproperty</span> of type <span class="cv_-_computer_voice">isbatchserver</span>. </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="1068781">If none of the methods succeed, ClaimCenter sets </a><span class="cv_-_computer_voice">isbatchserver</span> to <span class="cv_-_computer_voice">false</span> by default.</div>
      <div class="NW_-_Note_Warning">
        <span class="w_-_warning">WARNING  </span><a name="1385581">You can start the servers in a cluster in any order, unless you have made data model </a>changes. If you have made data model changes, start the batch server first. </div>
      <script type="text/javascript" language="JavaScript1.2">
        <!--
          // Clear related topics
          //
          WWHClearRelatedTopics();

          document.writeln(WWHRelatedTopicsInlineHTML());
        // -->
      </script>
    </div>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag() + WWHALinksDivTag());
      // -->
    </script>
  </body>
</html>