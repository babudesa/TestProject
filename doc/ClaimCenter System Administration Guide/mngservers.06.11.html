<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <!-- MOTW-DISABLED saved from url=(0014)about:internet -->
    <title>Analyzing Server Memory Management</title>
    <link rel="StyleSheet" href="css/mngservers.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        var  WebWorksRootPath = "";
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        // Set reference to top level help frame
        //
        var  WWHFrame = WWHGetWWHFrame("", true);
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
    <!-- THE FOLLOWING IS A GUIDEWIRE STYLE DEFINITION FOR THE LINK TO THIS FEATURE -->
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <!-- THE FOLLOWING IS A GUIDEWIRE GSCRIPT FUNCTION FOR THE LINK TO THIS FEATURE -->
    <script type="text/javascript">
function guidewire_selectall()
{
var text_val=eval("document.linktothisurlform.urlfield");
text_val.focus();
text_val.select();
}
</script>
  </head>
  <body style="" onLoad="WWHUpdate();" onUnload="WWHUnload();" onKeyDown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onKeyPress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onKeyUp="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">
    <!-- THE FOLLOWING IS A GUIDEWIRE DIV FOR THE 'LINK TO THIS' FEATURE -->
    <div id="linkToThisPage" class="popup" style="display: none;">
      <div class="popupTitle">Link Directly to This Page 
           <a href="#" onclick="var thePopup = getElementById('linkToThisPage');thePopup.style.display='none';return false;"><img class="popupClosebox" src="wwhelp/wwhimpl/common/images/close.gif" /></a></div>
      <div style="padding:6px;">
        <div class="popupText" id="linkToThisPageBookmark">An error has occurred if you see this messsage.</div>
        <form name="linktothisurlform" method="post" action="" style="width:275px;margin:0px">
          <input type="text" class="popupURLText" id="linkToThisPageURL" name="urlfield" rows="1" cols="55" onClick="guidewire_selectall();" onFocus="guidewire_selectall();"></input>
        </form>
      </div>
    </div>
    <br />
    <div class="WebWorks_Breadcrumbs" style="text-align: left;">
      <span>ClaimCenter System Administration Guide</span> : 
    <span class="WebWorks_Breadcrumbs" style="text-align: left;"><a class="WebWorks_Breadcrumb_Link" href="mngservers.06.01.html#1618365">Managing ClaimCenter Servers</a> : Analyzing Server Memory Management</span></div>
    <hr align="left" />
    <div>
      <div class="H1_-_Heading_1"><a name="1618365">Analyzing Server Memory Management</a></div>
      <div class="B_-_Body"><a name="1618637">Java provides platform-side memory management that significantly simplifies coding. The JVM (Java Virtual </a>Machine) periodically identifies unused objects and reclaims associated memory. This process is called garbage collection. Garbage collection can have a significant impact on application server performance.</div>
      <div class="B_-_Body"><a name="1618654">This topic describes Java platform garbage collection analysis.</a></div>
      <div class="H2_-_Heading_2"><a name="1618450">Enabling Garbage Collection</a></div>
      <div class="B_-_Body"><a name="1618372">The garbage collector can provide additional information on collection statistics. Careful analysis helps under</a>stand garbage collector behavior. </div>
      <div class="B_-_Body"><a name="1618373">Enable verbose garbage collection by adding the </a><span class="cv_-_computer_voice">-verbose:gc</span> option to the Java Virtual Machine (JVM). Additional details can be found on the site of each JVM vendor.</div>
      <div class="H3_-_Heading_3"><a name="1618374">IBM JVM</a></div>
      <div class="B_-_Body"><a name="1618375">Enable verbose garbage collection by adding the </a><span class="cv_-_computer_voice">-verbose:gc</span> flag to the JVM options. Other options exist for the same functionality.</div>
      <div class="B_-_Body"><a name="1618376">IBM estimates that the overhead associated with using verbose garbage collection is minimal and estimated to be </a>2% of the garbage collection time. In other words, if the JVM spends 5% of its time garbage collecting without verbose garbage collection, it would spend 5.1% of the time garbage collecting with verbose garbage collection.</div>
      <div class="B_-_Body"><a name="1618377">The output provided is in XML format. This output is generally rich enough for a thorough analysis, and no addi</a>tional levels of logging are needed.</div>
      <div class="B_-_Body"><a name="1618378">Used with WebSphere, the IBM JVM outputs garbage collection logs into a file called </a><span class="cv_-_computer_voice">native_stderr.log</span>.</div>
      <div class="B_-_Body"><a name="1618379">IBM provides the IBM Support Assistant. You can install multiple plugins within this tool. Several plugins are </a>available for the IBM JVM and WebSphere. These tools provide deep analysis of JVM behavior, spot issues, and recommend how to tune the JVM.</div>
      <div class="H3_-_Heading_3"><a name="1618381">Oracle Java HotSpot VM</a></div>
      <div class="B_-_Body"><a name="1623674">Enable verbose garbage collection by adding the </a><span class="cv_-_computer_voice">-verbose:gc</span> flag to the Java HotSpot VM options. Several levels of logging exist, providing more or less output.</div>
      <div class="B_-_Body"><a name="1654121">The garbage collection time logs can time stamp the various entries with the exact date. Guidewire recommends </a>the following options:</div>
      <div class="B_-_Body"><span class="cv_-_computer_voice"><a name="1654113">-XX:+PrintGCDetails -XX:+PrintGCDateStamps -XX:+PrintHeapAtGC </a></span><span class="cv_-_computer_voice">-XX:+PrintGCApplicationConcurrentTime -XX:+PrintGCApplicationStoppedTime</span> </div>
      <div class="B_-_Body"><a name="1654144">These options provide the following:</a></div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="1618384">Nature of the garbage collection (minor or full)</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="1618385">Amount of memory reclaimed</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="1618386">Time elapsed since JVM start or date corresponding to the event, depending on available options</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="1618387">Before and after state of the different memory pools (nursery, tenured and permanent)</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="1618388">Amount of time the application runs between collection pauses</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="1618389">Duration of the collection pause</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="1618391">The level of information can be overwhelming, though it is necessary in some cases.</a></div>
      <div class="B_-_Body"><a name="1654171">Add the </a><span class="cv_-_computer_voice">-Xloggc:</span><span class="pc_-_parameter_in_code">file</span> option to redirect output to the specified file.</div>
      <div class="HS_-_Head_Sub"><a name="1618393">Using Tools to Analyze Garbage Collector Behavior</a></div>
      <div class="B_-_Body"><a name="1655167">Verify that the performance analysis tool you choose supports the version of the JVM that you use for </a>ClaimCenter. For supported JVM versions, see <a href="javascript:WWHClickedPopup('install', 'preinstall.6.4.html#2173620', '');" title="Installing Java">“Installing Java” in the </a><span class="bt_-_book_title"><a href="javascript:WWHClickedPopup('install', 'preinstall.6.4.html#2173620', '');" title="Installing Java">Installation Guide</a></span> and <a href="javascript:WWHClickedPopup('install', 'preinstall.6.2.html#2279072', '');" title="Required Software and Hardware">“Application Server Requirements” in the </a><span class="bt_-_book_title"><a href="javascript:WWHClickedPopup('install', 'preinstall.6.2.html#2279072', '');" title="Required Software and Hardware">Installation Guide</a></span>.</div>
      <div class="H3_-_Heading_3"><a name="1655171">IBM Support Assistant</a></div>
      <div class="B_-_Body"><a name="1654242">IBM provides the IBM Support Assistant Workbench. Multiple plugin tools can be installed within the work</a>bench. The “IBM Monitoring and Diagnostic Tools for Java – Garbage Collection and Memory Visualizer” is the tool to use to analyze garbage collection logs.</div>
      <div class="B_-_Body"><a name="1654289">The tool provides some tuning recommendations. The recommendations are more adapted for the IBM JDK than </a>the HotSpot JDK. Additionally, the tool provides graphs with hints on JVM behavior that help identify issues such as memory shortages or excessive pauses.</div>
      <div class="B_-_Body"><a name="1654380">Refer to </a><span class="cv_-_computer_voice">http://www-01.ibm.com/software/support/isa/</span> for more information about the IBM Support Assistant.</div>
      <div class="H3_-_Heading_3"><a name="1654334">HPjmeter and GCViewer</a></div>
      <div class="B_-_Body"><a name="1654335">HPjmeter and GCViewerare tools that enable you to visually analyze the HotSpot JDK garbage collection logs. </a>Both tools generate:</div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="1654337">Key metrics about the period (number of minor/major collections, percent of time spent paused, and so forth)</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="1654338">Visual representation of the different garbage collections</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="1654339">These tools might require using different verbose garbage collection options. Otherwise, HPjmeter or GCViewer </a>might not be able to analyze the corresponding output.</div>
      <div class="B_-_Body"><a name="1654406">Refer to the following URLs for more information:</a></div>
      <div class="B_-_Body"><span class="s_-_strong"><a name="1654413">HPjmeter:</a></span> <span class="cv_-_computer_voice">http://docs.hp.com/en/5992-5899/index.html</span></div>
      <div class="B_-_Body"><span class="s_-_strong"><a name="1654432">GCViewer:</a></span> <span class="cv_-_computer_voice">http://www.tagtraum.com/gcviewer.html</span></div>
      <div class="H2_-_Heading_2"><a name="1654485">Analyzing a Possible Memory Leak</a></div>
      <div class="B_-_Body"><a name="1655221">Guidewire applications are memory-intensive. Guidewire applications generally require larger heaps than most </a>other Java applications. </div>
      <div class="B_-_Body"><a name="1654489">Garbage collection logs might show that memory usage grows significantly over time, resulting in a lack of </a>available memory. This condition is commonly described as a memory leak. A dump of all used objects, called a “heap dump”, must collected to identify all objects in the heap. This heap dump is then analyzed by developers familiar with ClaimCenter or additional code. Such analysis helps identify excessive memory usage, identify its root cause and possibly find a change that will avoid such issues.</div>
      <div class="B_-_Body"><a name="1654494">Investigation of memory leaks differs slightly per JVM platform.</a></div>
      <div class="H3_-_Heading_3"><a name="1654495">Common approach</a></div>
      <div class="B_-_Body"><a name="1654496">Various options exist to generate a heap dump:</a></div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="1654497">Specific flags can be set to force the following behaviors:</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI2_-_Bullet_Item_002c_Level_2_outer" style="margin-left: 67pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner"><a name="1654498">Heap dump generation when the heap is full and an out-of-memory condition occurs</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI2_-_Bullet_Item_002c_Level_2_outer" style="margin-left: 67pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner"><a name="1654499">Heap dump generation when a </a><span class="cv_-_computer_voice">CTRL-BREAK</span> or SIGQUIT is issued to the JVM process.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LP_-_List_Para"><a name="1654500">These options are combined with options instructing the JVM to generate the heap dump at a specific direc</a>tory location.</div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="1654502">Tools can connect to a running JVM. Such tools provide the option to trigger a heap dump.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="H3_-_Heading_3"><a name="1654503">Generating Heap Dumps with IBM JDK</a></div>
      <div class="B_-_Body"><a name="1654504">The IBM JVM capabilities to generate heap dumps are satisfactory for all release levels that Guidewire has </a>worked with. For information on generating heap dumps for IBM JDK 1.6, refer to "<span class="bt_-_book_title">IBM Developer Kit and </span><span class="bt_-_book_title">Runtime Environment, Java Technology Edition, Version 6</span>" at <span class="cv_-_computer_voice">http://public.dhe.ibm.com/software/dw/</span><span class="cv_-_computer_voice">jdk/diagnosis/diag60.pdf</span>.</div>
      <div class="H3_-_Heading_3"><a name="1654507">Generating Heap Dumps with Oracle HotSpot JDK</a></div>
      <div class="B_-_Body"><a name="1655280">Flags </a><span class="cv_-_computer_voice">HeapDumpOnOutOfMemoryError</span> and <span class="cv_-_computer_voice">HeapDumpOnCtrlBreak</span> can be used for heap dump generation.</div>
      <div class="B_-_Body"><a name="1655292">For more information about analyzing heap dumps refer to Oracle document </a><span class="bt_-_book_title">Troubleshooting Guide for Java SE </span><span class="bt_-_book_title">6 with HotSpotVM</span> at <span class="cv_-_computer_voice">http://www.oracle.com/technetwork/java/javase/tsg-vm-149989.pdf</span>.</div>
      <div class="H3_-_Heading_3"><a name="1654694">Additional Recommendations</a></div>
      <div class="B_-_Body"><a name="1654695">When generating heap dumps, pay attention to the following facts:</a></div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="1654696">Heap dump generation frequently fails because the single file generated is very large and the supporting envi</a>ronment is configured to prevent regular accounts to create such large files. Therefore, some configuration is generally required to allow the account running the node to create such large files.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="1654700">The generation of a heap dump during out-of-memory conditions is sometimes challenging. As a JVM is </a>reaching maximum memory utilization, it generally experiences severely degraded performance. As the pace of the leak decreases gradually, the occurrence of the out-of-memory condition might take an inordinate amount of time. This length of time might be incompatible with the need to restore performance for users or processes.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="1654705">Windows only: Windows does not support signals. Therefore, generating a heap by starting the JVM with a </a>heap dump on <span class="cv_-_computer_voice">CTRL-BREAK</span>, depends on the capacity to send a <span class="cv_-_computer_voice">CTRL-BREAK</span>. You cannot send a a <span class="cv_-_computer_voice">CTRL-BREAK</span> to a JVM started as a background process. Therefore, for the time of the investigation, start the JVM from a command line rather than as a background process.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="1654710">The JVM generally provides optional flags that prevent it from listening to signals. Disable these flags while </a>trying to generate a heap dump through signals.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="1654712">Heap dump analysis is very memory intensive. Assume that the tool used to analyze the heap dump might </a>need a heap two to three times larger than the amount of objects captured in the heap dump. Host the heap dump analyzer on a server with a 64-bit JVM and a significant amount of memory. If such a configuration is not available, you might want to reduce the heap size so that the memory leak reaches an identifiable threshold sooner. This method allows the generation of smaller, easier to analyze heap dumps.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="1654718">Heap dump analysis tools generally point to the </a><span class="cv_-_computer_voice">CacheImpl</span> class as the largest memory consumer. This class corresponds to the Guidewire cache. It is normal that the cache consumes a few hundred megabytes. In this case, the memory issue is likely not caused by cache growth. If the cache consumes significantly more memory, you might need to be downsize the cache. See <a href="javascript:WWHClickedPopup('admin', 'mngservers.06.10.html#1612208', '');" title="Understanding Application Server Caching">"Understanding Application Server Caching"</a>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="H3_-_Heading_3"><a name="1654722">Heap Dump Generation and Analysis Tools</a></div>
      <div class="B_-_Body"><a name="1654723">Several tools are available for heap dump generation and analysis. IBM and Oracle provide some tools to assist </a>with these tasks on their respective JVMs. Some tools are provided by other vendors and aim to assist with these tasks on the most common JVM platforms.</div>
      <div class="HS_-_Head_Sub"><a name="1655331">IBM-only Tools</a></div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="1655332">IBM Support Assistant provides some plug-in tools that can assist with heap dump analysis. Refer to </a><span class="cv_-_computer_voice">http:/</span><span class="cv_-_computer_voice">/www-306.ibm.com/software/support/isa/</span>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="1655333">IBM DTJF adapter for Eclipse Memory Analyzer allows the Eclipse Memory Analyzer to analyze IBM JVM </a>heap dumps. You can tune that tool to use a larger heap, which is frequently necessary to analyze very large heap dumps. Refer to <span class="cv_-_computer_voice">http://www.ibm.com/developerworks/java/jdk/tools/mat.html</span>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="HS_-_Head_Sub"><a name="1654727">Oracle-only Tools</a></div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="1654989">jConsole is a management tool that connects to a running Java HotSpot VM. You can trigger a heap dump </a>using jConsole. Refer to <span class="bt_-_book_title">Using JConsole to Monitor Applications</span> at <span class="cv_-_computer_voice">http://java.sun.com/developer/</span><span class="cv_-_computer_voice">technicalArticles/J2SE/jconsole.html</span>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="1654730">Oracle bundles the Heap Analysis Tool (HAT) with Java HotSpot VM 1.6. Therefore, if you want to analyze </a>a heap with HAT, you can install Java HotSpot VM 1.6 and use the HAT release provided. Refer to the article <span class="bt_-_book_title">Heap Analysis Tool</span> at <span class="cv_-_computer_voice">https://hat.dev.java.net/</span> for more information.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="1655032">jVisualVM is another multi-purpose tool that you can use to analyze heap dumps. Refer to </a><span class="bt_-_book_title">JVisualVM </span>at <span class="cv_-_computer_voice">http://java.sun.com/javase/6/docs/technotes/guides/visualvm/index.html</span>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="HS_-_Head_Sub"><a name="1654744">Generic tools</a></div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="1654745">YourKit is a commercial product that provides many functions. You can use YourKit to connect to the JVM, </a>analyze the JVM and trigger heap dumps. It also provides some very interesting heap dump analysis tools.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="1654748">JProbe is another commercial product providing many capabilities, including heap dump analysis.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="1654750">Guidewire development mainly uses YourKit with good success. Guidewire Support uses YourKit and several </a>other products like jVisualVM, IBM DTJF adapter and JProbe.</div>
      <div class="H2_-_Heading_2"><a name="1618414">Profiling</a></div>
      <div class="B_-_Body"><a name="1618415">Java profilers are available for two main purposes:</a></div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="1618416">Memory profiling: profilers allow identifying memory usage and more specifically memory leaks due to </a>referenced but unused objects.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="1618417">CPU profiling: profilers help identify programmatic hot spots/bottlenecks. This analysis might help remove </a>the corresponding bottlenecks thereby increasing performance.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="1659073">Guidewire has internally used two profiling tools that it found to be of good quality. Both tools provide both </a>memory and CPU profiling:</div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="1659074">YourKit is preferred for memory profiling.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="1659075">JProfiler is preferred for CPU profiling.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="H2_-_Heading_2"><a name="1659065">Tracking Large Objects</a></div>
      <div class="B_-_Body"><a name="1618423">Large Java objects cause an extra strain on the JVM for various reasons. If garbage collection analysis shows that </a>the JVM is allocating very large objects, investigate this further and understand the source of the objects.</div>
      <div class="B_-_Body"><a name="1618427">&nbsp;</a></div>
      <script type="text/javascript" language="JavaScript1.2">
        <!--
          // Clear related topics
          //
          WWHClearRelatedTopics();

          document.writeln(WWHRelatedTopicsInlineHTML());
        // -->
      </script>
    </div>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag() + WWHALinksDivTag());
      // -->
    </script>
  </body>
</html>