<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <!-- MOTW-DISABLED saved from url=(0014)about:internet -->
    <title>Configuring Distributed Work Queues</title>
    <link rel="StyleSheet" href="css/batch.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        var  WebWorksRootPath = "";
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        // Set reference to top level help frame
        //
        var  WWHFrame = WWHGetWWHFrame("", true);
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
    <!-- THE FOLLOWING IS A GUIDEWIRE STYLE DEFINITION FOR THE LINK TO THIS FEATURE -->
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <!-- THE FOLLOWING IS A GUIDEWIRE GSCRIPT FUNCTION FOR THE LINK TO THIS FEATURE -->
    <script type="text/javascript">
function guidewire_selectall()
{
var text_val=eval("document.linktothisurlform.urlfield");
text_val.focus();
text_val.select();
}
</script>
  </head>
  <body onLoad="WWHUpdate();" onUnload="WWHUnload();" onKeyDown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onKeyPress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onKeyUp="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">
    <!-- THE FOLLOWING IS A GUIDEWIRE DIV FOR THE 'LINK TO THIS' FEATURE -->
    <div id="linkToThisPage" class="popup" style="display: none;">
      <div class="popupTitle">Link Directly to This Page 
           <a href="#" onclick="var thePopup = getElementById('linkToThisPage');thePopup.style.display='none';return false;"><img class="popupClosebox" src="wwhelp/wwhimpl/common/images/close.gif" /></a></div>
      <div style="padding:6px;">
        <div class="popupText" id="linkToThisPageBookmark">An error has occurred if you see this messsage.</div>
        <form name="linktothisurlform" method="post" action="" style="width:275px;margin:0px">
          <input type="text" class="popupURLText" id="linkToThisPageURL" name="urlfield" rows="1" cols="55" onClick="guidewire_selectall();" onFocus="guidewire_selectall();"></input>
        </form>
      </div>
    </div>
    <br />
    <div class="WebWorks_Breadcrumbs" style="text-align: left;">
      <span>ClaimCenter System Administration Guide</span> : 
    <span class="WebWorks_Breadcrumbs" style="text-align: left;"><a class="WebWorks_Breadcrumb_Link" href="batch.13.01.html#1763773">Batch Processes and Work Queues</a> : Configuring Distributed Work Queues</span></div>
    <hr align="left" />
    <blockquote>
      <div class="H1_-_Heading_1"><a name="1763773">Configuring Distributed Work Queues</a></div>
      <div class="B_-_Body"><a name="1763774">To configure a distributed work queue, you configure a schedule for the writer batch process, the </a><span class="cv_-_computer_voice">progressinterval</span> of the work queue, and the worker processes. Configure the writer batch process schedule in the <span class="cv_-_computer_voice">scheduler-config.xml</span> file, just as you would any other batch process. See <a href="javascript:WWHClickedPopup('admin', 'batch.13.07.html#1030716', '');" title="Scheduling Batch Processes and Distributed Work Queues">“Scheduling Batch Processes and Distributed Work Queues”</a>. Configure worker processes in the <span class="cv_-_computer_voice">work-queue.xml</span> file. Both files can be accessed from the Guidewire Studio <span class="ui_-_UI_element">Resources</span> pane under <span class="ui_-_UI_element">configuration</span> → <span class="ui_-_UI_element">Other Resources</span>.<span class="ui_-_UI_element"> </span>After you edit either file, you must rebuild and redeploy ClaimCenter.</div>
      <div class="B_-_Body"><a name="1739135">Each distributed work queue has its own configuration structure in </a><span class="cv_-_computer_voice">work-queue.xml</span>. </div>
      <PRE class="CF_-_Code_First_Line"><a name="1739136">&lt;work-queue workQueueClass="</a><span class="pc_-_parameter_in_code">string</span>" progressinterval="<span class="pc_-_parameter_in_code">decimal</span>"&gt;</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1739137">&nbsp;</a>&nbsp;&lt;worker instances="<span class="pc_-_parameter_in_code">integer</span>" throttleinterval="<span class="pc_-_parameter_in_code">decimal</span>" env="<span class="pc_-_parameter_in_code">string</span>" server="<span class="pc_-_parameter_in_code">string</span>"/&gt;</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1739138">&nbsp;</a>&nbsp;...</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1739139">&nbsp;</a>&nbsp;&lt;worker instances="<span class="pc_-_parameter_in_code">integer</span>" throttleinterval="<span class="pc_-_parameter_in_code">decimal</span>" env="<span class="pc_-_parameter_in_code">string</span>" server="<span class="pc_-_parameter_in_code">string</span>"/&gt;</PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="1739140">&lt;/work-queue&gt;</a></PRE>
      <div class="B_-_Body"><a name="1763961">The </a><span class="cv_-_computer_voice">work-queue</span> element takes a required <span class="cv_-_computer_voice">workQueueClass</span> and <span class="cv_-_computer_voice">progressinterval</span> value.</div>
      <div class="B_-_Body"><a name="1763975">The </a><span class="cv_-_computer_voice">workQueueClass</span> must be one of the Guidewire-provided work queue classes listed in <span class="cv_-_computer_voice">work-queue.xml</span>. These work queue classes implement the <span class="cv_-_computer_voice">BatchProcess</span> interface. You cannot configure custom batch processes as distributed work queues. You also cannot configure Guidewire-provided batch processes as distributed work queues if they are not already defined as distributed work queues in <span class="cv_-_computer_voice">work-queue.xml</span>.</div>
      <div class="B_-_Body"><a name="1763956">The </a><span class="cv_-_computer_voice">progressinterval</span> value is the amount of time, in milliseconds, that ClaimCenter allots for a worker to process <span class="cv_-_computer_voice">batchsize</span> work items. If the time a worker has held a batch of items exceeds the <span class="cv_-_computer_voice">progressinterval</span>, then ClaimCenter considers the work items orphans. ClaimCenter reassigns the orphan work items to a new worker instance. Therefore, set the <span class="cv_-_computer_voice">progressinterval</span> larger than the longest time required to process a work item multiplied by the <span class="cv_-_computer_voice">batchsize</span>.</div>
      <div class="B_-_Body"><a name="1763655">The </a><span class="cv_-_computer_voice">workItemRetryLimit</span> parameter in <span class="cv_-_computer_voice">config.xml</span> defines a limit on the number of times that work queues retry processing an orphaned work item.</div>
      <div class="B_-_Body"><a name="1631764">For each work queue, you can declare as many worker instances as you want, specifying on which server and </a>environment each one runs. If you do not specify a worker for a queue, or you do not specify the <span class="cv_-_computer_voice">env</span> and <span class="cv_-_computer_voice">server</span> attributes, ClaimCenter starts a single instance on the batch server. See <a href="javascript:WWHClickedPopup('admin', 'configndeploy.04.3.html#1179772', '');" title="Defining the Application Server Environment">“Using the registry Element to Specify Environment Properties”</a> for information about the <span class="cv_-_computer_voice">env</span> and <span class="cv_-_computer_voice">server</span> attributes. The <span class="cv_-_computer_voice">worker</span> subelements take the following attributes, all of which are optional:</div>
      <div class="T_-_Table"><a name="1631797">&nbsp;</a></div>
      <table class="Shading" style="text-align: left" cellspacing="10" summary="">
        <caption></caption>
        <tr>
          <td style="padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: bottom">
            <div class="TH_-_Table_Heading"><a name="1638387">Attribute</a></div>
          </td>
          <td style="padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: bottom">
            <div class="TH_-_Table_Heading"><a name="1638389">Description</a></div>
          </td>
        </tr>
        <tr>
          <td style="background-color: #F7F7F7; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text" style="color: #000000; font-family: &quot;Lucida Sans Typewriter&quot;; font-style: normal; font-variant: normal; font-weight: normal; margin-top: 3.0pt; text-transform: none; vertical-align: baseline"><span class="cvt_-_computer_voice_table"><a name="1631770">instances</a></span></div>
          </td>
          <td style="background-color: #F7F7F7; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="1631772">The number of workers to create. By default, ClaimCenter always creates at least one worker.</a></div>
          </td>
        </tr>
        <tr>
          <td style="padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text" style="color: #000000; font-family: &quot;Lucida Sans Typewriter&quot;; font-style: normal; font-variant: normal; font-weight: normal; margin-top: 3.0pt; text-transform: none; vertical-align: baseline"><span class="cvt_-_computer_voice_table"><a name="1631774">minpollinterval</a></span></div>
          </td>
          <td style="padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="1631776">How long, in milliseconds, a worker must sleep after exhausting all work items, ignoring notifications, </a>before waking up and polling the database again for more work items. For a system generating many work items and notifications and configured with many workers, increase this attribute from the default value of 0. This reduces unnecessary load on the database. The expected latency to process a work item is <span class="cvt_-_computer_voice_table">minpollinterval</span> / <span class="cvt_-_computer_voice_table">instances</span>.</div>
          </td>
        </tr>
        <tr>
          <td style="background-color: #F7F7F7; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text" style="color: #000000; font-family: &quot;Lucida Sans Typewriter&quot;; font-style: normal; font-variant: normal; font-weight: normal; margin-top: 3.0pt; text-transform: none; vertical-align: baseline"><span class="cvt_-_computer_voice_table"><a name="1631778">maxpollinterval</a></span></div>
          </td>
          <td style="background-color: #F7F7F7; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="1631780">How often workers wake up automatically, even if the workers receive no notification. This default </a>might not be appropriate for large numbers of workers. You might need to increase <span class="cvt_-_computer_voice_table">maxpollinterval</span> to prevent excessive numbers of queries for work items. The default <span class="cvt_-_computer_voice_table">maxpollinterval</span> is 60,000 milliseconds.</div>
          </td>
        </tr>
        <tr>
          <td style="padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text" style="color: #000000; font-family: &quot;Lucida Sans Typewriter&quot;; font-style: normal; font-variant: normal; font-weight: normal; margin-top: 3.0pt; text-transform: none; vertical-align: baseline"><span class="cvt_-_computer_voice_table"><a name="1631782">throttleinterval</a></span></div>
          </td>
          <td style="padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="1631784">The delay between processing workitems in milliseconds. The value controls how long the process </a>sleeps. A value of 0 (zero) means worker processes work items as rapidly as possible. To reduce the CPU load, set the <span class="cvt_-_computer_voice_table">throttleinterval</span> to a positive value.</div>
          </td>
        </tr>
        <tr>
          <td style="background-color: #F7F7F7; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text" style="color: #000000; font-family: &quot;Lucida Sans Typewriter&quot;; font-style: normal; font-variant: normal; font-weight: normal; margin-top: 3.0pt; text-transform: none; vertical-align: baseline"><span class="cvt_-_computer_voice_table"><a name="1631786">batchsize</a></span></div>
          </td>
          <td style="background-color: #F7F7F7; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="1631788">How many work items the worker attempts to check out while searching for more work items. Larger </a>batch sizes are more efficient, but might not result in good load distribution. The default <span class="cvt_-_computer_voice_table">batchsize</span> is 10.</div>
          </td>
        </tr>
        <tr>
          <td style="padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text" style="color: #000000; font-family: &quot;Lucida Sans Typewriter&quot;; font-style: normal; font-variant: normal; font-weight: normal; margin-top: 3.0pt; text-transform: none; vertical-align: baseline"><span class="cvt_-_computer_voice_table"><a name="1631790">env</a></span></div>
          </td>
          <td style="padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="1631792">The environment in which this particular worker is active.</a></div>
          </td>
        </tr>
        <tr>
          <td style="background-color: #F7F7F7; border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 1px; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text" style="color: #000000; font-family: &quot;Lucida Sans Typewriter&quot;; font-style: normal; font-variant: normal; font-weight: normal; margin-top: 3.0pt; text-transform: none; vertical-align: baseline"><span class="cvt_-_computer_voice_table"><a name="1631794">server</a></span></div>
          </td>
          <td style="background-color: #F7F7F7; border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 1px; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="1631796">The server on which this particular worker is active.</a></div>
          </td>
        </tr>
      </table>
      <div class="B_-_Body"><a name="1733651">You can dynamically configure work queues by using web services. See </a><a href="javascript:WWHClickedPopup('integration', 'webservices-general.06.4.html#2719149', '');" title="Maintenance Web Services">“Manipulating Work Queues Using Web Services” in the </a><span class="bt_-_book_title"><a href="javascript:WWHClickedPopup('integration', 'webservices-general.06.4.html#2719149', '');" title="Maintenance Web Services">Integration Guide</a></span>.</div>
      <script type="text/javascript" language="JavaScript1.2">
        <!--
          // Clear related topics
          //
          WWHClearRelatedTopics();

          document.writeln(WWHRelatedTopicsInlineHTML());
        // -->
      </script>
    </blockquote>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag() + WWHALinksDivTag());
      // -->
    </script>
  </body>
</html>