<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <!-- MOTW-DISABLED saved from url=(0014)about:internet -->
    <title>Using an Archive Database as the Main Database</title>
    <link rel="StyleSheet" href="css/archiving.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        var  WebWorksRootPath = "";
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        // Set reference to top level help frame
        //
        var  WWHFrame = WWHGetWWHFrame("", true);
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
    <!-- THE FOLLOWING IS A GUIDEWIRE STYLE DEFINITION FOR THE LINK TO THIS FEATURE -->
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <!-- THE FOLLOWING IS A GUIDEWIRE GSCRIPT FUNCTION FOR THE LINK TO THIS FEATURE -->
    <script type="text/javascript">
function guidewire_selectall()
{
var text_val=eval("document.linktothisurlform.urlfield");
text_val.focus();
text_val.select();
}
</script>
  </head>
  <body style="" onLoad="WWHUpdate();" onUnload="WWHUnload();" onKeyDown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onKeyPress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onKeyUp="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">
    <!-- THE FOLLOWING IS A GUIDEWIRE DIV FOR THE 'LINK TO THIS' FEATURE -->
    <div id="linkToThisPage" class="popup" style="display: none;">
      <div class="popupTitle">Link Directly to This Page 
           <a href="#" onclick="var thePopup = getElementById('linkToThisPage');thePopup.style.display='none';return false;"><img class="popupClosebox" src="wwhelp/wwhimpl/common/images/close.gif" /></a></div>
      <div style="padding:6px;">
        <div class="popupText" id="linkToThisPageBookmark">An error has occurred if you see this messsage.</div>
        <form name="linktothisurlform" method="post" action="" style="width:275px;margin:0px">
          <input type="text" class="popupURLText" id="linkToThisPageURL" name="urlfield" rows="1" cols="55" onClick="guidewire_selectall();" onFocus="guidewire_selectall();"></input>
        </form>
      </div>
    </div>
    <br />
    <div class="WebWorks_Breadcrumbs" style="text-align: left;">
      <span>ClaimCenter System Administration Guide</span> : 
    <span class="WebWorks_Breadcrumbs" style="text-align: left;"><a class="WebWorks_Breadcrumb_Link" href="archiving.13.1.html#4637393">Archiving Claims</a> : Using an Archive Database as the Main Database</span></div>
    <hr align="left" />
    <div>
      <div class="H1_-_Heading_1"><a name="4637393">Using an Archive Database as the Main Database</a></div>
      <div class="B_-_Body"><a name="4637397">Since the active and archive databases have the same schema, you can run ClaimCenter against an archive data</a>base instead of the active database. This is called <span class="e_-_emphasis">archive mode</span>. There are several reasons to do this:</div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="4415950">Start the server in archive mode to upgrade an archive database (either from a new schema or from a previous </a>version). After the archive database has been upgraded, the state of the link from a server not in archive mode is <span class="cv_-_computer_voice">Linked</span>, or <span class="cv_-_computer_voice">Link Broken</span> if the database link is broken.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="4638411">Archive mode is the only way to obtain database statistics, such as a data distribution report, on the archive </a>database.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="4423776">Archive mode enables you to run features, such as advanced search, on the archive database. </a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="NW_-_Note_Warning">
        <span class="w_-_warning">WARNING  </span><a name="4628028">Never modify any data or purge claims from the archive database. Instead, in normal </a>mode, restore claims to the main database and then modify or purge them. See <a href="javascript:WWHClickedPopup('admin', 'archiving.13.5.html#4422227', '');" title="Restoring from the Command Line">"Restoring from the Command Line"</a> of this guide and <a href="javascript:WWHClickedPopup('app', 'archiving.14.4.html#4420940', '');" title="Restoring Archived Claims">“Restoring Archived Claims” in the </a><span class="bt_-_book_title"><a href="javascript:WWHClickedPopup('app', 'archiving.14.4.html#4420940', '');" title="Restoring Archived Claims">Application Guide</a></span>.</div>
      <div class="B_-_Body"><a name="4581674">There are two ways to configure ClaimCenter to use the archive database as the main repository.</a></div>
      <div class="B_-_Body"><a name="4613886">You can use the </a><span class="cv_-_computer_voice">registry</span> element in <span class="cv_-_computer_voice">config.xml</span> to set the server attribute <span class="cv_-_computer_voice">isarchiveserver=true</span> for one environment. Then, launch the application server, passing the name of that environment to a <span class="cv_-_computer_voice">-Denv</span> JVM parameter. For example, you could configure the following in <span class="cv_-_computer_voice">config.xml</span>:</div>
      <PRE class="CF_-_Code_First_Line"><a name="4613901">&lt;registry&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="4613902">   &lt;server serverid="</a><span class="pc_-_parameter_in_code">server name</span>" env="prod" isbatchserver="true" isarchiveserver="false"/&gt;</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="4613903">   &lt;server serverid="</a><span class="pc_-_parameter_in_code">server name</span>" env="archive" isbatchserver="false" isarchiveserver="true"/&gt;</PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="4613904">&lt;/registry&gt;</a></PRE>
      <div class="B_-_Body"><a name="4613899">With the registry defined as shown, you can start the application server in archive mode by passing the JVM </a>parameter <span class="cv_-_computer_voice">-Denv=archive</span> as you start the server. </div>
      <div class="B_-_Body"><a name="4613917">Alternatively, you can set the </a><span class="cv_-_computer_voice">ArchiveServer</span> parameter to <span class="cv_-_computer_voice">true</span> within <span class="cv_-_computer_voice">config.xml</span>:</div>
      <div class="CS_-_Code_Single_Line"><a name="4613896">&lt;param name="ArchiveServer" value="true"/&gt;</a></div>
      <div class="B_-_Body"><a name="4613893">If you follow the second option, you must set </a><span class="cv_-_computer_voice">ArchiveServer</span> to <span class="cv_-_computer_voice">false</span> if you want the server to use the main repository again.</div>
      <div class="B_-_Body"><a name="4640336">Only users in the </a><span class="cv_-_computer_voice">archive admin</span> group are allowed to login with the server in archive mode. Guidewire strongly recommends that you restrict use of the server in archive mode so as not to affect production data. In archive mode, ClaimCenter does not progress past the <span class="cv_-_computer_voice">NODAEMONS</span> run level. This run level disables the scheduler and work queues among other things. Additionally, archive mode disables the <span class="ui_-_UI_element">Batch Process Info</span> page to prevent manually launching a batch process.</div>
      <script type="text/javascript" language="JavaScript1.2">
        <!--
          // Clear related topics
          //
          WWHClearRelatedTopics();

          document.writeln(WWHRelatedTopicsInlineHTML());
        // -->
      </script>
    </div>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag() + WWHALinksDivTag());
      // -->
    </script>
  </body>
</html>