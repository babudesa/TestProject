<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <!-- MOTW-DISABLED saved from url=(0014)about:internet -->
    <title>Checking Database Consistency</title>
    <link rel="StyleSheet" href="css/database.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        var  WebWorksRootPath = "";
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        // Set reference to top level help frame
        //
        var  WWHFrame = WWHGetWWHFrame("", true);
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
    <!-- THE FOLLOWING IS A GUIDEWIRE STYLE DEFINITION FOR THE LINK TO THIS FEATURE -->
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <!-- THE FOLLOWING IS A GUIDEWIRE GSCRIPT FUNCTION FOR THE LINK TO THIS FEATURE -->
    <script type="text/javascript">
function guidewire_selectall()
{
var text_val=eval("document.linktothisurlform.urlfield");
text_val.focus();
text_val.select();
}
</script>
  </head>
  <body onLoad="WWHUpdate();" onUnload="WWHUnload();" onKeyDown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onKeyPress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onKeyUp="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">
    <!-- THE FOLLOWING IS A GUIDEWIRE DIV FOR THE 'LINK TO THIS' FEATURE -->
    <div id="linkToThisPage" class="popup" style="display: none;">
      <div class="popupTitle">Link Directly to This Page 
           <a href="#" onclick="var thePopup = getElementById('linkToThisPage');thePopup.style.display='none';return false;"><img class="popupClosebox" src="wwhelp/wwhimpl/common/images/close.gif" /></a></div>
      <div style="padding:6px;">
        <div class="popupText" id="linkToThisPageBookmark">An error has occurred if you see this messsage.</div>
        <form name="linktothisurlform" method="post" action="" style="width:275px;margin:0px">
          <input type="text" class="popupURLText" id="linkToThisPageURL" name="urlfield" rows="1" cols="55" onClick="guidewire_selectall();" onFocus="guidewire_selectall();"></input>
        </form>
      </div>
    </div>
    <br />
    <div class="WebWorks_Breadcrumbs" style="text-align: left;">
      <span>ClaimCenter System Administration Guide</span> : 
    <span class="WebWorks_Breadcrumbs" style="text-align: left;"><a class="WebWorks_Breadcrumb_Link" href="database.06.01.html#1199437">Configuring and Maintaining the ClaimCenter Database</a> : Checking Database Consistency</span></div>
    <hr align="left" />
    <blockquote>
      <div class="H1_-_Heading_1"><a name="1199437">Checking Database Consistency</a></div>
      <div class="B_-_Body"><a name="1250662">ClaimCenter includes a number of database consistency checks. These checks determine if any unusual condi</a>tions exist in the ClaimCenter database such as orphaned child records or inconsistencies between properties. Problems reported by the checks are sent to the console and logged in the <span class="cv_-_computer_voice">cclog.log</span> file. This mode is especially useful during trial periods or for testing converted data. </div>
      <div class="B_-_Body"><a name="1250669">Check the database consistency on a regular basis to identify potential problems. Run consistency checks before </a>and after a database upgrade and before importing data into a production database.</div>
      <div class="H2_-_Heading_2"><a name="1250671">Running Consistency Checks with System Tools</a></div>
      <div class="B_-_Body"><a name="1250672">To launch database consistency checks from the command line, use one of the following commands:</a></div>
      <div class="CS_-_Code_Single_Line"><span class="cv_-_computer_voice"><a name="1250673">system_tools</a></span> <span class="cv_-_computer_voice">-checkdbconsistency</span> -password <span class="pc_-_parameter_in_code">password</span></div>
      <div class="CS_-_Code_Single_Line"><span class="cv_-_computer_voice"><a name="1250674">system_tools</a></span> <span class="cv_-_computer_voice">-checkdbconsistencyasbatch </span>-password <span class="pc_-_parameter_in_code">password</span></div>
      <div class="B_-_Body"><a name="1250680">The </a><span class="cv_-_computer_voice">system_tools</span> utility is located in the <span class="cv_-_computer_voice">ClaimCenter/admin/bin</span> folder. See <a href="javascript:WWHClickedPopup('admin', 'commandsref.15.06.html#1350094', '');" title="system_tools Command">“system_tools Command”</a> for more information.</div>
      <div class="B_-_Body"><a name="1250682">The </a><span class="cv_-_computer_voice">-checkdbconsistency</span> option runs synchronously, waiting for completion before returning to the command line. The <span class="cv_-_computer_voice">-checkdbconsistencyasbatch</span> option runs consistency checks as an asynchronous batch process. Other than that distinction, the options and their optional arguments are the same.</div>
      <div class="B_-_Body"><a name="1250683">This tool has two optional arguments:</a></div>
      <div class="CS_-_Code_Single_Line"><a name="1250684">-checkdbconsistency </a><span class="pc_-_parameter_in_code">tableSelection</span> <span class="pc_-_parameter_in_code">checkTypeSelection</span></div>
      <div class="B_-_Body"><a name="1250685">The </a><span class="ps_-_parameter_in_code_snippets">tableSelection</span> argument can be specified as:</div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="cv_-_computer_voice"><a name="1250686">all</a></span> – Run consistency checks on all tables.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="ps_-_parameter_in_code_snippets"><a name="1250687">table name</a></span> – The name of a single table on which to run checks.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="cv_-_computer_voice"><a name="1250688">tg.</a></span><span class="ps_-_parameter_in_code_snippets">table group name</span> – The name of a table group. Table groups are defined in the <span class="cv_-_computer_voice">database</span> element of <span class="cv_-_computer_voice">config.xml</span>. For more information, see <a href="javascript:WWHClickedPopup('install', 'install.6.04.html#2269476', '');" title="The database Element">“Defining Table Groups” in the </a><span class="bt_-_book_title"><a href="javascript:WWHClickedPopup('install', 'install.6.04.html#2269476', '');" title="The database Element">Installation Guide</a></span>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="cv_-_computer_voice"><a name="1250692">@</a></span><span class="ps_-_parameter_in_code_snippets">file name</span> – A file name with one or more valid table names or table group names entered in comma-separated values (CSV) format. Prefix table group names with <span class="cv_-_computer_voice">tg.</span>, such as <span class="cv_-_computer_voice">tg.MyTableGroup</span>. You can combine table groups and individual table names in the same file.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="1250693">The </a><span class="ps_-_parameter_in_code_snippets">checkTypeSelection</span> can be specified as:</div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="cv_-_computer_voice"><a name="1250694">all</a></span> – Run all consistency checks on the specified tables.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="ps_-_parameter_in_code_snippets"><a name="1250695">check name</a></span> – The typecode value of a single consistency check to run.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="cv_-_computer_voice"><a name="1250696">@</a></span><span class="ps_-_parameter_in_code_snippets">file name</span> – A file name with one or more valid consistency check names entered in comma-separated values (CSV) format.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="1250697">If you specify one optional argument, you must specify both.</a></div>
      <div class="B_-_Body"><a name="1250698">Use the typecode value to specify a consistency check type as an argument or in a file. To see which consistency </a>check types are available for each table, search for the table on the <span class="ui_-_UI_element">View consistency checks definitions</span> tab of the <span class="ui_-_UI_element">Info </span><span class="ui_-_UI_element">Pages</span> → <span class="ui_-_UI_element">Consistency Checks</span> page. This page lists the consistency checks available by name. Then select the <span class="ui_-_UI_element">Run </span><span class="ui_-_UI_element">consistency checks</span> tab. For <span class="ui_-_UI_element">Check all types?</span>, select <span class="ui_-_UI_element">Specify types</span>. Use the <span class="ui_-_UI_element">Type Code</span> value to specify the consistency checks that you want to run. The Typelists section of the <span class="bt_-_book_title">ClaimCenter Data Dictionary</span> also lists available consistency check types. The typelist is <span class="cv_-_computer_voice">ConsistencyCheckType</span>. </div>
      <div class="B_-_Body"><a name="1250705">Running consistency checks can take a long time. If the connection times out while running this command, run </a>consistency checks on fewer tables at a time by using the arguments shown previously. You can also configure the number of threads to use for consistency checks by modifying <span class="cv_-_computer_voice">checker.threads</span> in the <span class="cv_-_computer_voice">database</span> block in <span class="cv_-_computer_voice">config.xml</span>.</div>
      <div class="B_-_Body"><a name="1250709">The ClaimCenter log lists a check type for each consistency check. This is not the same as the check type shown </a>in the Typelists section of the <span class="bt_-_book_title">ClaimCenter Data Dictionary</span>. The check type in the ClaimCenter log can have a value of either <span class="cv_-_computer_voice">0</span> or <span class="cv_-_computer_voice">1</span>. A value of <span class="cv_-_computer_voice">0</span> indicates that ClaimCenter expects the check to return zero results if the database is consistent. A value of <span class="cv_-_computer_voice">1</span> indicates that ClaimCenter expects the check to have a different return value. ClaimCenter uses this for custom checks. If a check type <span class="cv_-_computer_voice">0</span> fails, the log records a failure description that ClaimCenter expected the query issued by the check to return zero rows. The log includes the SQL query run by the check and the number of inconsistencies returned by the query. If a check type <span class="cv_-_computer_voice">1</span> fails, the log includes a specific failure description. </div>
      <div class="B_-_Body"><a name="1250728">You can use the </a><span class="cv_-_computer_voice">system_tools -checkdbconsistency</span> command while there are other users logged into the server, but Guidewire recommends that you first set the ClaimCenter server run level to <span class="cvt_-_computer_voice_table">MAINTENANCE</span>. Concurrent users see a performance degradation while the tool is running. See <a href="javascript:WWHClickedPopup('admin', 'mngservers.07.03.html#1370656', '');" title="Understanding Server Run Levels and Modes">“Using the Maintenance Run Level”</a> for more information on server run levels.</div>
      <div class="H2_-_Heading_2"><a name="1250738">Running Consistency Checks from ClaimCenter</a></div>
      <div class="B_-_Body"><a name="1250742">You can view and run consistency checks from the </a><span class="ui_-_UI_element">Consistency Checks</span> page in ClaimCenter. The <span class="ui_-_UI_element">Consistency Checks</span> page lists which consistency checks are available for specific tables. You can also use this page to view the results of running consistency checks previously. If there are consistency check errors, the results include SQL queries that you can use to identify records that violated the consistency check.</div>
      <div class="B_-_Body"><a name="1250746">See </a><a href="javascript:WWHClickedPopup('admin', 'maintenance.14.12.html#1532290', '');" title="Info Pages">“Consistency Checks”</a> for more information.</div>
      <div class="H2_-_Heading_2"><a name="1250747">Running Consistency Checks when the Server Starts</a></div>
      <div class="B_-_Body"><a name="1250748">For development environments with small data sets, you can enable consistency checks to run each time the </a>ClaimCenter server starts. To do this, set the <span class="cv_-_computer_voice">checker</span> attribute of the <span class="cv_-_computer_voice">database</span> block to <span class="cv_-_computer_voice">true</span> in <span class="cv_-_computer_voice">config.xml</span>. By default, this option is set to <span class="cv_-_computer_voice">false</span>.</div>
      <div class="B_-_Body"><a name="1250753">Running these consistency tests when starting the server can take a long time, impact performance severely, and </a>possibly time out on very large datasets. Set <span class="cv_-_computer_voice">checker</span> to <span class="cv_-_computer_voice">false</span> under most circumstances. Guidewire recommends that you do not set <span class="cv_-_computer_voice">checker</span> to <span class="cv_-_computer_voice">true</span> except in development environments with small test data sets.</div>
      <script type="text/javascript" language="JavaScript1.2">
        <!--
          // Clear related topics
          //
          WWHClearRelatedTopics();

          document.writeln(WWHRelatedTopicsInlineHTML());
        // -->
      </script>
    </blockquote>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag() + WWHALinksDivTag());
      // -->
    </script>
  </body>
</html>