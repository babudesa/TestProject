<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <!-- MOTW-DISABLED saved from url=(0014)about:internet -->
    <title>Using Oracle Materialized Views for Claim Searches</title>
    <link rel="StyleSheet" href="css/database.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        var  WebWorksRootPath = "";
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        // Set reference to top level help frame
        //
        var  WWHFrame = WWHGetWWHFrame("", true);
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
    <!-- THE FOLLOWING IS A GUIDEWIRE STYLE DEFINITION FOR THE LINK TO THIS FEATURE -->
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <!-- THE FOLLOWING IS A GUIDEWIRE GSCRIPT FUNCTION FOR THE LINK TO THIS FEATURE -->
    <script type="text/javascript">
function guidewire_selectall()
{
var text_val=eval("document.linktothisurlform.urlfield");
text_val.focus();
text_val.select();
}
</script>
  </head>
  <body onLoad="WWHUpdate();" onUnload="WWHUnload();" onKeyDown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onKeyPress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onKeyUp="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">
    <!-- THE FOLLOWING IS A GUIDEWIRE DIV FOR THE 'LINK TO THIS' FEATURE -->
    <div id="linkToThisPage" class="popup" style="display: none;">
      <div class="popupTitle">Link Directly to This Page 
           <a href="#" onclick="var thePopup = getElementById('linkToThisPage');thePopup.style.display='none';return false;"><img class="popupClosebox" src="wwhelp/wwhimpl/common/images/close.gif" /></a></div>
      <div style="padding:6px;">
        <div class="popupText" id="linkToThisPageBookmark">An error has occurred if you see this messsage.</div>
        <form name="linktothisurlform" method="post" action="" style="width:275px;margin:0px">
          <input type="text" class="popupURLText" id="linkToThisPageURL" name="urlfield" rows="1" cols="55" onClick="guidewire_selectall();" onFocus="guidewire_selectall();"></input>
        </form>
      </div>
    </div>
    <br />
    <div class="WebWorks_Breadcrumbs" style="text-align: left;">
      <span>ClaimCenter System Administration Guide</span> : 
    <span class="WebWorks_Breadcrumbs" style="text-align: left;"><a class="WebWorks_Breadcrumb_Link" href="database.06.01.html#1250270">Configuring and Maintaining the ClaimCenter Database</a> : Using Oracle Materialized Views for Claim Searches</span></div>
    <hr align="left" />
    <blockquote>
      <div class="H1_-_Heading_1"><a name="1250270">Using Oracle Materialized Views for Claim Searches</a></div>
      <div class="BKN_-_Body_002c_Keep_Next"><a name="1250271">It is possible to create materialized views in an Oracle schema to improve the performance of queries that </a>ClaimCenter runs as part of a Claim search operation. Materialized views can be useful if performing a search for a claimant or for any involved party using the name of a person or a company. If you implement materialized views in the ClaimCenter schema, then Oracle attempts to use these materialized views if a re-written query block matches the text defined in the view.</div>
      <div class="BKN_-_Body_002c_Keep_Next"><a name="1250272">Guidewire provides the configuration parameter </a><span class="cv_-_computer_voice">QueryRewriteForClaimSearch</span> to enable various options for an Oracle query rewrite using materialized view. By setting this parameter, you can force a query to be rewritten using a materialized view or to let the Oracle optimizer make the choice based on the cost calculation.</div>
      <div class="BKN_-_Body_002c_Keep_Next"><a name="1250273">The following list describes the valid values for this parameter:</a></div>
      <div class="T_-_Table"><a name="1250295">&nbsp;</a></div>
      <table class="Shading" style="text-align: left" cellspacing="10" summary="">
        <caption></caption>
        <tr>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 1px; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: bottom">
            <div class="TH_-_Table_Heading"><a name="1250276">Value</a></div>
          </td>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 1px; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: bottom">
            <div class="TH_-_Table_Heading"><a name="1250278">Meaning</a></div>
          </td>
        </tr>
        <tr>
          <td style="border-top-color: #000000; border-top-style: solid; border-top-width: 1px; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text" style="color: #000000; font-family: &quot;Lucida Sans Typewriter&quot;; font-style: normal; font-variant: normal; font-weight: normal; margin-top: 3.0pt; text-transform: none; vertical-align: baseline"><span class="cvt_-_computer_voice_table"><a name="1250280">FORCE/STALE</a></span></div>
          </td>
          <td style="border-top-color: #000000; border-top-style: solid; border-top-width: 1px; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="1250282">Oracle attempts to rewrite the query using an appropriate materialized view even if the optimizer </a>cost estimate is high. Oracle allows the rewrite even if the data in the materialized is not the same as in the base tables.</div>
          </td>
        </tr>
        <tr>
          <td style="background-color: #F7F7F7; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text" style="color: #000000; font-family: &quot;Lucida Sans Typewriter&quot;; font-style: normal; font-variant: normal; font-weight: normal; margin-top: 3.0pt; text-transform: none; vertical-align: baseline"><span class="cvt_-_computer_voice_table"><a name="1250284">FORCE/NOSTALE</a></span></div>
          </td>
          <td style="background-color: #F7F7F7; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="1250286">Oracle attempts to rewrite the query using an appropriate materialized view even if the optimizer </a>cost estimate is high. Oracle ignores the materialized view if the data in the view is not fresh.</div>
          </td>
        </tr>
        <tr>
          <td style="padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text" style="color: #000000; font-family: &quot;Lucida Sans Typewriter&quot;; font-style: normal; font-variant: normal; font-weight: normal; margin-top: 3.0pt; text-transform: none; vertical-align: baseline"><span class="cvt_-_computer_voice_table"><a name="1250288">COST/STALE</a></span></div>
          </td>
          <td style="padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="1250290">If the Oracle cost-based optimizer evaluates the rewrite to be cheaper than other plans, it uses the </a>materialized view. If it is costlier to execute the rewritten path, then Oracle performs a join of the base tables. The rewrite can happen even if the data in the view is stale.</div>
          </td>
        </tr>
        <tr>
          <td style="background-color: #F7F7F7; border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 1px; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text" style="color: #000000; font-family: &quot;Lucida Sans Typewriter&quot;; font-style: normal; font-variant: normal; font-weight: normal; margin-top: 3.0pt; text-transform: none; vertical-align: baseline"><span class="cvt_-_computer_voice_table"><a name="1250292">COST/NOSTALE</a></span></div>
          </td>
          <td style="background-color: #F7F7F7; border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 1px; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="1250294">If the Oracle cost-based optimizer evaluates the rewrite to be cheaper than other plans, it uses the </a>materialized view. If it is costlier to execute the rewritten path, then Oracle performs a join of the base tables. If the data in the view is not fresh, Oracle ignores the view and performs the join on the base tables.</div>
          </td>
        </tr>
      </table>
      <div class="N_-_Note">
        <span class="n_-_note">Note: </span><a name="1250296">If you provide an invalid value, the server ignores it.</a></div>
      <div class="B_-_Body"><span class="ri_-_run_in_header"><a name="1250297">Default:</a></span> None</div>
      <div class="HS_-_Head_Sub"><a name="1250298">Disabling Query Rewrites</a></div>
      <div class="BKN_-_Body_002c_Keep_Next"><a name="1250299">If you implement materialized views in the ClaimCenter schema, then Oracle attempts to use these materialized </a>views if a rewritten query block matches the text defined in the view. However, the use of materialized views in database queries is not always desirable due to performance considerations.</div>
      <div class="B_-_Body"><a name="1250300">Thus, ClaimCenter provides an option to disable the rewriting of queries using materialized views. You can </a>disable the use of materialized views in Oracle database queries by setting parameter <span class="cv_-_computer_voice">queryRewriteEnabled</span> to <span class="cv_-_computer_voice">false</span> in the <span class="cv_-_computer_voice">&lt;database&gt;</span> element in <span class="cv_-_computer_voice">config.xml</span>. For example:</div>
      <div class="CS_-_Code_Single_Line"><a name="1250301">&lt;param name="queryRewriteEnabled" value="false"/&gt;</a></div>
      <div class="BKN_-_Body_002c_Keep_Next"><a name="1250302">The only valid value for the parameter is </a><span class="cv_-_computer_voice">false</span>:</div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="1250303">If you set this parameter to </a><span class="cv_-_computer_voice">false</span> in <span class="cv_-_computer_voice">config.xml</span>, ClaimCenter runs the following statement for each query session:</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="CS_-_Code_Single_Line"><a name="1250304">ALTER SESSION SET QUERY_REWRITE_ENABLED = FALSE;</a></div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="1250305">If you do not set this parameter in </a><span class="cv_-_computer_voice">config.xml</span> (meaning that you remove the parameter entirely from <span class="cv_-_computer_voice">config.xml</span>), then Oracle attempts to use any available materialized view in database queries.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="HS_-_Head_Sub"><a name="1250306">Materialized Views</a></div>
      <div class="B_-_Body"><a name="1250307">For a description of how to create materialized views in a ClaimCenter schema, consult the following Guidewire </a>white paper, section 19 (Materialized Views):</div>
      <div class="LP_-_List_Para" style="color: #000000; font-style: italic; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline"><span class="e_-_emphasis"><a name="1250308">ClaimCenter 6.0 using Oracle Database</a></span></div>
      <div class="B_-_Body"><a name="1250309">You can find this document at the following location on the Guidewire Resource Portal:</a></div>
      <div class="LP_-_List_Para" style="color: #000000; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 2.0pt; margin-top: 2.0pt; text-transform: none; vertical-align: baseline"><span class="cv_-_computer_voice"><a href="https://guidewire.custhelp.com/app/resources/infrastructure/documents" target="external_window" name="1250311">https://guidewire.custhelp.com/app/resources/infrastructure/documents</a></span></div>
      <div class="B_-_Body"><a name="1250318">The </a><span class="ui_-_UI_element">Server Tools</span> <span class="ui_-_UI_element">→ Info Pages</span> → <span class="ui_-_UI_element">Oracle AWR Information</span> page is aware of materialized views. You can use the information on this page to troubleshoot performance problems with the view. However, if the view is refreshed on demand, then the <span class="ui_-_UI_element">Oracle AWR Information</span> page does not capture the refresh queries.</div>
      <div class="HS_-_Head_Sub"><a name="1250319">Stale Data</a></div>
      <div class="BKN_-_Body_002c_Keep_Next"><a name="1250320">In performance testing, Guidewire observed significant performance degradation if the materialized view was </a>configured to refresh on commit. This is due to a synchronization enqueue required by the refresh process. However, any refresh of the data done outside of the commit operation can potentially display stale data during the search.</div>
      <div class="BKN_-_Body_002c_Keep_Next"><a name="1250321">Oracle uses a cost-based optimizer approach to determine whether to use a materialized view for a given query. It </a>also expects the data to be fresh for the rewrite. As the refresh process is based on the number of changes to contact and claim contacts, Guidewire strongly recommends that you schedule the refresh process accordingly.</div>
      <script type="text/javascript" language="JavaScript1.2">
        <!--
          // Clear related topics
          //
          WWHClearRelatedTopics();

          document.writeln(WWHRelatedTopicsInlineHTML());
        // -->
      </script>
    </blockquote>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag() + WWHALinksDivTag());
      // -->
    </script>
  </body>
</html>