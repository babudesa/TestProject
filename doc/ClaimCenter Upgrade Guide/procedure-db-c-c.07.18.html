<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <!-- MOTW-DISABLED saved from url=(0014)about:internet -->
    <title>Starting the Server to Begin Automatic Database Upgrade</title>
    <link rel="StyleSheet" href="css/procedure-db-c-c.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        var  WebWorksRootPath = "";
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        // Set reference to top level help frame
        //
        var  WWHFrame = WWHGetWWHFrame("", true);
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
    <!-- THE FOLLOWING IS A GUIDEWIRE STYLE DEFINITION FOR THE LINK TO THIS FEATURE -->
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <!-- THE FOLLOWING IS A GUIDEWIRE GSCRIPT FUNCTION FOR THE LINK TO THIS FEATURE -->
    <script type="text/javascript">
function guidewire_selectall()
{
var text_val=eval("document.linktothisurlform.urlfield");
text_val.focus();
text_val.select();
}
</script>
  </head>
  <body onLoad="WWHUpdate();" onUnload="WWHUnload();" onKeyDown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onKeyPress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onKeyUp="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">
    <!-- THE FOLLOWING IS A GUIDEWIRE DIV FOR THE 'LINK TO THIS' FEATURE -->
    <div id="linkToThisPage" class="popup" style="display: none;">
      <div class="popupTitle">Link Directly to This Page 
           <a href="#" onclick="var thePopup = getElementById('linkToThisPage');thePopup.style.display='none';return false;"><img class="popupClosebox" src="wwhelp/wwhimpl/common/images/close.gif" /></a></div>
      <div style="padding:6px;">
        <div class="popupText" id="linkToThisPageBookmark">An error has occurred if you see this messsage.</div>
        <form name="linktothisurlform" method="post" action="" style="width:275px;margin:0px">
          <input type="text" class="popupURLText" id="linkToThisPageURL" name="urlfield" rows="1" cols="55" onClick="guidewire_selectall();" onFocus="guidewire_selectall();"></input>
        </form>
      </div>
    </div>
    <br />
    <div class="WebWorks_Breadcrumbs" style="text-align: left;">
      <span>ClaimCenter Upgrade Guide</span> : 
    <span class="WebWorks_Breadcrumbs" style="text-align: left;"><a class="WebWorks_Breadcrumb_Link" href="part-basicupgrade_2.html#1876925">Upgrading from 6.0.x</a> : <a class="WebWorks_Breadcrumb_Link" href="procedure-db-c-c.07.01.html#1876925">Upgrading the ClaimCenter 6.0.x Database</a> : Starting the Server to Begin Automatic Database Upgrade</span></div>
    <hr align="left" />
    <blockquote>
      <div class="H1_-_Heading_1"><a name="1876925">Starting the Server to Begin Automatic Database Upgrade</a></div>
      <div class="B_-_Body"><a name="1876926">The database upgrade is an automatic process that occurs as you start the server with the upgraded configuration. </a>The database upgrade normally completes in a few hours or less.</div>
      <div class="B_-_Body"><a name="1876927">If the database upgrade stops before completing, then restore your database from the backup, correct any issues </a>reported, and repeat the database upgrade.</div>
      <div class="NI_-_Note_Important">
        <span class="n_-_note">IMPORTANT   </span><a name="1876928">Before starting the upgrade, update database server software and operating systems as </a>needed to meet the installation requirements of the target version. See the <span class="e_-_emphasis">Guidewire Platform Support </span><span class="e_-_emphasis">Matrix</span> for current system and patch level requirements. The <span class="e_-_emphasis">Guidewire Platform Support Matrix </span>is available from the Guidewire Resource Portal at <span class="cv_-_computer_voice" style="color: #0b5aa8; font-weight: bold"><a href="https://guidewire.custhelp.com/app/resources/products/platform" target="external_window">https://guidewire.custhelp.com/app/resources/products/platform</a></span>.</div>
      <div class="NW_-_Note_Warning">
        <span class="w_-_warning">WARNING  </span><a name="1876930">Except for your first database upgrade trials, do not start the server until you have </a>upgraded all rules. Otherwise, default validation rules execute. This could strand objects at a high validation level and make it impossible to edit parts of the object.</div>
      <div class="NW_-_Note_Warning">
        <span class="w_-_warning">WARNING  </span><a name="1876931">The database upgrade runs a series of version checks prior to making any changes. If any </a>of these checks fail, the upgrade aborts and reports an error message. You can fix the issue, create an updated backup of the database and attempt the upgrade again without restoring from a backup. However, if you experience a failure during the version triggers or upgrade steps portion of the upgrade, refresh the database from a backup before attempting the upgrade again.</div>
      <div class="H2_-_Heading_2"><a name="1876935">Test the Database Upgrade</a></div>
      <div class="B_-_Body"><a name="1876936">Prior to attempting the database upgrade on a full-production database clone, test the database upgrade by doing </a>the following:</div>
      <div class="LS_-_List_Start_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="LS_-_List_Start_inner" style="width: 15pt; white-space: nowrap;">
                <span class="ri_-_run_in_header">	1.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LS_-_List_Start_inner"><a name="1876937">Connected to the built-in H2 database, successfully start the built-in Quickstart (Jetty) application server with </a>a merged configuration data model, including merged extensions, datatypes, fieldvalidators, and so forth.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="ri_-_run_in_header">	2.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="1876938">Connected to an empty database on an Oracle or SQL Server database server, successfully start the Quickstart </a>application server from the preceding step.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="ri_-_run_in_header">	3.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="1876939">Connected to a restored backup of a production clone, start either the same Quickstart server from the </a>preceding step or a third-party application server with your custom configuration.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="H2_-_Heading_2"><a name="1876940">Integrations and Starting the Server</a></div>
      <div class="B_-_Body"><a name="1876941">Disable all integrations during the automatic database upgrade. Integration points might require updates due to </a>changes in Guidewire APIs. See the <span class="bt_-_book_title"><a href="javascript:WWHClickedPopup('whatsnew', 'cover-whatsnew.html#1551215', '');" title="ClaimCenter New and Changed Guide">ClaimCenter New and Changed Guide</a></span> for specifics.</div>
      <div class="B_-_Body"><a name="1876945">It is not necessary to have completely migrated integrations before attempting to start the server for the first time. </a>If you have integrations that rely on non-Guidewire applications, do not expect these integrations to work the first time you start the server.</div>
      <div class="H2_-_Heading_2"><a name="1876946">Understanding the Automatic Database Upgrade</a></div>
      <div class="B_-_Body"><a name="1876947">As the database upgrade proceeds, it logs messages to the console as well as the log file describing its progress. </a>The database upgrade process requires thousands of steps, divided into three phases. Due to the relational nature of a database, these phases must execute in a specific order for the upgrade to succeed. </div>
      <div class="B_-_Body"><a name="1876948">During the first phase, the upgrader uses a set of </a><span class="e_-_emphasis">version triggers</span> to determine the first actions that need to take place. The database upgrader requires version triggers in order to perform the following types of tasks:</div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="1876949">changing a datatype (other than just length)</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="1876950">migrating data from one table or column to another</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="1876951">dropping a column</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="1876952">dropping a table</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="1876953">renaming a column</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="1876954">renaming a table</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="1876955">Specific version triggers are described in this topic.</a></div>
      <div class="B_-_Body"><a name="1876956">Many version triggers have version checks associated with them. These checks ensure that the database is ready </a>for the associated version trigger. The database upgrade runs all checks before running any version triggers. If a check detects a problem, it reports the issue, including a sample SQL query to find specific problematic records. If a version check discovers an issue, the database upgrade stops before any version triggers are run. Therefore, it is not necessary to restore the database from a backup if a version check reports an error. Correct the issue and then create a new backup of the database. Then, if you encounter errors after the version check stage, you can restore a version of your database with the issue reported by the version check resolved.</div>
      <div class="B_-_Body"><a name="1876957">In the second phase, the upgrader compares the target data model and the current database to determine how they </a>differ. The upgrader makes changes to the database that do not require a version trigger during this phase.</div>
      <div class="B_-_Body"><a name="1876958">Following this process, the third phase runs a subsequent set of version triggers. These triggers create actions that </a>must be run last due to a dependency on an earlier phase. </div>
      <div class="B_-_Body"><a name="1876959">After the database upgrade concludes, it reports issues that the upgrader encountered and did not complete. </a></div>
      <div class="B_-_Body"><a name="1876960">You are responsible for correcting these issues. This might involve modifying the data model or altering the table </a>manually. If you do not correct them, the next time you start the server you do <span class="e_-_emphasis">not</span> see a message that the database and the data model are out of sync. You must then use the <span class="cv_-_computer_voice">system_tools</span> command to verify the database schema. </div>
      <div class="N_-_Note">
        <span class="n_-_note">Note: </span><a name="1876961">Given the complexity of database upgrade, Guidewire does not expose specific upgrade actions/steps </a>to clients either in SQL or Java form. Any manual attempts to recreate or control the upgrade process can result in problems in the ClaimCenter database. Recovery from such attempts is not supported.</div>
      <div class="H2_-_Heading_2"><a name="1876965">Version Trigger Descriptions</a></div>
      <div class="B_-_Body"><a name="1876966">The database upgrade uses version triggers to perform the actions described by sections within this topic. If a </a>version trigger has an associated version check, the check is described with the trigger. Review these descriptions to familiarize yourself with some of the changes and to understand version checks. If a version check reports an issue, review the error message and consult the description of the relevant version trigger for more information.</div>
      <div class="H3_-_Heading_3"><a name="1877177">Converting Primary Key Indexes to Clustered Indexes</a></div>
      <div class="B_-_Body"><a name="1877179">For SQL Server databases, this version trigger recreates non-clustered backing indexes for primary keys as clus</a>tered indexes. This change improves the performance of claim archiving and claim purging operations.</div>
      <div class="B_-_Body"><a name="1877180">Before recreating the indexes, the version trigger automatically drops (and later rebuilds) any referencing foreign </a>keys and drops any clustered indexes on tables with a primary key.</div>
      <div class="B_-_Body"><a name="1877181">If you are using filegroups, the upgrade recreates the clustered index in the OP filegroup. By default, the upgrade </a>also stores the intermediate sort results that are used to build the index in the OP filegroup. You can configure the upgrade to instead use the tempdb filegroup for the intermediate sort results.</div>
      <div class="B_-_Body"><a name="1877182">If you want the upgrade to stores the intermediate sort results in the tempdb filegroup, set the </a><span class="cv_-_computer_voice">sqlserverCreateIndexSortInTempDB</span> attribute of the <span class="cv_-_computer_voice">upgrade</span> element to <span class="cv_-_computer_voice">true</span>.</div>
      <PRE class="CF_-_Code_First_Line"><a name="1877183">&lt;database ...&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1877184">&nbsp;</a>&nbsp;...</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1877185">&nbsp;</a>&nbsp;&lt;upgrade sqlserverCreateIndexSortInTempDB="true" /&gt;</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1877186">&nbsp;</a>&nbsp;&nbsp;&nbsp;...</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1877187">&nbsp;</a>&nbsp;&lt;/upgrade&gt;</PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="1877188">&lt;/database&gt;</a></PRE>
      <div class="B_-_Body"><a name="1877189">This option increases the amount of temporary disk space that is used to create an index. However, it might </a>reduce the time that is required to create or rebuild an index when tempdb is on a different set of disks from that of the user database.</div>
      <div class="B_-_Body"><a name="1877190">By default, </a><span class="cv_-_computer_voice">sqlserverCreateIndexSortInTempDB</span> is <span class="cv_-_computer_voice">false</span>.</div>
      <div class="H3_-_Heading_3"><a name="1877634">Renaming ClaimInfo Columns</a></div>
      <div class="B_-_Body"><a name="1877645">This step renames </a><span class="cv_-_computer_voice">cc_ClaimInfo.ArchiveFailure</span> to <span class="cv_-_computer_voice">cc_ClaimInfo.ArchiveFailureID</span> and <span class="cv_-_computer_voice">cc_ClaimInfo.ArchiveFailureDetails</span> to <span class="cv_-_computer_voice">cc_ClaimInfo.ArchiveFailureDetailsID</span>.</div>
      <div class="H3_-_Heading_3"><a name="1877652">Enforcing Contact Address Uniqueness</a></div>
      <div class="B_-_Body"><a name="1877656">This trigger eliminates duplicate </a><span class="cv_-_computer_voice">Address</span> records in <span class="cv_-_computer_voice">ContactContact.Address</span> and <span class="cv_-_computer_voice">Contact.PrimaryAddress</span>. For duplicate <span class="cv_-_computer_voice">Address</span> records, the trigger creates a unique <span class="cv_-_computer_voice">Address</span> record and relinks the duplicate references to the unique <span class="cv_-_computer_voice">Address</span>.</div>
      <div class="H3_-_Heading_3"><a name="1877657">Changing Datatype of ArchiveTransitionRec.InternalDesc</a></div>
      <div class="B_-_Body"><a name="1877660">This step alters the datatype of the </a><span class="cv_-_computer_voice">cc_archivetransitionrec.internaldesc</span> column from <span class="cv_-_computer_voice">Text</span> to <span class="cv_-_computer_voice">MediumText</span>.</div>
      <div class="H3_-_Heading_3"><a name="1877661">Changing Precision of Metric Percent Columns</a></div>
      <div class="B_-_Body"><a name="1877662">This step alters the precision of the following metric percent columns to eight, with a scale of zero:</a></div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt; margin-bottom: 2.0pt; vertical-align: baseline">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;color: #000000; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner" style="color: #000000; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none"><span class="cv_-_computer_voice"><a name="1877666">cc_claimmetric.PercentValue</a></span></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt; margin-bottom: 2.0pt; vertical-align: baseline">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;color: #000000; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner" style="color: #000000; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none"><span class="cv_-_computer_voice"><a name="1877670">cc_claimmetriclimit.PercentRedValue</a></span></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt; margin-bottom: 2.0pt; vertical-align: baseline">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;color: #000000; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner" style="color: #000000; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none"><span class="cv_-_computer_voice"><a name="1877674">cc_claimmetriclimit.PercentTargetValue</a></span></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt; margin-bottom: 2.0pt; vertical-align: baseline">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;color: #000000; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner" style="color: #000000; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none"><span class="cv_-_computer_voice"><a name="1877678">cc_claimmetriclimit.PercentYellowValue</a></span></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt; margin-bottom: 2.0pt; vertical-align: baseline">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;color: #000000; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner" style="color: #000000; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none"><span class="cv_-_computer_voice"><a name="1877682">cc_exposuremetric.PercentValue</a></span></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt; margin-bottom: 2.0pt; vertical-align: baseline">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;color: #000000; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner" style="color: #000000; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none"><span class="cv_-_computer_voice"><a name="1877686">cc_exposuremetriclimit.PercentRedValue</a></span></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt; margin-bottom: 2.0pt; vertical-align: baseline">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;color: #000000; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner" style="color: #000000; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none"><span class="cv_-_computer_voice"><a name="1877690">cc_exposuremetriclimit.PercentTargetValue</a></span></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt; margin-bottom: 2.0pt; vertical-align: baseline">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;color: #000000; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner" style="color: #000000; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none"><span class="cv_-_computer_voice"><a name="1877694">cc_exposuremetriclimit.PercentYellowValue</a></span></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="1877698">This trigger only runs if the </a><span class="cv_-_computer_voice">cc_claimmetric</span> table exists already, so it only runs if the database is being upgraded from ClaimCenter 6.0. For database upgrades from earlier versions, the metric percent columns are defined in the data model with the correct precision.</div>
      <div class="H3_-_Heading_3"><a name="1877702">Adding Encryption to Claim Snapshots</a></div>
      <div class="B_-_Body"><a name="1877709">ClaimCenter 6.0.8 provides encryption of sensitive data, such as tax IDs, on claim snapshots.</a></div>
      <div class="B_-_Body"><a name="1877716">This step adds an </a><span class="cv_-_computer_voice">EncryptionVersion</span> integer column to <span class="cv_-_computer_voice">cc_claimsnapshot</span>. As of ClaimCenter 6.0.1, you can create multiple versions of IEncryption plugins. The <span class="cv_-_computer_voice">cc_claimsnapshot.EncryptionVersion</span> column stores a number representing the version of the <span class="cv_-_computer_voice">IEncryption</span> plugin used to encrypt the snapshot fields. ClaimCenter also stores the current encryption version. If the encryption metadata or plugin algorithm change, ClaimCenter increments this version number. </div>
      <div class="B_-_Body"><a name="1877726">The Encryption Upgrade work queue recalculates encrypted field values for any </a><span class="cv_-_computer_voice">ClaimSnapshot</span> that has an <span class="cv_-_computer_voice">EncryptionVersion</span> less than the current encryption version. ClaimCenter decrypts the encrypted value using the original plugin implementation. Then, ClaimCenter encrypts the value with the new plugin implementation. Finally, ClaimCenter updates the <span class="cv_-_computer_voice">EncryptionVersion</span> of the snapshot to mark it current. </div>
      <div class="B_-_Body"><a name="1877742">During the upgrade to ClaimCenter 6.0.8, an upgrade trigger increments the global encryption version number. </a>So, when the Encryption Upgrade work queue runs, it will encrypt fields in the snapshot. This trigger does not fire if encryption is not enabled, and there are no encrypted fields defined on the claim snapshot.</div>
      <div class="B_-_Body"><a name="1877745">For more information about the encryption plugin, see </a><a href="javascript:WWHClickedPopup('integration', 'encryption.24.1.html#2358131', '');" title="Encryption Integration">“Encryption Integration” in the </a><span class="bt_-_book_title"><a href="javascript:WWHClickedPopup('integration', 'encryption.24.1.html#2358131', '');" title="Encryption Integration">Integration Guide</a></span>.</div>
      <div class="B_-_Body"><a name="1877749">For more information about the Encryption Upgrade work queue, see </a><a href="javascript:WWHClickedPopup('admin', 'batch.13.06.html#1631743', '');" title="Batch Processes and Distributed Work Queues">“Batch Processes and Distributed Work Queues” in the </a><span class="bt_-_book_title"><a href="javascript:WWHClickedPopup('admin', 'batch.13.06.html#1631743', '');" title="Batch Processes and Distributed Work Queues">System Administration Guide</a></span>.</div>
      <div class="H3_-_Heading_3"><a name="1877751">Refactoring Claim and Exposure Staging Tables</a></div>
      <div class="B_-_Body"><a name="1877755">This step drops the </a><span class="cv_-_computer_voice">ccst_claim</span> and <span class="cv_-_computer_voice">ccst_exposure</span> tables. ClaimCenter 6.0.2 and higher define <span class="cv_-_computer_voice">Claim.ClaimantDenorm</span>, <span class="cv_-_computer_voice">Claim.InsuredDenorm</span> and <span class="cv_-_computer_voice">Exposure.ClaimantDenorm</span> with the attribute <span class="cv_-_computer_voice">overwrittenInStagingTable</span> set to <span class="cv_-_computer_voice">true</span>. ClaimCenter automatically populates these columns when you load records into the staging tables. Previous versions of ClaimCenter populated these columns after the staging table records were moved into the main repository. In some cases, this caused performance issues. To remedy this, ClaimCenter 6.0.2 and higher populate these columns when you load the staging table rather than when you move data from the staging tables to the main repository.</div>
      <div class="B_-_Body"><a name="1877768">Claim and exposure entities are defined as loadable, so ClaimCenter creates new </a><span class="cv_-_computer_voice">ccst_claim</span> and <span class="cv_-_computer_voice">ccst_exposure</span> tables when the server starts.</div>
      <div class="H3_-_Heading_3"><a name="1877769">Cleaning up Cross-Claim ReserveLineWrapper.ReserveLine References</a></div>
      <div class="B_-_Body"><a name="1877770">The trigger finds instances in which the </a><span class="cv_-_computer_voice">BulkInvoiceItemInfo</span> of a <span class="cv_-_computer_voice">ReserveLineWrapper</span> points to a different <span class="cv_-_computer_voice">Claim</span> than the <span class="cv_-_computer_voice">Claim</span> pointed to by the <span class="cv_-_computer_voice">ReserveLine</span>. The trigger updates those <span class="cv_-_computer_voice">ReserveLineWrapper</span> entities by repointing a given <span class="cv_-_computer_voice">ReserveLineWrapper</span> to a particular <span class="cv_-_computer_voice">ReserveLine</span> on its own <span class="cv_-_computer_voice">Claim</span>.</div>
      <div class="B_-_Body"><a name="1877771">The trigger selects the </a><span class="cv_-_computer_voice">ReserveLine</span> belonging to the <span class="ui_-_UI_element">Transaction</span> of the transferred <span class="cv_-_computer_voice">Check</span>. Typically, a <span class="cv_-_computer_voice">BulkInvoice</span> <span class="cv_-_computer_voice">Check</span> has only one <span class="cv_-_computer_voice">Transaction</span>. However, in this case, cross-claim linkage occurs when the <span class="cv_-_computer_voice">BulkInvoice</span> <span class="cv_-_computer_voice">Check</span> is transferred between <span class="cv_-_computer_voice">Claims</span>. In that case, the <span class="cv_-_computer_voice">Check</span> has two <span class="cv_-_computer_voice">Transactions</span>, an offset on the first <span class="cv_-_computer_voice">Claim</span> and an onset on the second. The trigger selects the onset <span class="cv_-_computer_voice">Transaction</span> on the original <span class="cv_-_computer_voice">Claim</span>.</div>
      <script type="text/javascript" language="JavaScript1.2">
        <!--
          // Clear related topics
          //
          WWHClearRelatedTopics();

          document.writeln(WWHRelatedTopicsInlineHTML());
        // -->
      </script>
    </blockquote>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag() + WWHALinksDivTag());
      // -->
    </script>
  </body>
</html>