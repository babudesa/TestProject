<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <!-- MOTW-DISABLED saved from url=(0014)about:internet -->
    <title>Combining Queries and Predicates</title>
    <link rel="StyleSheet" href="css/querybuilder.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        var  WebWorksRootPath = "";
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        // Set reference to top level help frame
        //
        var  WWHFrame = WWHGetWWHFrame("", true);
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
    <!-- THE FOLLOWING IS A GUIDEWIRE STYLE DEFINITION FOR THE LINK TO THIS FEATURE -->
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <!-- THE FOLLOWING IS A GUIDEWIRE GSCRIPT FUNCTION FOR THE LINK TO THIS FEATURE -->
    <script type="text/javascript">
function guidewire_selectall()
{
var text_val=eval("document.linktothisurlform.urlfield");
text_val.focus();
text_val.select();
}
</script>
  </head>
  <body onLoad="WWHUpdate();" onUnload="WWHUnload();" onKeyDown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onKeyPress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onKeyUp="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">
    <!-- THE FOLLOWING IS A GUIDEWIRE DIV FOR THE 'LINK TO THIS' FEATURE -->
    <div id="linkToThisPage" class="popup" style="display: none;">
      <div class="popupTitle">Link Directly to This Page 
           <a href="#" onclick="var thePopup = getElementById('linkToThisPage');thePopup.style.display='none';return false;"><img class="popupClosebox" src="wwhelp/wwhimpl/common/images/close.gif" /></a></div>
      <div style="padding:6px;">
        <div class="popupText" id="linkToThisPageBookmark">An error has occurred if you see this messsage.</div>
        <form name="linktothisurlform" method="post" action="" style="width:275px;margin:0px">
          <input type="text" class="popupURLText" id="linkToThisPageURL" name="urlfield" rows="1" cols="55" onClick="guidewire_selectall();" onFocus="guidewire_selectall();"></input>
        </form>
      </div>
    </div>
    <br />
    <div class="WebWorks_Breadcrumbs" style="text-align: left;">
      <span>Gosu Reference Guide</span> : 
    <span class="WebWorks_Breadcrumbs" style="text-align: left;"><a class="WebWorks_Breadcrumb_Link" href="querybuilder.09.01.html#2235061">Query Builder</a> : <a class="WebWorks_Breadcrumb_Link" href="querybuilder.09.02.html#2235061">Query Builder Overview</a> : Combining Queries and Predicates</span></div>
    <hr align="left" />
    <blockquote>
      <div class="H2B_-_Heading_2_Break"><a name="2235061">Combining Queries and Predicates</a></div>
      <div class="B_-_Body"><a name="2185026">You can combine multiple predicates in a single query in several ways:</a></div>
      <div class="BI2_-_Bullet_Item_002c_Level_2_outer" style="margin-left: 67pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner"><a href="javascript:WWHClickedPopup('gosu', 'querybuilder.09.07.html#2192615', '');" title="Combining Queries and Predicates" name="2195694">Simple ‘AND’</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI2_-_Bullet_Item_002c_Level_2_outer" style="margin-left: 67pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner"><a href="javascript:WWHClickedPopup('gosu', 'querybuilder.09.07.html#2192664', '');" title="Combining Queries and Predicates" name="2195709">Union and Intersection of Queries</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI2_-_Bullet_Item_002c_Level_2_outer" style="margin-left: 67pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner"><a href="javascript:WWHClickedPopup('gosu', 'querybuilder.09.07.html#2213064', '');" title="Combining Queries and Predicates" name="2195724">Boolean Algebra of Predicates</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="H3_-_Heading_3"><a name="2192615">Simple ‘AND’</a></div>
      <div class="B_-_Body"><a name="2194872">The simplest way to combine multiple predicates is to combine the predicates with a logical </a><span class="cvt_-_computer_voice_table">AND</span>. This means the query finds all rows that satisfy <span class="s_-_strong">all predicates</span>. To link predicates with simple logical AND, simply call the predicate methods (such as <span class="cv_-_computer_voice">compare</span> or <span class="cv_-_computer_voice">between</span>) repeatedly on the query on separate lines. Each call to the predicate method adds the predicate in series, by default implicitly linked by a logical <span class="cvt_-_computer_voice_table">AND</span>.</div>
      <div class="B_-_Body"><a name="2194968">For example, you want to return rows that satisfy </a><span class="s_-_strong">all</span> of the following predicates:</div>
      <div class="BI2_-_Bullet_Item_002c_Level_2_outer" style="margin-left: 67pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner"><a name="2195003">the </a><span class="cv_-_computer_voice">Priority</span> property has value greater than 11 </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI2_-_Bullet_Item_002c_Level_2_outer" style="margin-left: 67pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner"><a name="2195042">the </a><span class="cv_-_computer_voice">ItemNum</span> property has value less than 33</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI2_-_Bullet_Item_002c_Level_2_outer" style="margin-left: 67pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner"><a name="2195054">the </a><span class="cv_-_computer_voice">DivisionNumber </span>property has value greater than 6</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="2195034">Call the predicate methods as separate commands to add them to the query. After you add a predicate, by default </a>Gosu adds a logical AND between the requirements already added and the new predicate.</div>
      <PRE class="CM_-_Code_Middle_Line"><a name="2194980">var q1 = Query.make(MyEntity)</a></PRE>
      <div class="CS_-_Code_Single_Line"><a name="2194956">q1.compare("Priority", GreaterThan, 11)</a></div>
      <PRE class="CM_-_Code_Middle_Line"><a name="2195141">q1.compare("ItemNum", LessThan, 33)</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2195157">q1.compare("DivisionNumber", GreaterThan, 6)</a></PRE>
      <div class="B_-_Body"><a name="2194948">The result query returns only records that satisfy all three predicates.</a></div>
      <div class="B_-_Body"><a name="2194877">Alternatively, you can link them in series, calling a predicate method </a><span class="s_-_strong">on the result</span> <span class="s_-_strong">of the previous predicate</span>. The following example does this and is functionally equivalent to the previous example:</div>
      <PRE class="CM_-_Code_Middle_Line"><a name="2195215">var q1 = Query.make(MyEntity)</a></PRE>
      <div class="CS_-_Code_Single_Line"><a name="2195216">q1.compare("Priority", GreaterThan, 11).compare("ItemNum", LessThan, 33).compare(</a></div>
      <PRE class="CM_-_Code_Middle_Line"><a name="2195233">&nbsp;</a>&nbsp;"DivisionNumber", GreaterThan, 6)</PRE>
      <div class="NI_-_Note_Important">
        <span class="n_-_note">IMPORTANT   </span><a name="2195203">The default linking behavior of predicates on a query or table is a logical </a><span class="cvt_-_computer_voice_table">AND</span>. This is true whether you run the predicate methods on separate lines of Gosu code or link them in series. If you need a logical OR, refer later in this topic to <a href="javascript:WWHClickedPopup('gosu', 'querybuilder.09.07.html#2213064', '');" title="Combining Queries and Predicates">“Boolean Algebra of Predicates”</a>.</div>
      <div class="H3_-_Heading_3"><a name="2192664">Union and Intersection of Queries</a></div>
      <div class="B_-_Body"><a name="2235517">You can create a query that is a union or intersection of two separate queries by using the </a><span class="cv_-_computer_voice">union</span> and <span class="cv_-_computer_voice">intersect</span> methods on queries, respectively. These methods generate and return a new query object. Save that new query object and iterate across that query instead of the original queries. Compare and contrast the following:</div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2235518">A query union contains all rows that are found by </a><span class="s_-_strong">either</span> original query. </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2235490">A query intersection contains all rows that are found by </a><span class="s_-_strong">both</span> original queries. </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="2235466">In both cases, the resulting query returns </a><span class="s_-_strong">no</span> duplicate rows.</div>
      <div class="B_-_Body"><a name="2235803">You can add use multiple </a><span class="cv_-_computer_voice">union</span> or <span class="cv_-_computer_voice">intersect</span> commands in series to make more complex queries.</div>
      <div class="B_-_Body"><a name="2235583">Paste the following example code into the Gosu tester to run a union query and intersection query on the </a><span class="cv_-_computer_voice">User</span> table. This example requires the server to include the default users in the sample data. The sample gets these users by public&nbsp;ID. This example creates a union query, an intersection query, and also demonstrates combining union and intersection in one query.</div>
      <PRE class="CM_-_Code_Middle_Line"><a name="2235709">uses gw.api.database.Query </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2235710">uses gw.api.database.IQueryBeanResult</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2235711">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2235712">var q1 = Query.make(Person).compareIn("PublicID", {"systemTables:1", "default_data:1"})</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2235713">var q2 = Query.make(Person).compareIn("PublicID", {"default_data:1", "default_data:2"})</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2235714">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2235715">var unionQuery = q1.union(q2)</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2235716">var intersectionQuery = q1.intersect(q2)</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2235717">var complexQuery = unionQuery.intersect(q1)</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2235718">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2235719"> </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2235720">// Print the results (using a block to print multiple queries in a standard way)</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2235721">var printResults = \ qs : IQueryBeanResult, msg : String -&gt; {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2235722">  print(msg)</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2235723">  for (a in qs)</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2235724">    print(" public ID " + (a as KeyableBean).PublicID + ", " + a["DisplayName"]) </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2235725">}</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2235726">printResults(q1.select(), "Query #1")</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2235727">printResults(q2.select(), "Query #2")</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2235728">printResults(unionQuery.select(), "Union Query")</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2235729">printResults(intersectionQuery.select(), "Intersection Query")</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2235730">printResults(complexQuery.select(), "Complex Query")</a></PRE>
      <div class="B_-_Body"><a name="2235308">This code prints the following:</a></div>
      <PRE class="CM_-_Code_Middle_Line"><a name="2235755">Query #1</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2235756"> public ID default_data:1, Super User</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2235757"> public ID systemTables:1, Default Owner</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2235758">Query #2</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2235759"> public ID default_data:1, Super User</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2235760"> public ID default_data:2, System User</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2235761">Union Query</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2235762"> public ID default_data:2, System User</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2235763"> public ID default_data:1, Super User</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2235764"> public ID systemTables:1, Default Owner</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2235765">Intersection Query</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2235766"> public ID default_data:1, Super User</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2235767">Complex Query</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2235768"> public ID default_data:1, Super User</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2235769"> public ID systemTables:1, Default Owner</a></PRE>
      <div class="HS_-_Head_Sub"><a name="2213062">Chaining Limitations</a></div>
      <div class="B_-_Body"><a name="2235904">There are some important considerations with </a><span class="e_-_emphasis">chaining</span> results of these operations. You can chain together predicates or groupings that return a query, table, or restriction, and call <span class="cv_-_computer_voice">union</span> or <span class="cv_-_computer_voice">intersect</span> on those. From the previous example:</div>
      <PRE class="CM_-_Code_Middle_Line"><a name="2235852">var q1 = Query.make(Person).compareIn("PublicID", {"systemTables:1", "default_data:1"})</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2235853">var q2 = Query.make(Person).compareIn("PublicID", {"default_data:1", "default_data:2"})</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2235854">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2235855">var unionQuery = q1.union(q2)</a></PRE>
      <div class="B_-_Body"><a name="2213131">However, the result type of a union or intersect operation has a different type than regular queries. Instead of </a><span class="cv_-_computer_voice">Query&lt;T&gt;</span>, the type is <span class="cv_-_computer_voice">GroupingQuery&lt;i&gt;</span>. </div>
      <div class="B_-_Body"><a name="2235914">This class has the same methods as a </a><span class="cv_-_computer_voice">Query</span>. However, it does not extend from <span class="cv_-_computer_voice">Table</span> or implement <span class="cv_-_computer_voice">IQueryBuilder.</span> This means you cannot modify the predicates or tables involved in a <span class="cv_-_computer_voice">GroupingQuery</span> after creating it. For example, you cannot call the <span class="cv_-_computer_voice">compare</span> or <span class="cv_-_computer_voice">between</span> method on the result of an intersect or union.</div>
      <div class="H3_-_Heading_3"><a name="2213064">Boolean Algebra of Predicates</a></div>
      <div class="B_-_Body"><a name="2213067">You can also use advanced Boolean algebra to combine predicates using logical AND and OR. To do this, use the </a><span class="cv_-_computer_voice">and</span> and <span class="cv_-_computer_voice">or</span> methods on queries, tables, and restrictions. The <span class="cv_-_computer_voice">and</span> and <span class="cv_-_computer_voice">or</span> methods modify the original query and add a clause to the query. This feature requires using and understanding the syntax of Gosu blocks. Blocks are special functions that you defined in-line within another function. For more information about blocks, see <a href="javascript:WWHClickedPopup('gosu', 'blocks.17.1.html#1445150', '');" title="Gosu Blocks">“Gosu Blocks”</a>.</div>
      <div class="B_-_Body"><a name="2195418">As mentioned earlier in this topic, the default behavior of a new query (what you create with the query </a><span class="cv_-_computer_voice">make</span> method) is an implicit <span class="e_-_emphasis">logical AND</span> between its predicates. This documentation refers to this quality as a <span class="e_-_emphasis">predi</span><span class="e_-_emphasis">cate linking mode</span> of <span class="cv_-_computer_voice">AND</span>. A new query always has an implicit <span class="e_-_emphasis">predicate linking mode</span> of <span class="cv_-_computer_voice">AND</span>.</div>
      <div class="B_-_Body"><a name="2195471">The most important thing to know when using </a><span class="cv_-_computer_voice">and</span> and <span class="cv_-_computer_voice">or</span> methods is that these methods can change the default linking mode of a new series of predicates. These methods change only the linking mode of <span class="s_-_strong">predicates defined </span><span class="s_-_strong">within the block</span> that you pass to the method. The <span class="cv_-_computer_voice">and</span> and <span class="cv_-_computer_voice">or</span> methods never change the linking mode of predicates that you already added. Similarly, <span class="cv_-_computer_voice">and</span> and <span class="cv_-_computer_voice">or</span> methods never change the linking mode of previous predicates compared to the new group of predicates that you are about to add.</div>
      <div class="B_-_Body"><a name="2196046">You can think of the </a><span class="cvt_-_computer_voice_table">or</span> method conceptually with the following English meaning:</div>
      <div class="BI2_-_Bullet_Item_002c_Level_2_outer" style="margin-left: 67pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner"><a name="2196047">To the previous specified restrictions, add one parenthetical phrase to the query string.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI2_-_Bullet_Item_002c_Level_2_outer" style="margin-left: 67pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner"><a name="2196048">Link this new parenthetical phrase to previous restrictions in the linking mode I am already using.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI2_-_Bullet_Item_002c_Level_2_outer" style="margin-left: 67pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner"><a name="2196049">The block I specify includes a series of predicates. </a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI2_-_Bullet_Item_002c_Level_2_outer" style="margin-left: 67pt; vertical-align: baseline">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner" style="width: 15pt; white-space: nowrap;color: #000000; font-style: normal; font-variant: normal; font-weight: bold; text-transform: none">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner" style="color: #000000; font-style: normal; font-variant: normal; font-weight: bold; text-transform: none"><span class="s_-_strong"><a name="2196079">For new predicates inside the block, use a predicate linking mode of OR between them.</a></span></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI2_-_Bullet_Item_002c_Level_2_outer" style="margin-left: 67pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner"><a name="2196116">One of the predicates defined in the block could instead be another “or” or “and” grouping, each created </a>with another usage of <span class="cv_-_computer_voice">and</span> and <span class="cv_-_computer_voice">or</span> methods.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="2196062">You can think of the </a><span class="cvt_-_computer_voice_table">and</span> method conceptually with the following English meaning:</div>
      <div class="BI2_-_Bullet_Item_002c_Level_2_outer" style="margin-left: 67pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner"><a name="2196160">To the previous specified restrictions, add one parenthetical phrase to the query string.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI2_-_Bullet_Item_002c_Level_2_outer" style="margin-left: 67pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner"><a name="2196064">Link this new parenthetical phrase to previous restrictions in the linking mode I am already using.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI2_-_Bullet_Item_002c_Level_2_outer" style="margin-left: 67pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner"><a name="2196065">The block I specify includes a series of predicates. </a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI2_-_Bullet_Item_002c_Level_2_outer" style="margin-left: 67pt; vertical-align: baseline">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner" style="width: 15pt; white-space: nowrap;color: #000000; font-style: normal; font-variant: normal; font-weight: bold; text-transform: none">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner" style="color: #000000; font-style: normal; font-variant: normal; font-weight: bold; text-transform: none"><span class="s_-_strong"><a name="2196182">For new predicates inside the block, use a predicate linking mode of AND between them.</a></span></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI2_-_Bullet_Item_002c_Level_2_outer" style="margin-left: 67pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner"><a name="2196066">One of the predicates defined in the block could instead be another “or” or “and” grouping, each created </a>using another embedded <span class="cv_-_computer_voice">and</span> and <span class="cv_-_computer_voice">or</span> methods.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="2196412">The syntax of the </a><span class="cvt_-_computer_voice_table">or</span> method is</div>
      <div class="CS_-_Code_Single_Line"><a name="2196413">query.or( \ </a><span class="pc_-_parameter_in_code">OR_GROUPING_VAR</span> -&gt; {</div>
      <PRE class="CM_-_Code_Middle_Line"><a name="2196414">&nbsp;</a>&nbsp;<span class="pc_-_parameter_in_code">OR_GROUPING_VAR</span>.<span class="pc_-_parameter_in_code">PredicateOrBooleanGrouping(...)</span></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2196415">&nbsp;</a>&nbsp;<span class="pc_-_parameter_in_code">OR_GROUPING_VAR</span>.<span class="pc_-_parameter_in_code">PredicateOrBooleanGrouping(...)</span></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2196416">&nbsp;</a>&nbsp;<span class="pc_-_parameter_in_code">OR_GROUPING_VAR</span>.<span class="pc_-_parameter_in_code">PredicateOrBooleanGrouping(...)</span></PRE>
      <PRE class="CM_-_Code_Middle_Line" style="font-style: italic; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline"><span class="pc_-_parameter_in_code"><a name="2196417">&nbsp;</a></span><span class="pc_-_parameter_in_code">&nbsp;</span><span class="pc_-_parameter_in_code">[...]</span></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2196418">}</a></PRE>
      <div class="B_-_Body"><a name="2196434">The syntax of the </a><span class="cvt_-_computer_voice_table">and</span> method is</div>
      <div class="CS_-_Code_Single_Line"><a name="2196435">query.and( \ </a><span class="pc_-_parameter_in_code">AND_GROUPING_VAR</span> -&gt; {</div>
      <PRE class="CM_-_Code_Middle_Line"><a name="2196436">&nbsp;</a>&nbsp;<span class="pc_-_parameter_in_code">AND_GROUPING_VAR</span>.<span class="pc_-_parameter_in_code">PredicateOrBooleanGrouping(...)</span></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2196437">&nbsp;</a>&nbsp;<span class="pc_-_parameter_in_code">AND_GROUPING_VAR</span>.<span class="pc_-_parameter_in_code">PredicateOrBooleanGrouping(...)</span></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2196438">&nbsp;</a>&nbsp;<span class="pc_-_parameter_in_code">AND_GROUPING_VAR</span>.<span class="pc_-_parameter_in_code">PredicateOrBooleanGrouping(...)</span></PRE>
      <PRE class="CM_-_Code_Middle_Line" style="font-style: italic; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline"><span class="pc_-_parameter_in_code"><a name="2196439">&nbsp;</a></span><span class="pc_-_parameter_in_code">&nbsp;</span><span class="pc_-_parameter_in_code">[...]</span></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2196440">}</a></PRE>
      <div class="B_-_Body"><a name="2196368">Each use of </a><span class="pc_-_parameter_in_code">PredicateOrBooleanGrouping</span> could be either:</div>
      <div class="BI2_-_Bullet_Item_002c_Level_2_outer" style="margin-left: 67pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner"><a name="2196369">a predicate method such as </a><span class="cvt_-_computer_voice_table">compare</span> or <span class="cvt_-_computer_voice_table">between</span></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI2_-_Bullet_Item_002c_Level_2_outer" style="margin-left: 67pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner"><a name="2196387">another Boolean grouping by calling the </a><span class="cv_-_computer_voice">or</span> or <span class="cv_-_computer_voice">and</span> method again. </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="2196588">Notice that within the block, you call the predicate and Boolean grouping methods on the argument passed to the </a>block itself. Do not call the predicate and Boolean grouping methods on the original query.</div>
      <div class="B_-_Body"><a name="2197464">In the above examples, </a><span class="pc_-_parameter_in_code">OR_GROUPING_VAR</span> and <span class="pc_-_parameter_in_code">AND_GROUPING_VAR</span> refer to a grouping variable name that helps identify the “or” or “and” link mode in each peer group of predicates. You can call these block parameter variables whatever you want. However, Guidewire recommends naming the block parameter variable with names that indicate one of the following:</div>
      <div class="BI2_-_Bullet_Item_002c_Level_2_outer" style="margin-left: 67pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner"><span class="ri_-_run_in_header"><a name="2197465">Name reminds you of the linking mode.</a></span> Use variables that remind you of the linking mode between predicates in that group, for example <span class="cv_-_computer_voice">or1</span> and <span class="cv_-_computer_voice">and1</span>. Note that you cannot call the variable simply <span class="cv_-_computer_voice">or</span> or <span class="cv_-_computer_voice">and</span>, since those are language keywords. Instead, add numbers or other unique identifiers to the word “and” or “or”.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI2_-_Bullet_Item_002c_Level_2_outer" style="margin-left: 67pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner"><span class="ri_-_run_in_header"><a name="2197404">Name with specific semantic meaning.</a></span> For example, use <span class="cv_-_computer_voice">carColors</span> for a section that checks for car colors</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="2196959">For example, the following simple example links three predicates together with logical OR. In other words, the </a>query returns rows if <span class="s_-_strong">any of the three</span> predicates are true for that row.</div>
      <PRE class="CF_-_Code_First_Line"><a name="2196960">var q1 = Query.make(MyEntity)</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2196961">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2196962">q1.or( \ or1 -&gt; {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2196963">&nbsp;</a>&nbsp;or1.compare("Priority", GreaterThan, 11)</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2196964">&nbsp;</a>&nbsp;or1.compare("ItemNum", LessThan, 33)</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2196965">&nbsp;</a>&nbsp;or1.compare("DivisionNumber", GreaterThan, 6)</PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="2196966">})</a></PRE>
      <div class="B_-_Body"><a name="2196982">For example, the following simple example links three predicates together with logical AND. In other words, the </a>query returns rows if <span class="s_-_strong">all three</span> predicates are true for that row. </div>
      <PRE class="CF_-_Code_First_Line"><a name="2196983">var q1 = Query.make(MyEntity)</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2196984">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2196985">q1.and( \ and1 -&gt; {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2196986">&nbsp;</a>&nbsp;and1.compare("Priority", GreaterThan, 11)</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2196987">&nbsp;</a>&nbsp;and1.compare("ItemNum", LessThan, 33)</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2196988">&nbsp;</a>&nbsp;and1.compare("DivisionNumber", GreaterThan, 6)</PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="2197118">})</a></PRE>
      <div class="N_-_Note">
        <span class="n_-_note">Note: </span><a name="2197119">This is functionally equivalent to simple linking of predicates (the default linking mode is AND):</a></div>
      <PRE class="CF_-_Code_First_Line"><a name="2197120">var q1 = Query.make(MyEntity)</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2197036">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2197038">q1.compare("Priority", GreaterThan, 11)</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2197039">q1.compare("ItemNum", LessThan, 33)</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2197040">q1.compare("DivisionNumber", GreaterThan, 6)</a></PRE>
      <div class="B_-_Body"><a name="2197199">The power of the query building system is the ability to combine </a><span class="cv_-_computer_voice">AND</span> and <span class="cv_-_computer_voice">OR</span> groupings. For example, suppose we wanted to represent the following pseudo-code query:</div>
      <div class="CS_-_Code_Single_Line"><a name="2197200">(Priority &gt; 11) OR ( (ItemNum &lt; 33) AND (DivisionNumber &gt; 6) )</a></div>
      <div class="B_-_Body"><a name="2197209">The following query represents this pseudo-code query using Gosu query builders:</a></div>
      <PRE class="CM_-_Code_Middle_Line"><a name="2197201">q1.or( \ or1 -&gt; {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2197164">&nbsp;</a>&nbsp;or1.compare("Priority", GreaterThan, 11)</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2197165">&nbsp;</a>&nbsp;or1.and(\ and1 -&gt; {</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2197229">&nbsp;</a>&nbsp;&nbsp;&nbsp;and1.compare("ItemNum", LessThan, 33)</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2197166">&nbsp;</a>&nbsp;&nbsp;&nbsp;and1.compare("DivisionNumber", GreaterThan, 6)</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2197240">&nbsp;</a>&nbsp;})</PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="2197167">})</a></PRE>
      <div class="B_-_Body"><a name="2197249">Notice that the outer “or” contains two items, and the second item is an “and” grouping. This directly parallels </a>the structure of the parentheses in the pseudo-code.</div>
      <div class="B_-_Body"><a name="2197262">You can combine and populate these “and” and “or” groupings with any of the following:</a></div>
      <div class="BI2_-_Bullet_Item_002c_Level_2_outer" style="margin-left: 67pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner"><a name="2197283">predicate methods</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI2_-_Bullet_Item_002c_Level_2_outer" style="margin-left: 67pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner"><a name="2197294">database functions</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI2_-_Bullet_Item_002c_Level_2_outer" style="margin-left: 67pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner"><a name="2197302">subselect operations. For an advanced example using subselect and Boolean operators, see </a><a href="javascript:WWHClickedPopup('gosu', 'querybuilder.09.15.html#2211737', '');" title="Advanced Queries (Subselects and Joins)">“Advanced Queries (Subselects and Joins)”</a>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="2209700">If your query consists of a large number of predicates linked by </a><span class="cv_-_computer_voice">OR</span> clauses, there is an alternative approach that might perform better in real-world performance, depending on your data:</div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2209701">If the OR clauses all test a single property, rewrite and collapse the tests into a single compare predicate using </a>the <span class="cv_-_computer_voice">compareIn</span> method, which takes a list of values. For more information, see <a href="javascript:WWHClickedPopup('gosu', 'querybuilder.09.02.html#2180576', '');" title="Query Builder Overview">“Basic Queries”</a>. For example, suppose your query checks a property for a color value to see if it matches one of 30 color values, use <span class="cv_-_computer_voice">compareIn</span> for this type of query.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2209705">Otherwise, you might consider creating multiple subqueries and using a </a><span class="cv_-_computer_voice">union</span> clause to combine subqueries. Consider trying the query in both approaches, and then testing real-world performance with large number of records. See <a href="javascript:WWHClickedPopup('gosu', 'querybuilder.09.07.html#2235061', '');" title="Combining Queries and Predicates">“Combining Queries and Predicates”</a> for more details about creating union queries.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="HS_-_Head_Sub"><a name="2213257">Chaining Inside AND and OR Groupings</a></div>
      <div class="B_-_Body"><a name="2213277">The earlier examples used a pattern that looks like the following:</a></div>
      <PRE class="CF_-_Code_First_Line"><a name="2213294">var q1 = Query.make(MyEntity)</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2213295">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2213296">q1.or( \ or1 -&gt; {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2213297">&nbsp;</a>&nbsp;or1.compare("Priority", GreaterThan, 11)</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2213298">&nbsp;</a>&nbsp;or1.compare("ItemNum", LessThan, 33)</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2213299">&nbsp;</a>&nbsp;or1.compare("DivisionNumber", GreaterThan, 6)</PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="2213300">})</a></PRE>
      <div class="B_-_Body"><a name="2213286">In theory, you could use the chaining features of Gosu query APIs to make it more compact using chaining on </a>one line, rather than using three different lines. However, in this case it might make the code harder to understand. </div>
      <div class="B_-_Body"><a name="2213340">The naming of the Gosu block variable with </a><span class="cv_-_computer_voice">"or"</span> in the name more closely matches the English construction that would describe the final output. In other words, there is an <span class="cv_-_computer_voice">"or"</span> clause between each one. Consider simply using this pattern in the example and avoid chaining the predicates together.</div>
      <script type="text/javascript" language="JavaScript1.2">
        <!--
          // Clear related topics
          //
          WWHClearRelatedTopics();

          document.writeln(WWHRelatedTopicsInlineHTML());
        // -->
      </script>
    </blockquote>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag() + WWHALinksDivTag());
      // -->
    </script>
  </body>
</html>