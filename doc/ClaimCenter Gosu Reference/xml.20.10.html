<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <!-- MOTW-DISABLED saved from url=(0014)about:internet -->
    <title>Customizing Guidewire Model XML Output (GXOptions)</title>
    <link rel="StyleSheet" href="css/xml.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        var  WebWorksRootPath = "";
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        // Set reference to top level help frame
        //
        var  WWHFrame = WWHGetWWHFrame("", true);
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
    <!-- THE FOLLOWING IS A GUIDEWIRE STYLE DEFINITION FOR THE LINK TO THIS FEATURE -->
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <!-- THE FOLLOWING IS A GUIDEWIRE GSCRIPT FUNCTION FOR THE LINK TO THIS FEATURE -->
    <script type="text/javascript">
function guidewire_selectall()
{
var text_val=eval("document.linktothisurlform.urlfield");
text_val.focus();
text_val.select();
}
</script>
  </head>
  <body onLoad="WWHUpdate();" onUnload="WWHUnload();" onKeyDown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onKeyPress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onKeyUp="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">
    <!-- THE FOLLOWING IS A GUIDEWIRE DIV FOR THE 'LINK TO THIS' FEATURE -->
    <div id="linkToThisPage" class="popup" style="display: none;">
      <div class="popupTitle">Link Directly to This Page 
           <a href="#" onclick="var thePopup = getElementById('linkToThisPage');thePopup.style.display='none';return false;"><img class="popupClosebox" src="wwhelp/wwhimpl/common/images/close.gif" /></a></div>
      <div style="padding:6px;">
        <div class="popupText" id="linkToThisPageBookmark">An error has occurred if you see this messsage.</div>
        <form name="linktothisurlform" method="post" action="" style="width:275px;margin:0px">
          <input type="text" class="popupURLText" id="linkToThisPageURL" name="urlfield" rows="1" cols="55" onClick="guidewire_selectall();" onFocus="guidewire_selectall();"></input>
        </form>
      </div>
    </div>
    <br />
    <div class="WebWorks_Breadcrumbs" style="text-align: left;">
      <span>Gosu Reference Guide</span> : 
    <span class="WebWorks_Breadcrumbs" style="text-align: left;"><a class="WebWorks_Breadcrumb_Link" href="xml.20.01.html#1505618">Gosu and XML</a> : <a class="WebWorks_Breadcrumb_Link" href="xml.20.07.html#1505618">The Guidewire XML (GX) Modeler</a> : Customizing Guidewire Model XML Output (GXOptions)</span></div>
    <hr align="left" />
    <blockquote>
      <div class="H2B_-_Heading_2_Break"><a name="1505618">Customizing Guidewire Model XML Output (GXOptions)</a></div>
      <div class="B_-_Body"><a name="1505619">Alternatively, you can use an alternate form of the constructor to add additional options that change XML export </a>behavior. The alternative constructor takes an additional argument of type <span class="cv_-_computer_voice">GXOptions</span>, which stands for <span class="e_-_emphasis">Guidewire XML model options</span>. A <span class="cv_-_computer_voice">GXOptions</span> object has the properties described in the following table.</div>
      <div class="T_-_Table"><a name="1505667">&nbsp;</a></div>
      <table class="withHeading" style="text-align: left" cellspacing="10" summary="">
        <caption></caption>
        <tr>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 1px; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: bottom">
            <div class="TH_-_Table_Heading"><a name="1505622">GXOption Property</a></div>
          </td>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 1px; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: bottom">
            <div class="TH_-_Table_Heading"><a name="1505624">Description</a></div>
          </td>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 1px; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: bottom">
            <div class="TH_-_Table_Heading"><a name="1505626">Behavior for properties backed by </a>database columns</div>
          </td>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 1px; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: bottom">
            <div class="TH_-_Table_Heading"><a name="1505628">Behavior for properties not </a>backed by database columns</div>
          </td>
        </tr>
        <tr>
          <td style="border-top-color: #000000; border-top-style: solid; border-top-width: 1px; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text" style="color: #000000; font-family: &quot;Lucida Sans Typewriter&quot;; font-style: normal; font-variant: normal; font-weight: normal; margin-top: 3.0pt; text-transform: none; vertical-align: baseline"><span class="cvt_-_computer_voice_table"><a name="1505630">Incremental</a></span></div>
          </td>
          <td style="border-top-color: #000000; border-top-style: solid; border-top-width: 1px; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="1505632">For properties </a>backed by database columns, export properties only if they change. Default is <span class="cvt_-_computer_voice_table">false</span>.</div>
            <div class="TT_-_Table_Text"><a name="1505633">&nbsp;</a></div>
          </td>
          <td style="border-top-color: #000000; border-top-style: solid; border-top-width: 1px; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="1505635">If set to </a><span class="cvt_-_computer_voice_table">true</span>, exports the property only if it changes. To determine whether the property changes, ClaimCenter uses the current bundle to examine what entities were added, removed, or changed.</div>
            <div class="TT_-_Table_Text"><span class="s_-_strong"><a name="1505639">IMPORTANT:</a></span> There are important exceptions for this option’s behavior, discussed later in this section</div>
            <div class="TT_-_Table_Text"><a name="1505640">If set to </a><span class="cvt_-_computer_voice_table">false</span>, generates a property’s XML even if it did not change.</div>
          </td>
          <td style="border-top-color: #000000; border-top-style: solid; border-top-width: 1px; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="1505642">No effect. The incremental feature </a>does not apply to this type of property. </div>
          </td>
        </tr>
        <tr>
          <td style="padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text" style="color: #000000; font-family: &quot;Lucida Sans Typewriter&quot;; font-style: normal; font-variant: normal; font-weight: normal; margin-top: 3.0pt; text-transform: none; vertical-align: baseline"><span class="cvt_-_computer_voice_table"><a name="1505644">Verbose</a></span></div>
          </td>
          <td style="padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="1505646">Export an XML ele</a>ment for an property even if the value for that property is <span class="cvt_-_computer_voice_table">null</span></div>
            <div class="TT_-_Table_Text"><a name="1505647">The default for </a><span class="cv_-_computer_voice">Verbose</span> is <span class="cv_-_computer_voice">false</span>. This is the behavior if you use the one-argument constructor without the <span class="cv_-_computer_voice">GXOptions</span> object.</div>
            <div class="TT_-_Table_Text"><a name="1505648">&nbsp;</a></div>
          </td>
          <td style="padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="1505650">If the </a><span class="cv_-_computer_voice">Verbose</span> option is <span class="cv_-_computer_voice">true</span>, any <span class="cv_-_computer_voice">null</span> values export an element with the attribute <span class="cv_-_computer_voice">xsi:nil</span> set to <span class="cv_-_computer_voice">"true"</span>. This XML element never has any subelements in the XML. For example, the following XML represents the property <span class="cv_-_computer_voice">mytype</span> with a value <span class="cv_-_computer_voice">null</span>:</div>
            <div class="TT_-_Table_Text" style="color: #000000; font-family: &quot;Lucida Sans Typewriter&quot;; font-style: normal; font-variant: normal; font-weight: normal; margin-top: 3.0pt; text-transform: none; vertical-align: baseline"><span class="cvt_-_computer_voice_table"><a name="1505651">&nbsp;</a></span><span class="cvt_-_computer_voice_table">&nbsp;</span><span class="cvt_-_computer_voice_table">&nbsp;</span><span class="cvt_-_computer_voice_table">&lt;mytype xsi:nil="true"&gt;</span></div>
            <div class="TT_-_Table_Text"><a name="1505652">If the </a><span class="cv_-_computer_voice">Verbose</span> option is <span class="cv_-_computer_voice">true</span>, the special attribute is always on the highest-level object in the hierarchy that is <span class="cv_-_computer_voice">null.</span> Any subobjects or properties with implicitly <span class="cv_-_computer_voice">null</span> values are not in the output XML at all. For example, suppose the Gosu expression <span class="cv_-_computer_voice">myobject.A.B</span> evaluates to <span class="cv_-_computer_voice">null</span> because <span class="cv_-_computer_voice">myobject.A</span> is <span class="cv_-_computer_voice">null</span>. In this case, the <span class="cv_-_computer_voice">xsi:nil</span> attribute is on the <span class="cv_-_computer_voice">myobject.A</span> element and no element in the XML explicitly represents the B property.</div>
            <div class="TT_-_Table_Text"><a name="1505653">If the </a><span class="cv_-_computer_voice">Verbose</span> option is <span class="cvt_-_computer_voice_table">false</span>, a <span class="cv_-_computer_voice">null</span> value does not export an element in XML.</div>
          </td>
          <td style="padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="1505655">Same behavior as for database col</a>umns. See previous table cell.</div>
          </td>
        </tr>
        <tr>
          <td style="padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text" style="color: #000000; font-family: &quot;Lucida Sans Typewriter&quot;; font-style: normal; font-variant: normal; font-weight: normal; margin-top: 3.0pt; text-transform: none; vertical-align: baseline"><span class="cvt_-_computer_voice_table"><a name="1505657">SupressExceptions</a></span></div>
          </td>
          <td style="padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="1505659">Suppresses excep</a>tions that occur in the process of getting values from objects. Exceptions can occur because some properties are actually backed either by Gosu enhancement <span class="cv_-_computer_voice">property </span><span class="cv_-_computer_voice">get</span> functions or internal Java code (virtual properties). For a related topic, see <a href="javascript:WWHClickedPopup('gosu', 'xml.20.10.html#1505713', '');" title="Customizing Guidewire Model XML Output (GXOptions)">“Checking for Exceptions in Property Export”</a>. The default is <span class="cvt_-_computer_voice_table">false</span></div>
          </td>
          <td style="padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="1505664">Suppresses exceptions if true.</a></div>
          </td>
          <td style="padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="1505666">Suppresses exceptions if true.</a></div>
          </td>
        </tr>
      </table>
      <div class="B_-_Body"><a name="1505668">The behavior is slightly different for any properties that satisfy both the following criteria:</a></div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="1505669">The property is a virtual property or enhancement property. In other words, the property is not defined in the </a>data model configuration file and backed by a database column.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="1505670">Within that the object graph starting at that property there exists at least one object of a Guidewire entity type. </a>This section refers to these entities as <span class="e_-_emphasis">entities inside virtual property graphs</span>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="1505671">In this case, Gosu cannot determine whether the entities inside virtual property graphs changed. </a></div>
      <div class="B_-_Body"><a name="1505672">For example, in ClaimCenter, a claim’s primary address is a virtual property on the </a><span class="cv_-_computer_voice">Claim</span> entity. Any subobjects of <span class="cv_-_computer_voice">Claim.PrimaryAddress</span> cannot be tested for new/deleted/changed entities. </div>
      <div class="B_-_Body"><a name="1505677">For this special case, Gosu changes the behavior of entities inside virtual property graphs. Even if you set </a><span class="cv_-_computer_voice">Incremental</span> to true, the incremental mode is disabled for entities inside virtual property graphs. In other words, as Gosu recursively processes the type, if it finds a virtual property, incremental mode is turned off for that hierarchy of objects. All entities inside virtual property graphs ignore the <span class="cv_-_computer_voice">Incremental</span> option and thus generate XML even if unchanged.</div>
      <div class="HS_-_Head_Sub"><a name="1505678">Adding GXOptions</a></div>
      <div class="B_-_Body"><a name="1505679">You can set </a><span class="cv_-_computer_voice">GXOptions</span> options using a compact syntax in Gosu for initializing a new <span class="cv_-_computer_voice">GXOptions</span> object. For details of data structure initialization syntax, see <a href="javascript:WWHClickedPopup('gosu', 'expressions.05.10.html#1570563', '');" title="New Object Expressions">“Object Initializer Syntax”</a>. The following example sets both <span class="cv_-_computer_voice">Incremental</span> and <span class="cv_-_computer_voice">Verbose</span> to <span class="cv_-_computer_voice">true</span>:</div>
      <PRE class="CM_-_Code_Middle_Line"><a name="1505683">var xml = new mycompany.messaging.AddressModel.Address( myAddress, new GXOptions() {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1505684">  :Incremental = true , :Verbose=true</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1505685">} )</a></PRE>
      <div class="HS_-_Head_Sub"><a name="1505686">Send a Message Only If Data Model Fields Changed</a></div>
      <div class="B_-_Body"><a name="1505687">After you pass a type to your XML model’s constructor, check the </a><span class="cv_-_computer_voice">ShouldSend</span> property on the result to determine. That returns true if and only if at least one mapped data model field changed in the local database bundle. If you only want to send your message if data model fields changed, use the <span class="cv_-_computer_voice">ShouldSend</span> property to determine whether data model fields changed. </div>
      <div class="B_-_Body"><a name="1505688">For example:</a></div>
      <PRE class="CF_-_Code_First_Line"><a name="1505689">if (MessageContext.EventName == "AddressChanged") {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1505690">&nbsp;</a>&nbsp;var xml = new mycompany.messaging.AddressModel.Address( MessageContext.Root as Address)</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1505691">if (xml.ShouldSend) {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1505692">&nbsp;</a>&nbsp;&nbsp;&nbsp;var strContent = xml.asUTFString()</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1505693">&nbsp;</a>&nbsp;&nbsp;&nbsp;var msg = MessageContext.createMessage(strContent)</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1505694">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1505695">&nbsp;</a>&nbsp;&nbsp;&nbsp;print("Message payload for debugging:")</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1505696">&nbsp;</a>&nbsp;&nbsp;&nbsp;print(msg); </PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1505697">&nbsp;</a>&nbsp;}</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1505698">}</a></PRE>
      <div class="N_-_Note">
        <span class="n_-_note">Note: </span><a name="1505699">When Gosu checks for mapped data model properties that changed, Gosu checks both normal or key </a>properties. Of course, generally speaking, if your key property is supposed to uniquely identify the object, it never changes.</div>
      <div class="B_-_Body"><a name="1505700">There is an important exception. If any ancestor of a changed property changed its value (including to </a><span class="cv_-_computer_voice">null</span>), it might not necessarily trigger <span class="cv_-_computer_voice">ShouldSend</span> to be <span class="cv_-_computer_voice">true</span>. If the original value of the non-datamodel field indirectly referenced data model fields, those fields do not count as properties that trigger <span class="cv_-_computer_voice">shouldSend</span> to be true. If the property that changed has a path from the root type that includes <span class="s_-_strong">non-datamodel fields</span>, then Gosu’s algorithm for checking for changes does not see that this field changed. This is true also if the property changed to the value <span class="cv_-_computer_voice">null</span>. In other words, ClaimCenter can tell whether a property changed only if all its ancestors are actual data model fields (rather than enhancement properties or other virtual properties).</div>
      <div class="B_-_Body"><a name="1505704">For example, suppose that due to some user action, some mapped field </a><span class="cv_-_computer_voice">A.B.C.D</span> property changed and also <span class="cv_-_computer_voice">A.B.C</span> became <span class="cv_-_computer_voice">null</span>. If the <span class="cv_-_computer_voice">B</span> property and the <span class="cv_-_computer_voice">C</span> property were both data model fields, then Gosu detects this bundle change and sets <span class="cv_-_computer_voice">ShouldSend</span> to true. However, if the <span class="cv_-_computer_voice">B.C</span> property is implemented as a Gosu enhancement or an internal Java method, then <span class="cv_-_computer_voice">ShouldSend</span> is <span class="cv_-_computer_voice">false.</span> This is because the bundle of entities do not contain the old&nbsp;value of <span class="cv_-_computer_voice">A.B.C</span>. Because Gosu cannot see whether the property changed, Gosu does not count it as a change that sets the property <span class="cv_-_computer_voice">ShouldSend</span> to the value <span class="cv_-_computer_voice">true</span>.</div>
      <div class="B_-_Body"><a name="1505705">This special behavior with non-datamodel properties subgraphs is similar to how the </a><span class="cv_-_computer_voice">Incremental</span> property in <span class="cv_-_computer_voice">GXOptions</span> is effectively disabled within virtual property subgraphs. See related discussion about virtual property graphs earlier in this topic.</div>
      <div class="B_-_Body"><a name="1505706">Note that if a property contains an entity array and its contents change, </a><span class="cv_-_computer_voice">ShouldSend</span> is <span class="cv_-_computer_voice">true</span>. In other words, if an entity is added or removed from the array, <span class="cv_-_computer_voice">ShouldSend</span> is true.</div>
      <div class="B_-_Body"><a name="1505707">The behavior of </a><span class="cv_-_computer_voice">ShouldSend</span> does not change based on the value of the <span class="cv_-_computer_voice">Verbose</span> option or the <span class="cv_-_computer_voice">Incremental</span> option.</div>
      <div class="H3_-_Heading_3"><a name="1505713">Checking for Exceptions in Property Export</a></div>
      <div class="B_-_Body"><a name="1505714">When you use your model to generate XML from an instance of the type, exceptions can occur in some cases. </a>Exceptions can occur because some properties are actually backed by Gosu enhancement <span class="cv_-_computer_voice">property get</span> functions or backed by internal Java code (virtual properties). </div>
      <div class="B_-_Body"><a name="1505715">You can tell Gosu to suppress exceptions during XML generation using the </a><span class="cv_-_computer_voice">GXOptions</span> option called <span class="cv_-_computer_voice">SupressExceptions</span>.</div>
      <div class="B_-_Body"><a name="1505716">After generating XML, you can check whether exceptions occurred using the </a><span class="cv_-_computer_voice">HasExceptions</span> property on the root XML object (the result of the constructor of the type using your model). If you want details of each exception, call the <span class="cv_-_computer_voice">eachException</span> method, which takes a Gosu block. Your block must take one argument, which is the exception. Gosu calls this block once for each exception. </div>
      <script type="text/javascript" language="JavaScript1.2">
        <!--
          // Clear related topics
          //
          WWHClearRelatedTopics();

          document.writeln(WWHRelatedTopicsInlineHTML());
        // -->
      </script>
    </blockquote>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag() + WWHALinksDivTag());
      // -->
    </script>
  </body>
</html>