<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <!-- MOTW-DISABLED saved from url=(0014)about:internet -->
    <title>Find Expressions</title>
    <link rel="StyleSheet" href="css/find.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        var  WebWorksRootPath = "";
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        // Set reference to top level help frame
        //
        var  WWHFrame = WWHGetWWHFrame("", true);
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
    <!-- THE FOLLOWING IS A GUIDEWIRE STYLE DEFINITION FOR THE LINK TO THIS FEATURE -->
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <!-- THE FOLLOWING IS A GUIDEWIRE GSCRIPT FUNCTION FOR THE LINK TO THIS FEATURE -->
    <script type="text/javascript">
function guidewire_selectall()
{
var text_val=eval("document.linktothisurlform.urlfield");
text_val.focus();
text_val.select();
}
</script>
  </head>
  <body onLoad="WWHUpdate();" onUnload="WWHUnload();" onKeyDown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onKeyPress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onKeyUp="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">
    <!-- THE FOLLOWING IS A GUIDEWIRE DIV FOR THE 'LINK TO THIS' FEATURE -->
    <div id="linkToThisPage" class="popup" style="display: none;">
      <div class="popupTitle">Link Directly to This Page 
           <a href="#" onclick="var thePopup = getElementById('linkToThisPage');thePopup.style.display='none';return false;"><img class="popupClosebox" src="wwhelp/wwhimpl/common/images/close.gif" /></a></div>
      <div style="padding:6px;">
        <div class="popupText" id="linkToThisPageBookmark">An error has occurred if you see this messsage.</div>
        <form name="linktothisurlform" method="post" action="" style="width:275px;margin:0px">
          <input type="text" class="popupURLText" id="linkToThisPageURL" name="urlfield" rows="1" cols="55" onClick="guidewire_selectall();" onFocus="guidewire_selectall();"></input>
        </form>
      </div>
    </div>
    <br />
    <div class="WebWorks_Breadcrumbs" style="text-align: left;">
      <span>Gosu Reference Guide</span> : 
    <span class="WebWorks_Breadcrumbs" style="text-align: left;">Find Expressions</span></div>
    <hr align="left" />
    <blockquote>
      <div class="CT_-_Chapter_Title"><a name="1005113">Find Expressions</a></div>
      <div class="B_-_Body"><a name="1139063">A Gosu </a><span class="cv_-_computer_voice">find()</span> statement lets you query the database and then iterate the results. This topic describes important concepts in writing <span class="cv_-_computer_voice">find()</span> statements to retrieve required data from the database.</div>
      <div class="NI_-_Note_Important">
        <span class="n_-_note">IMPORTANT   </span><a name="1370016">Although </a><span class="cv_-_computer_voice">find</span> expressions are supported, there is a newer improved system called query builder APIs. For new code, Guidewire <span class="s_-_strong">strongly recommends</span> that you use the newer query builder APIs rather than <span class="cv_-_computer_voice">find</span> expressions. For more information, see <a href="javascript:WWHClickedPopup('gosu', 'querybuilder.09.01.html#2180086', '');" title="Query Builder">“Query Builder”</a>.</div>
      <div class="zChapterTopics">This topic includes:<a name="1365638">&nbsp;</a></div>
      <div class="zChapterTopic_outer" style="margin-left: 57.6pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="zChapterTopic_inner" style="width: 9.899999999999998pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="zChapterTopic_inner"><a href="javascript:WWHClickedPopup('gosu', 'find.html#1216400', '');" title="Find Expressions" name="1458896">Basic Find Expressions</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="zChapterTopic_outer" style="margin-left: 57.6pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="zChapterTopic_inner" style="width: 9.899999999999998pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="zChapterTopic_inner"><a href="javascript:WWHClickedPopup('gosu', 'find.html#1359679', '');" title="Find Expressions" name="1458901">Using Exists Expressions in Finders for Database Joins</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="zChapterTopic_outer" style="margin-left: 57.6pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="zChapterTopic_inner" style="width: 9.899999999999998pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="zChapterTopic_inner"><a href="javascript:WWHClickedPopup('gosu', 'find.html#1359890', '');" title="Find Expressions" name="1458906">Find Expressions Using Special Substring Keywords</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="zChapterTopic_outer" style="margin-left: 57.6pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="zChapterTopic_inner" style="width: 9.899999999999998pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="zChapterTopic_inner"><a href="javascript:WWHClickedPopup('gosu', 'find.html#1289012', '');" title="Find Expressions" name="1458916">Using the Results of Find Expressions (Using Query Objects)</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="H1NB_-_Heading_1_No_Break"><a name="1216400">Basic Find Expressions</a></div>
      <div class="B_-_Body"><a name="1139055">Gosu </a><span class="cv_-_computer_voice">find</span> expressions lets you query the database using the existing product data model, including data model extensions. You can write very useful queries in a comprehensive yet concise manner. </div>
      <div class="B_-_Body"><a name="1358246">The main </a><span class="cv_-_computer_voice">find</span> expression uses the following syntax:</div>
      <div class="CS_-_Code_Single_Line"><a name="1137044">var q = find ( [var] &lt;identifier&gt; in &lt;query-path-expression&gt; where &lt;where-clause-expression&gt; )</a></div>
      <div class="B_-_Body"><a name="1137286">Finder expressions have the following parts:</a></div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="ri_-_run_in_header"><a name="1360778">The identifier.</a></span> This symbol labels the table (or join table) in the finder so you can more easily express criteria.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="ri_-_run_in_header"><a name="1360779">The ‘in’ clause as a query path expression. </a></span>The <span class="cv_-_computer_voice">in</span> clause query path looks similar to a Gosu object path but <span class="cv_-_computer_voice">in</span> clause query path begins with an entity type literal (or subtype literal) at its root. In contrast, an object path begins with a reference to an entity instance. </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LP2_-_List_Para_002c_Level_2"><a name="1360860">A query path expression: </a><span class="cv_-_computer_voice">Claim.Claimnumber</span> </div>
      <div class="LP2_-_List_Para_002c_Level_2"><a name="1360877">An object path expression: </a><span class="cv_-_computer_voice">claim.claimnumber</span></div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="ri_-_run_in_header"><a name="1137055">The ‘where’ clause expression. </a></span>This part defines the criteria for the finder. It uses all the same logical and relational expressions used elsewhere in Gosu. For instance, <span class="cv_-_computer_voice">or</span> and <span class="cv_-_computer_voice">and</span> logical expressions follow the same syntax rules, as do all the relational expressions: <span class="cv_-_computer_voice">==</span>, <span class="cv_-_computer_voice">!=</span>, <span class="cv_-_computer_voice">&gt;</span>, <span class="cv_-_computer_voice">&lt;</span>, <span class="cv_-_computer_voice">&gt;=</span>, and <span class="cv_-_computer_voice">&lt;=</span>. As everywhere else in Gosu, you may combine and nest expressions any way you like.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="1360931">Note the query path expression defined in the </a><span class="cv_-_computer_voice">in</span> clause must be defined in terms of an <span class="e_-_emphasis">absolute</span> object path with an entity type (or subtype) literal at its root. Conversely, a query expression in a <span class="cv_-_computer_voice">where</span> clause must be defined in terms of a <span class="e_-_emphasis">relative</span> object path with the finder’s identifier at the root. This compile-time restriction improves finder readability and consistency, and also prevents overly complex queries from entering the system.</div>
      <div class="B_-_Body"><a name="1359309">Evaluating a </a><span class="cv_-_computer_voice">find()</span> expression results in a <span class="cv_-_computer_voice">Query</span> instance, which you can use to iterate across the results. For more information about using results of a find query (<span class="cv_-_computer_voice">Query</span> instances), see <a href="javascript:WWHClickedPopup('gosu', 'find.html#1289012', '');" title="Find Expressions">“Using the Results of Find Expressions (Using Query Objects)”</a>.</div>
      <div class="B_-_Body"><a name="1359249">Express subexpressions as you would in any other Gosu construct. However, </a><span class="cv_-_computer_voice">where</span> clause expressions can only test a value on a property that is a <span class="s_-_strong">direct</span> property of the finder’s query path identifier. For example, if you are iterating across <span class="cv_-_computer_voice">Claim</span> entities, a simple query can only get properties directly from <span class="cv_-_computer_voice">Claim</span>, not properties of subobjects referenced by the claim. </div>
      <div class="NI_-_Note_Important">
        <span class="n_-_note">IMPORTANT   </span><a name="1360406">If you need </a><span class="cv_-_computer_voice">where</span> clause expressions that traverse more deeply in a path expression than one level (direct properties), use an <span class="cv_-_computer_voice">exists</span> expression in your <span class="cv_-_computer_voice">find</span> query. The <span class="cv_-_computer_voice">exists</span> expressions are incredibly powerful for you to execute complex application logic. Exists expressions can generate database <span class="cv_-_computer_voice">join</span> commands in the generated SQL query. See <a href="javascript:WWHClickedPopup('gosu', 'find.html#1359679', '');" title="Find Expressions">“Using Exists Expressions in Finders for Database Joins”</a> for more information.</div>
      <div class="HS_-_Head_Sub"><a name="1360422">Example 1</a></div>
      <div class="B_-_Body"><a name="1167609">The following simple </a><span class="cv_-_computer_voice">find</span> expression queries for all claims with a <span class="cv_-_computer_voice">LossType</span> of <span class="cv_-_computer_voice">"AUTO"</span>.</div>
      <div class="CS_-_Code_Single_Line"><a name="1137059">var q = find( claim in Claim where claim.LossType == "AUTO" ) </a></div>
      <div class="B_-_Body"><a name="1137061">This expression declares the variable </a><span class="cv_-_computer_voice">claim</span> and assigns it the type specified in the query path expression, which in this case is <span class="cv_-_computer_voice">Claim</span>. The <span class="cv_-_computer_voice">var</span> keyword before the variable <span class="cv_-_computer_voice">claim</span> is optional. The <span class="cv_-_computer_voice">where</span> clause expression in this example defines expressions in terms of <span class="cv_-_computer_voice">claim</span>. In this simple example, <span class="cv_-_computer_voice">claim.LossType == "AUTO"</span> matches all claims with <span class="cv_-_computer_voice">"AUTO"</span> loss types.</div>
      <div class="HS_-_Head_Sub"><a name="1137063">Example 2</a></div>
      <div class="B_-_Body"><a name="1167619">In the following more complicated example, an expression defines a more complex query path expression. The </a>expression joins <span class="cv_-_computer_voice">Claim</span> to <span class="cv_-_computer_voice">Policy</span>, then queries for all claims with a policy number of “54-123456”. </div>
      <div class="CS_-_Code_Single_Line"><a name="1360924">var q = find( var policy in Claim.Policy where policy.PolicyNumber == "54-123456" )</a></div>
      <div class="B_-_Body"><a name="1360925">Note the query path expression in the </a><span class="cv_-_computer_voice">in</span> clause is an <span class="e_-_emphasis">absolute</span> object path with an entity type (or subtype) literal at its root. The query expression in the <span class="cv_-_computer_voice">where</span> clause is a <span class="e_-_emphasis">relative</span> object path with the finder’s identifier at the root. </div>
      <div class="HS_-_Head_Sub"><a name="1360926">Example 3</a></div>
      <div class="B_-_Body"><a name="1360927">In the following example, the expression uses a subtype in the </a><span class="cv_-_computer_voice">in</span> clause to restrict the query to Person-type contact entities (as opposed to Company, for example). The query searches for males born after January 1, 1982.</div>
      <PRE class="CF_-_Code_First_Line"><a name="1254251">var q = find(var people in Person where people.Gender == "M" and people.DateOfBirth &gt;= "1982-01-01")</a></PRE>
      <div class="H2_-_Heading_2"><a name="1137068">Find Expressions Using AND/OR</a></div>
      <div class="B_-_Body"><a name="1137069">Logical </a><span class="cv_-_computer_voice">AND</span> or <span class="cv_-_computer_voice">OR</span> expressions in a <span class="cv_-_computer_voice">where</span> clause are fundamentally the same as those used elsewhere in Gosu. </div>
      <div class="B_-_Body"><a name="1167643">The following example expands the code shown in </a><a href="javascript:WWHClickedPopup('gosu', 'find.html#1360422', '');" title="Find Expressions">Example 1</a> in the previous section to refine the criteria. The query now excludes claims with accident type 46 (<span class="e_-_emphasis">collision with fixed object</span>).</div>
      <div class="CS_-_Code_Single_Line"><a name="1137071">var q = find( c in Claim where c.LossType == "AUTO" and c.AccidentType != "46" )</a></div>
      <div class="B_-_Body"><a name="1359417">It adds the “</a><span class="cv_-_computer_voice">and</span>” operator to refine the query with the additional <span class="cv_-_computer_voice">c.AccidentType != "46"</span> expression.</div>
      <div class="B_-_Body"><a name="1359423">The following example expands </a><a href="javascript:WWHClickedPopup('gosu', 'find.html#1360422', '');" title="Find Expressions">Example 1</a> again and refines the query even further to include all claims with unassigned loss types.</div>
      <div class="CS_-_Code_Single_Line"><a name="1137077">var q = find( c in Claim where c.LossType == null or c.LossType == "AUTO" and c.AccidentType != "46" )</a></div>
      <div class="B_-_Body"><a name="1358370">This construction adds the </a><span class="cv_-_computer_voice">c.LossType == null</span> criteria separated by with an <span class="cv_-_computer_voice">or</span> operator. Appending this condition would produce the same result as the <span class="cv_-_computer_voice">and</span> operator has precedence. To change the criteria so that Gosu evaluates the <span class="cv_-_computer_voice">or</span> expression first, use parenthesis to change the order of evaluation.</div>
      <PRE class="CF_-_Code_First_Line"><a name="1358371">var q = find( c in Claim where (c.LossType == null or c.LossType == "AUTO") </a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="1358375">&nbsp;</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and c.AccidentType != "46" )</PRE>
      <div class="B_-_Body"><a name="1358372">Since parentheses surround the two parts of the </a><span class="cv_-_computer_voice">or</span> expression, Gosu evaluates this condition differently then if the parentheses were not there. You may nest expressions in this manner to any level necessary.</div>
      <div class="H2_-_Heading_2"><a name="1137084">Find Expressions Using Equality and Relational Operators</a></div>
      <div class="B_-_Body"><a name="1137782">Gosu uses the following equality and relational operators in logical expressions:</a></div>
      <div class="T_-_Table"><a name="1361377">&nbsp;</a></div>
      <table class="withHeading" style="text-align: left" cellspacing="10" summary="">
        <caption></caption>
        <tr>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 1px; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: bottom">
            <div class="TH_-_Table_Heading"><a name="1361398">Equality expressions </a></div>
          </td>
        </tr>
        <tr>
          <td style="border-top-color: #000000; border-top-style: solid; border-top-width: 1px; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text" style="color: #000000; font-family: &quot;Lucida Sans Typewriter&quot;; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline"><span class="cv_-_computer_voice"><a name="1361400">==</a></span></div>
            <div class="TT_-_Table_Text" style="color: #000000; font-family: &quot;Lucida Sans Typewriter&quot;; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline"><span class="cv_-_computer_voice"><a name="1361401">!=</a></span></div>
          </td>
        </tr>
      </table>
      <div class="T_-_Table"><a name="1361394">&nbsp;</a></div>
      <table class="withHeading" style="text-align: left" cellspacing="10" summary="">
        <caption></caption>
        <tr>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 1px; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: bottom">
            <div class="TH_-_Table_Heading"><a name="1361403">Relational expressions </a></div>
          </td>
        </tr>
        <tr>
          <td style="border-top-color: #000000; border-top-style: solid; border-top-width: 1px; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text" style="color: #000000; font-family: &quot;Lucida Sans Typewriter&quot;; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline"><span class="cv_-_computer_voice"><a name="1361405">&lt;</a></span></div>
            <div class="TT_-_Table_Text" style="color: #000000; font-family: &quot;Lucida Sans Typewriter&quot;; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline"><span class="cv_-_computer_voice"><a name="1361406">&gt;</a></span></div>
            <div class="TT_-_Table_Text" style="color: #000000; font-family: &quot;Lucida Sans Typewriter&quot;; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline"><span class="cv_-_computer_voice"><a name="1361407">&lt;=</a></span></div>
            <div class="TT_-_Table_Text" style="color: #000000; font-family: &quot;Lucida Sans Typewriter&quot;; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline"><span class="cv_-_computer_voice"><a name="1361408">&gt;=</a></span></div>
          </td>
        </tr>
      </table>
      <div class="B_-_Body"><a name="1359440">For more information about these expressions, see </a><a href="javascript:WWHClickedPopup('gosu', 'expressions.05.06.html#1572522', '');" title="Equality Expressions">“Equality Expressions”</a> and <a href="javascript:WWHClickedPopup('gosu', 'expressions.05.11.html#1551298', '');" title="Relational Expressions">“Relational Expressions”</a>.</div>
      <div class="B_-_Body"><a name="1359464">Like logical </a><span class="cv_-_computer_voice">and</span> and logical <span class="cv_-_computer_voice">or</span> expressions, equality and relational expressions in a <span class="cv_-_computer_voice">where</span> clause are fundamentally the same as those used elsewhere in Gosu. </div>
      <div class="B_-_Body"><a name="1359465">However, there are two restrictions that differentiate these expressions used in a </a><span class="cv_-_computer_voice">where</span> clause:</div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="ri_-_run_in_header"><a name="1359466">Left-hand side must be a relative query path expression.</a></span> The left-hand side of the operator must be a relative query path expression with the finder’s identifier as the root. In addition the query path must only be one property deep, which means only the identifier’s immediate properties can be referenced. For instance, if the query started with “<span class="cv_-_computer_voice">find c in Claim where</span> ...”, then the expression <span class="cv_-_computer_voice">c.AssignedGroup</span> is legal. However, <span class="cv_-_computer_voice">c.AssignedGroup.GroupType</span> is illegal because the property <span class="cv_-_computer_voice">GroupType</span> is not a direct property of <span class="cv_-_computer_voice">Claim</span>. The previous examples all demonstrate this rule.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="NI_-_Note_Important">
        <span class="n_-_note">IMPORTANT   </span><a name="1359512">If you need </a><span class="cv_-_computer_voice">where</span> clause expressions that traverse more deeply in a path expression than one level (direct properties), use an <span class="cv_-_computer_voice">exists</span> expression in your <span class="cv_-_computer_voice">find</span> query. The <span class="cv_-_computer_voice">exists</span> expressions are incredibly powerful tools for you to execute complex application logic. Such expressions can generate database join commands in the generated SQL query. See <a href="javascript:WWHClickedPopup('gosu', 'find.html#1359679', '');" title="Find Expressions">“Using Exists Expressions in Finders for Database Joins”</a> for more information.</div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="ri_-_run_in_header"><a name="1137089">Right-hand side must not include a query path expression.</a></span> The right-hand side of the operator must not reference a query path expression. This means that queries cannot compare query properties dynamically. All other Gosu expressions are legal on the right-hand side. </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LP_-_List_Para"><a name="1360718">There are some subtle distinctions, however:</a></div>
      <div class="BI2_-_Bullet_Item_002c_Level_2_outer" style="margin-left: 67pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner"><a name="1360707">The expression </a><span class="cv_-_computer_voice">Claim.LossDate == Exposure.AssignmentDate</span> is <span class="e_-_emphasis">illegal</span> because <span class="cv_-_computer_voice">Exposure.AssignmentDate</span> is a query path expression and not an object path expression. </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI2_-_Bullet_Item_002c_Level_2_outer" style="margin-left: 67pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner"><a name="1360708">The expression </a><span class="cv_-_computer_voice">Claim.LossDate == exposure.AssignmentDate</span> is <span class="e_-_emphasis">legal</span>, assuming that <span class="cv_-_computer_voice">exposure</span> is an instance of an exposure (an instance of the <span class="cv_-_computer_voice">Exposure</span> entity type).</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="1137091">The precedence rules for equality and relational expressions if used in a </a><span class="cv_-_computer_voice">where</span> clause are the same as within other Gosu constructs. This means that relational operators always have precedence over equality operators.</div>
      <div class="B_-_Body"><a name="1370424">Because a find query is a high-level abstraction for generating database SQL queries, virtual properties or </a>method calls are <span class="s_-_strong">illegal</span> in the <span class="cv_-_computer_voice">where</span> clause of a <span class="cv_-_computer_voice">find</span> expression. A property is <span class="e_-_emphasis">virtual</span> if Gosu generates it dynamically by Gosu at the time it is accessed. Virtual properties do not directly mirror a single actual database column so there is typically no direct translation of what the corresponding SQL would be. If you are not sure whether a property is virtual, refer to the application Data Dictionary.</div>
      <div class="B_-_Body"><a name="1361804">For related information, see </a><a href="javascript:WWHClickedPopup('gosu', 'classes.11.4.html#2447772', '');" title="Properties">“Properties”</a>.</div>
      <div class="NI_-_Note_Important">
        <span class="n_-_note">IMPORTANT   </span><a name="1359587">You cannot reference an entity’s virtual properties or methods in a </a><span class="cv_-_computer_voice">find</span> query.</div>
      <div class="H2_-_Heading_2"><a name="1359589">Find Expressions Using ‘Where...In’ Clauses</a></div>
      <div class="B_-_Body"><a name="1137093">To test if the value on the left hand side is present in an array, use an additional </a><span class="cv_-_computer_voice">in</span> clause from within the <span class="cv_-_computer_voice">where</span> clause. </div>
      <div class="B_-_Body"><a name="1137095">For instance, the following example finds claims with a </a><span class="cv_-_computer_voice">LossCause</span> matching one or more literal values in a dynamically created array.</div>
      <div class="CS_-_Code_Single_Line"><a name="1137097">find( c in Claim where c.LossCause in new LossCause[] {"vandalism","theftparts","theftentire"} )</a></div>
      <div class="B_-_Body"><a name="1137099">This next example finds all the activities directly related to a specified claim’s matters.</a></div>
      <div class="CS_-_Code_Single_Line"><a name="1137101">find( a in Activity where a.Matter in claim.Matters )</a></div>
      <div class="B_-_Body"><a name="1359676">As with equality and relational operators, the </a><span class="cv_-_computer_voice">in</span> operator requires a relative query expression on the left-hand side. In addition, the right hand side must be coercible to an array that is compatible with the left-hand side’s type. Consequently, the legal right hand side values include arrays, collections, result sets, and <span class="cv_-_computer_voice">String</span> objects (strings are treated as arrays of characters).</div>
      <div class="H1NB_-_Heading_1_No_Break"><a name="1359679">Using Exists Expressions in Finders for Database Joins</a></div>
      <div class="B_-_Body"><a name="1359680">To create search criteria that expand into a finder’s query-path-expression deeper than one level (direct proper</a>ties), use the <span class="cv_-_computer_voice">exists</span> construction within your <span class="cv_-_computer_voice">where</span> expressions. In essence, an <span class="cv_-_computer_voice">exists</span> expression creates a sort of subfinder using a containing finder’s related property. Using <span class="cv_-_computer_voice">exists</span> expressions are an incredibly powerful and useful method for you to execute complex database queries. An <span class="cv_-_computer_voice">exists</span> expression is especially useful if you need to test a value on a property that is not a <span class="s_-_strong">direct</span> property of the finder’s query path identifier. In other words, if a simple query iterating across a <span class="cv_-_computer_voice">Claim</span> entities can test properties directly on <span class="cv_-_computer_voice">Claim</span>, not subproperties of objects that are referenced by the claim.</div>
      <div class="B_-_Body"><a name="1360559">An </a><span class="cv_-_computer_voice">exists</span> expression is a Gosu feature not strictly tied to find expressions or database queries. However, <span class="cv_-_computer_voice">exists</span> expressions are particularly useful within a <span class="cv_-_computer_voice">find</span> query. See <a href="javascript:WWHClickedPopup('gosu', 'expressions.05.08.html#1560765', '');" title="Existence Testing Expressions">“Existence Testing Expressions”</a> for other uses of an <span class="cv_-_computer_voice">exists</span> expression.</div>
      <div class="B_-_Body"><a name="1360534">The syntax of an exists clause in a where expression is:</a></div>
      <PRE class="CF_-_Code_First_Line"><a name="1360570">where ... exists ( </a><span class="pc_-_parameter_in_code">subQueryIdentifier</span> in <span class="pc_-_parameter_in_code">queryPathExpression</span> where <span class="pc_-_parameter_in_code">whereExpression</span> )</PRE>
      <div class="B_-_Body"><a name="1360979">The </a><span class="p_-_parameter">queryPathExpression</span> must be a query path expression with an entity type literal (or entity subtype literal) at the root. See <a href="javascript:WWHClickedPopup('gosu', 'find.html#1216400', '');" title="Find Expressions">“Basic Find Expressions”</a> for more information. </div>
      <div class="B_-_Body"><a name="1360986">The </a><span class="p_-_parameter">whereExpression</span> must be a Gosu standard <span class="cv_-_computer_voice">where</span> clause. See <a href="javascript:WWHClickedPopup('gosu', 'find.html#1216400', '');" title="Find Expressions">“Basic Find Expressions”</a> for more information. </div>
      <div class="B_-_Body"><a name="1361028">Note the query path expression defined in the </a><span class="cv_-_computer_voice">in</span> clause must be defined in terms of an <span class="e_-_emphasis">absolute</span> object path with an entity type (or subtype) literal at its root. Conversely, a query expression in a <span class="cv_-_computer_voice">where</span> clause must be defined in terms of a <span class="e_-_emphasis">relative</span> object path with the finder’s identifier at the root.</div>
      <div class="B_-_Body"><a name="1360687">For example, the following is an example finder expression:</a></div>
      <PRE class="CF_-_Code_First_Line"><a name="1360690">find( c in Claim where c.LossType == "AUTO" and exists( </a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="1360691">&nbsp;</a>&nbsp;group in Claim.Exposures.AssignedGroup where group.GroupType == "autofasttrack" ) )</PRE>
      <div class="B_-_Body"><a name="1361437">If an </a><span class="cv_-_computer_voice">exists</span> expression appears within a <span class="cv_-_computer_voice">find</span> expression, Gosu optimizes the database query to retrieve data based on potentially complex Gosu expressions. Gosu might generate complex database queries including database join commands if needed. Database joins are a feature of databases and query languages that push resource-intensive work and intelligence to the database if querying data from two or more database tables.</div>
      <div class="B_-_Body"><a name="1358959">Generally speaking you do not need to worry about what SQL is generated, including any hidden database join </a>operations. However, some finder expressions may have large performance considerations. Guidewire recommends you consider both frequency and context of a query’s execution and assess the performance implications. Always run performance tests with large data sets and check for unexpected performance issues, experimenting with variants of your query expressions as necessary.</div>
      <div class="NI_-_Note_Important">
        <span class="n_-_note">IMPORTANT   </span><a name="1360159">Although all find expressions generate SQL queries to the database from Gosu expres</a>sions, <span class="cv_-_computer_voice">find</span> expressions do not directly support full SQL syntax. For example, you cannot directly use SQL <span class="cv_-_computer_voice">JOIN</span> command because that keyword is not supported.</div>
      <div class="HS_-_Head_Sub"><a name="1360506">Example </a></div>
      <div class="B_-_Body"><a name="1360507">The following example for ClaimCenter queries for all activities with a particular activity pattern for a particular </a>claim number:</div>
      <PRE class="CF_-_Code_First_Line"><a name="1360608">var activities = find (activity in activity </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1360644">&nbsp;</a>&nbsp;where activity.ActivityPattern == ActivityPattern( "default_data:10003" /* contact_insured */ )</PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="1360661">&nbsp;</a>&nbsp;and exists (c in activity.Claim where c.ClaimNumber == "235-53-365889"))</PRE>
      <div class="H2_-_Heading_2"><a name="1360475">Fixing Invalid Queries by Adding Exists Clauses</a></div>
      <div class="B_-_Body"><a name="1360498">For some types of queries, you must use an </a><span class="cv_-_computer_voice">exists</span> expression to properly convey the application logic in an efficient way. Some types of queries generates Gosu syntax errors if you break the rules of a basic query, and in some cases it can be rewritten simply using exists expressions. </div>
      <div class="B_-_Body"><a name="1360476">For example, the following query expression is </a><span class="s_-_strong">illegal</span> because the <span class="cv_-_computer_voice">GroupType</span> property is not a direct property of the entity for which the query searches. The query attempts to find all claims in which the loss type is <span class="cv_-_computer_voice">"AUTO"</span> and which has an exposure with assigned group of type <span class="cv_-_computer_voice">autofasttrack</span>.</div>
      <PRE class="CF_-_Code_First_Line"><a name="1358726">//Illegal expression</a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="1358727">find( c in Claim where c.LossType == "AUTO" and c.Exposures.AssignedGroup.GroupType == "autofasttrack")</a></PRE>
      <div class="B_-_Body"><a name="1358728">The path expression </a><span class="cv_-_computer_voice">c.Exposures.AssignedGroup.GroupType</span> is illegal in a simple query because <span class="cv_-_computer_voice">GroupType</span> is not a direct property of a <span class="cv_-_computer_voice">Claim</span>, which is the type of the iteration variable <span class="cv_-_computer_voice">c</span>. If a finder’s criteria must traverse deeper into the primary query path to retrieve a property, the query must define an <span class="cv_-_computer_voice">exists</span> expression. The <span class="cv_-_computer_voice">exists</span> expression must describe the expanding part of the criteria beyond the original entity. </div>
      <div class="B_-_Body"><a name="1167663">The following valid example correctly finds all claims in which the loss type is </a><span class="cv_-_computer_voice">"AUTO"</span> and which has an exposure with assigned group of type <span class="cv_-_computer_voice">autofasttrack</span>.</div>
      <PRE class="CF_-_Code_First_Line"><a name="1138207">find( c in Claim where c.LossType == "AUTO" and exists( </a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="1360750">&nbsp;</a>&nbsp;group in Claim.Exposures.AssignedGroup where group.GroupType == "autofasttrack" ) )</PRE>
      <div class="N_-_Note">
        <span class="n_-_note">Note: </span><a name="1360751">For those people familiar with implementation details of SQL joins, the example generates a reverse </a>join from claim to exposure and a forward join from exposure to group. The reverse join is actually a subquery nested in the outer finder’s query.</div>
      <div class="H2_-_Heading_2"><a name="1358792">Combining Exists Expressions</a></div>
      <div class="B_-_Body"><a name="1359065">A finder may nest and combine </a><span class="cv_-_computer_voice">exists</span> expressions to any level desired. In other words, <span class="cv_-_computer_voice">exists</span> expressions can contain and combine one or more other <span class="cv_-_computer_voice">exists</span> expressions, and the outer find query can contain more than one <span class="cv_-_computer_voice">exists</span> expression.</div>
      <div class="H1NB_-_Heading_1_No_Break"><a name="1359890">Find Expressions Using Special Substring Keywords</a></div>
      <div class="B_-_Body"><a name="1358087">You can also use </a><span class="cv_-_computer_voice">find</span> expressions to search a portion of a string value, in other words to search for a substring. To search on a few initial characters, use the special keyword <span class="cv_-_computer_voice">startswith</span>. </div>
      <div class="B_-_Body"><a name="1359738">For example, the following query uses </a><span class="cv_-_computer_voice">startswith</span>:</div>
      <div class="CS_-_Code_Single_Line"><a name="1238470">var query = find (var branch in Group where branch.Name startswith "Ac") </a></div>
      <div class="B_-_Body"><a name="1238475">If a branch’s name starts with </a><span class="cv_-_computer_voice">Ac</span>, it succeeds. For example, the name <span class="cv_-_computer_voice">"Acme Insurance"</span>.</div>
      <div class="B_-_Body"><a name="1221046">To find a substring embedded in a larger string, use the special keyword </a><span class="cv_-_computer_voice">contains</span>. For example:</div>
      <div class="CS_-_Code_Single_Line"><a name="1357973">var query = find (clm in Claim where clm.ClaimNumber contains "12")</a></div>
      <div class="H1NB_-_Heading_1_No_Break"><a name="1289012">Using the Results of Find Expressions (Using Query Objects)</a></div>
      <div class="B_-_Body"><a name="1289014">Evaluating a </a><span class="cv_-_computer_voice">find</span> expression results in a <span class="cv_-_computer_voice">Query</span> object, which you use to navigate or otherwise access items in the result. Items in <span class="cv_-_computer_voice">Query</span> objects are entity instances of the type declared in the query path expression. For instance, if you are querying <span class="cv_-_computer_voice">Contact</span> objects, the resulting type is a <span class="cv_-_computer_voice">ContactQuery</span>. Query types have the same inheritance hierarchy that the entities have, for example: <span class="cv_-_computer_voice">PersonQuery</span> extends <span class="cv_-_computer_voice">ContactQuery</span>.</div>
      <div class="B_-_Body"><a name="1359781">You extract the results of a query by using the </a><span class="cv_-_computer_voice">query.iterator</span> method, which returns an <span class="cv_-_computer_voice">Iterator</span> to use to navigate within the results. You can avoid an explicit call to the <span class="cv_-_computer_voice">iterator</span> method by using the <span class="cv_-_computer_voice">Query</span> object in a <span class="cv_-_computer_voice">for...in</span> statement. The <span class="cv_-_computer_voice">iterator</span> method is used indirectly whenever you use the query in a <span class="cv_-_computer_voice">for...in</span> statement.</div>
      <div class="HS_-_Head_Sub"><a name="1403591">When Data for Find Expressions Is Loaded</a></div>
      <div class="B_-_Body"><a name="1420602">Defining a </a><span class="cv_-_computer_voice">find</span> expression to obtain a query object does not immediately load data from the database. The server loads data from the database into a find query only at the time your code uses the query. For example, the server loads data at the time your code gets an item from the iterator or calls the <span class="cv_-_computer_voice">query.getCount</span> method. </div>
      <div class="HS_-_Head_Sub"><a name="1428583">Performance Considerations for Find Expressions</a></div>
      <div class="B_-_Body"><a name="1428599">If you execute multiple </a><span class="cv_-_computer_voice">find</span> expressions, each expression sets up a separate query against the database. Write your code in such a way as to minimize the number of queries that run against the database.</div>
      <div class="NI_-_Note_Important">
        <span class="n_-_note">IMPORTANT   </span><a name="1428823">Be careful not to use too many criteria in </a><span class="cv_-_computer_voice">find</span> expressions. Be careful to design your <span class="cv_-_computer_voice">find</span> expressions to extract only the data you need.</div>
      <div class="HS_-_Head_Sub"><a name="1428663">Setting the Page Size for Retrieving Results from Find Expressions</a></div>
      <div class="B_-_Body"><a name="1428898">The </a><span class="cv_-_computer_voice">Iterator</span> object returned by the <span class="cv_-_computer_voice">query.iterator</span> method retrieves data from the server all at once or one page at a time. Page-based retrieval of query data can help avoid large result sets from loading into memory all at once. Loading large results into memory all at once can lead to performance problems or out-of-memory errors. </div>
      <div class="B_-_Body"><a name="1428902">You turn on page-level retrieval and limit the page size for an individual </a><span class="cv_-_computer_voice">Query</span> object by calling the <span class="cv_-_computer_voice">setPageSize</span> method. Specify the number of items per page. If you do not set a page size explicitly on a <span class="cv_-_computer_voice">Query</span> object, results load at one time without page-based retrieval. </div>
      <div class="H2_-_Heading_2"><a name="1361185">Basic Iterator Example</a></div>
      <div class="B_-_Body"><a name="1220599">The following example demonstrates how to navigate the results of a simple </a><span class="cv_-_computer_voice">find()</span> expression using the <span class="cv_-_computer_voice">iterator()</span> method. Notice how the <span class="cv_-_computer_voice">for...in</span> expression can directly handle an iterator. This is the preferred way to navigate a <span class="cv_-_computer_voice">Query</span>.</div>
      <PRE class="CF_-_Code_First_Line"><a name="1447005">var query = find( p in Claim.Policy where p.PolicyNumber == "54-123456" )</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1447006">for( claim in query ) {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1447007">&nbsp;</a>&nbsp;print( claim.ClaimNumber )</PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="1447008">}</a></PRE>
      <div class="H2_-_Heading_2"><a name="1220606">Large Query Finder Results Example</a></div>
      <div class="B_-_Body"><a name="1220607">If there are concerns about producing an excessively large </a><span class="cv_-_computer_voice">Query</span>, Guidewire recommends that you maintain an entity count and terminate the iteration, if necessary. </div>
      <div class="B_-_Body"><a name="1359859">The following example throws an exception indicating that the results are too large to process.</a></div>
      <PRE class="CF_-_Code_First_Line"><a name="1447021">var query = find( p in Claim.Policy where p.PolicyNumber == "54-123456" )</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1447022">var iCount = 0</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1447023">for( claim in query ) {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1447024">&nbsp;</a>&nbsp;print( claim.ClaimNumber )</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1447025">&nbsp;</a>&nbsp;iCount = iCount + 1</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1447026">&nbsp;</a>&nbsp;if( iCount == 1000 ) {</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1447027">&nbsp;</a>&nbsp;&nbsp;&nbsp;throw "Too many claims to process."</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1447028">&nbsp;</a>&nbsp;}</PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="1447029">}</a></PRE>
      <div class="H2_-_Heading_2"><a name="1220627">Sort Results Example</a></div>
      <div class="B_-_Body"><a name="1220628">Finally, you can set the sort order in the </a><span class="cv_-_computer_voice">Query</span> using the following methods:</div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt; margin-bottom: 2.0pt; vertical-align: baseline">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;color: #000000; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner" style="color: #000000; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none"><span class="cv_-_computer_voice"><a name="1220629">addAscendingSortColumn()</a></span></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt; margin-bottom: 2.0pt; vertical-align: baseline">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;color: #000000; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner" style="color: #000000; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none"><span class="cv_-_computer_voice"><a name="1220630">addDescendingSortColumn()</a></span></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="1447052">The following example sorts claims by </a><span class="p_-_parameter">ClaimNumber</span>.</div>
      <PRE class="CF_-_Code_First_Line"><a name="1447053">var query = find( p in Claim.Policy where p.PolicyNumber == "54-123456" )</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1447054">query.addAscendingSortColumn( "Claim.ClaimNumber" )</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1447055">for( claim in query ) {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1447056">&nbsp;</a>&nbsp;print( claim.ClaimNumber )</PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="1447057">}</a></PRE>
      <div class="H2_-_Heading_2"><a name="1137173">Returning a Single Row of Finder Results</a></div>
      <div class="B_-_Body"><a name="1232079">You can use the </a><span class="cv_-_computer_voice">getAtMostOneRow()</span> method to retrieve a single item from the <span class="cv_-_computer_voice">find()</span> expression. </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="1232149">If a single item exists, the method returns it. </a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="1232154">If no item exists, the method returns </a><span class="cv_-_computer_voice">null</span>. </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="1232155">If more than one item exists, the method throws an exception. </a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="1232156">Use this method only if you are sure that </a><span class="cv_-_computer_voice">find()</span> expression returns a single item. Otherwise, you need to handle the exception condition that occurs.</div>
      <div class="B_-_Body"><a name="1232180">For example, the following code calls the Gosu class function </a><span class="cv_-_computer_voice">findActivityPattern()</span> to find a matching activity pattern and prints an error if the function call returns more than one item.</div>
      <PRE class="CM_-_Code_Middle_Line"><a name="1232193">try { </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1232200">&nbsp;</a>&nbsp;var pattern = new act.findActivityPattern( "initial_30day_review", "general") </PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1232201">} catch (e) { </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1232204">&nbsp;</a>&nbsp;print("Query returned more than one row.")  </PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1232205">} </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1232081">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1232206">//Gosu Class Function</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1232208">package act</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1232209">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1232210">class findActivityPattern {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1232214">&nbsp;</a>&nbsp;public function findActivityPattern( code : String, type : ActivityType ) : ActivityPattern {</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1232215">&nbsp;</a>&nbsp;&nbsp;&nbsp;var query = find( ap in ActivityPattern where ap.code == code and ap.Type == type)</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1232216">&nbsp;</a>&nbsp;&nbsp;&nbsp;return query.getAtMostOneRow()</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1232217">&nbsp;</a>&nbsp;}</PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="1232085">}</a></PRE>
      <div class="B_-_Body"><a name="1361062">See “</a><a href="javascript:WWHClickedPopup('gosu', 'classes.11.1.html#1005113', '');" title="Classes">“Classes”</a>” for details on how to write Gosu classes. Also, see <a href="javascript:WWHClickedPopup('gosu', 'exceptionhandling.07.1.html#1470058', '');" title="Exception Handling">“Exception Handling”</a> for more information on using <span class="cv_-_computer_voice">try...catch...</span> statements.</div>
      <div class="H2_-_Heading_2"><a name="1361064">Found Entities Are Read-only Until Added to a Bundle</a></div>
      <div class="B_-_Body"><a name="1361065">Entities that you iterate across after a find query are read-only by default. The entity is loaded in a read-only </a><span class="e_-_emphasis">bundle</span>, which is a collection of entities loaded from the database into server memory. By default, find query results are returned in their own read-only bundle separate from the active read-write bundle of any running code. </div>
      <div class="B_-_Body"><a name="1370197">To change a read-only entity’s properties, you must move the entity to a new writable bundle. Typical code adds </a>the entity to the <span class="e_-_emphasis">current bundle</span> of the running code. For example, if your Gosu code is triggered from a rule set or a plugin method, there is a current bundle that you can access. Simply add each entity to the new bundle to permit changes to the entity and mark the entity as changed. After the entity changes and the new bundle commits successfully, all entity changes are copied to the database. Remember that an entity cannot safely exist in more than one writable (read-write) bundle.</div>
      <div class="B_-_Body"><a name="1370163">To move the entity to a writable bundle, call the </a><span class="cv_-_computer_voice">add</span> method on a bundle and save the result of the <span class="cv_-_computer_voice">add</span> method.</div>
      <div class="NI_-_Note_Important">
        <span class="n_-_note">IMPORTANT   </span><a name="1370164">If you passed a read-only entity to a writable bundle, the return result of the </a><span class="cv_-_computer_voice">add</span> method is a cloned instance of the entity you passed to the method. If you want a reference to the entity so you can make further changes, you must keep a reference to the <span class="s_-_strong">return</span><span class="s_-_strong">&nbsp;</span><span class="s_-_strong">result</span> of the <span class="cv_-_computer_voice">add</span> method. Do not modify the original entity reference. Do not keep a reference to the original entity.</div>
      <div class="B_-_Body"><a name="1370097">For example:</a></div>
      <PRE class="CF_-_Code_First_Line"><a name="1360273">// get the current (ambient) bundle of the runing code</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1360282">var bundle = gw.transaction.Transaction.getCurrent()</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1360289">&nbsp;</a></PRE>
      <PRE class="CF_-_Code_First_Line"><a name="1360295">var query = find( p in Claim.Policy where p.PolicyNumber == "54-123456" )</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1360306">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1360307">for( claim in query ) {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1360314">&nbsp;</a>&nbsp;var c = bundle.add(claim)</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1360367">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1360368">&nbsp;</a>&nbsp;// make changes to one or more properties directly on the entity or its subobjects</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1361110">&nbsp;</a>&nbsp;c.MyProperty1 = true</PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="1360299">}</a></PRE>
      <div class="NI_-_Note_Important">
        <span class="n_-_note">IMPORTANT   </span><a name="1361126">For more information about bundles and transactions, see </a><a href="javascript:WWHClickedPopup('gosu', 'transactions.21.1.html#1456387', '');" title="Bundles and Transactions">“Bundles and Transactions”</a>, which discusses the issue and related APIs in much more detail.</div>
      <div class="H2_-_Heading_2"><a name="1360246">Queries Are Always Dynamic</a></div>
      <div class="B_-_Body"><a name="1360028">A query is always dynamic and returns results that may change if you use the object again. Some results may </a>have been added, changed, or removed from the database from one use of the query object to another use of the query, even within the same function.</div>
      <div class="B_-_Body"><a name="1360070">A common mistake is calling the </a><span class="cv_-_computer_voice">count</span> method of a query to get the current count of items and then rely on that number remaining constant. Although that number might be useful in some contexts, it might be different from the number of items returned from a query even if you iterate across it immediately afterward. Some results may add, change, or remove from the database between the time you call the <span class="cv_-_computer_voice">count</span> method and the time you iterate across it.</div>
      <div class="HS_-_Head_Sub"><a name="1360015">Bad Example:</a></div>
      <PRE class="CF_-_Code_First_Line"><a name="1360088">// Bad example. Do not do this... </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1360089">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1360087">Var myResult = find ( /* some query here... */ )</a></PRE>
      <PRE class="CM_-_Code_Middle_Line" style="font-style: normal; font-variant: normal; font-weight: bold; text-transform: none; vertical-align: baseline"><a name="1360017">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line" style="font-style: normal; font-variant: normal; font-weight: bold; text-transform: none; vertical-align: baseline"><span class="s_-_strong"><a name="1360270">Var myArray = new Claim[ myResult.count() ];</a></span></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1360018">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1360108">For ( x in myResult index y )</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1360019">{</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1360020">&nbsp;</a>&nbsp;myArray[y] = x;</PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="1360021">}</a></PRE>
      <div class="B_-_Body"><a name="1360023">In most cases, you severely risk of an “array out of bounds” error at run time. </a></div>
      <div class="B_-_Body"><a name="1360120">Instead, iterate across the set and count upward, appending items to a </a><span class="cv_-_computer_voice">List</span> as necessary.</div>
      <div class="B_-_Body"><a name="1136063">&nbsp;</a></div>
      <script type="text/javascript" language="JavaScript1.2">
        <!--
          // Clear related topics
          //
          WWHClearRelatedTopics();

          document.writeln(WWHRelatedTopicsInlineHTML());
        // -->
      </script>
    </blockquote>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag() + WWHALinksDivTag());
      // -->
    </script>
  </body>
</html>