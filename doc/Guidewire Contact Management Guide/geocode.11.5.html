<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <!-- MOTW-DISABLED saved from url=(0014)about:internet -->
    <title>Proximity Search and Geocoding with Gosu</title>
    <link rel="StyleSheet" href="css/geocode.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        var  WebWorksRootPath = "";
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        // Set reference to top level help frame
        //
        var  WWHFrame = WWHGetWWHFrame("", true);
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
    <!-- THE FOLLOWING IS A GUIDEWIRE STYLE DEFINITION FOR THE LINK TO THIS FEATURE -->
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <!-- THE FOLLOWING IS A GUIDEWIRE GSCRIPT FUNCTION FOR THE LINK TO THIS FEATURE -->
    <script type="text/javascript">
function guidewire_selectall()
{
var text_val=eval("document.linktothisurlform.urlfield");
text_val.focus();
text_val.select();
}
</script>
  </head>
  <body onLoad="WWHUpdate();" onUnload="WWHUnload();" onKeyDown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onKeyPress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onKeyUp="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">
    <!-- THE FOLLOWING IS A GUIDEWIRE DIV FOR THE 'LINK TO THIS' FEATURE -->
    <div id="linkToThisPage" class="popup" style="display: none;">
      <div class="popupTitle">Link Directly to This Page 
           <a href="#" onclick="var thePopup = getElementById('linkToThisPage');thePopup.style.display='none';return false;"><img class="popupClosebox" src="wwhelp/wwhimpl/common/images/close.gif" /></a></div>
      <div style="padding:6px;">
        <div class="popupText" id="linkToThisPageBookmark">An error has occurred if you see this messsage.</div>
        <form name="linktothisurlform" method="post" action="" style="width:275px;margin:0px">
          <input type="text" class="popupURLText" id="linkToThisPageURL" name="urlfield" rows="1" cols="55" onClick="guidewire_selectall();" onFocus="guidewire_selectall();"></input>
        </form>
      </div>
    </div>
    <br />
    <div class="WebWorks_Breadcrumbs" style="text-align: left;">
      <span>Guidewire Contact Management Guide</span> : 
    <span class="WebWorks_Breadcrumbs" style="text-align: left;"><a class="WebWorks_Breadcrumb_Link" href="geocode.11.1.html#4821232">Proximity Search Using Geocoding</a> : Proximity Search and Geocoding with Gosu</span></div>
    <hr align="left" />
    <blockquote>
      <div class="H1_-_Heading_1"><a name="4821232">Proximity Search and Geocoding with Gosu</a></div>
      <div class="B_-_Body"><a name="4821233">Guidewire provides a number of Gosu methods that you can use to perform proximity searches either on contacts </a>in ContactCenter or on users in the local application. Additionally, there are Gosu methods that you can use to geocode an address or to check to see if an address has already been geocoded.</div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="4824616">ClaimCenter provides Gosu support for proximity searches primarily through the following class:</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="CS_-_Code_Single_Line"><a name="4697782">gw.api.geocode.CCGeocodeScriptHelper</a></div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="4824652">ContactCenter provides Gosu support for proximity searches primarily through the following entity method:</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="CS_-_Code_Single_Line"><a name="4824653">entity.ABContactSearchCriteria.performSearch</a></div>
      <div class="LP_-_List_Para"><a name="4856276">For more information, see </a><a href="javascript:WWHClickedPopup('contact', 'geocode.11.5.html#4857900', '');" title="Proximity Search and Geocoding with Gosu">“ContactCenter Proximity Search Gosu Example”</a>.</div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="4825118">Both ClaimCenter and ContactCenter provide Gosu support for geocoding through the following class:</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="CS_-_Code_Single_Line"><a name="4825119">entity.Address</a></div>
      <div class="B_-_Body"><a name="4857890">ClaimCenter also provides Gosu methods like </a><span class="cv_-_computer_voice"><a href="javascript:WWHClickedPopup('rules', 'assignment_cc.12.16.html#15939643', '');" title="Proximity-Based Assignment">assignUserByProximityWithAssignmentSearchCriteria</a></span> that are useful in assignment rules that do proximity-based assignment. </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="4857894">For a description of these Gosu methods, see </a><a href="javascript:WWHClickedPopup('rules', 'assignment_cc.12.16.html#15816596', '');" title="Proximity-Based Assignment">“Proximity-Based Assignment” in the </a><span class="bt_-_book_title"><a href="javascript:WWHClickedPopup('rules', 'assignment_cc.12.16.html#15816596', '');" title="Proximity-Based Assignment">Rules Guide</a></span>. </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="4857897">For general information about assignment rules, see </a><a href="javascript:WWHClickedPopup('rules', 'assignment_cc.12.01.html#15772420', '');" title="Assignment in ClaimCenter">“Assignment in ClaimCenter” in the </a><span class="bt_-_book_title"><a href="javascript:WWHClickedPopup('rules', 'assignment_cc.12.01.html#15772420', '');" title="Assignment in ClaimCenter">Rules Guide</a></span>. </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="H2_-_Heading_2"><a name="4857900">ContactCenter Proximity Search Gosu Example</a></div>
      <div class="B_-_Body"><a name="4856321">ContactCenter provides the method </a><span class="cv_-_computer_voice">gw.api.database.performSearch</span> to support database search with a number of entities. You can use <span class="cv_-_computer_voice">ABContactSearchCriteria.performSearch</span> to customize how search works with the Geocoding feature. </div>
      <div class="B_-_Body"><a name="4857422">To use this method, you declare an object of type </a><span class="cv_-_computer_voice">ABContactSearchCriteria</span>, define proximity search parameters with <span class="cv_-_computer_voice">ABContactSearchCriteria.ProximitySearchParameters</span>, and call <span class="cv_-_computer_voice">ABContactSearchCriteria.performSearch(true)</span>. The parameter for <span class="cv_-_computer_voice">performSearch</span> is <span class="cv_-_computer_voice">isClearBundle:boolean</span>. You set it to <span class="cv_-_computer_voice">true</span> to clear the <span class="cv_-_computer_voice">ABContactSearchCriteria</span> bundle, which ensures that only the criteria you specify are left.</div>
      <div class="B_-_Body"><a name="4857072">For example, the following method takes a contact subtype, a latitude, and a longitude, and returns an array of </a><span class="cv_-_computer_voice">ABContact</span> objects:</div>
      <PRE class="CF_-_Code_First_Line"><a name="4857082">uses java.math.BigDecimal</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="4857565">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="4857816">...</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="4857819">&nbsp;</a></PRE>
      <PRE class="CF_-_Code_First_Line"><a name="4857520">public function getClosestVendorForLatLong(</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="4857112">&nbsp;</a>&nbsp;&nbsp;&nbsp;ContactSubtype: String,</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="4857174">&nbsp;</a>&nbsp;&nbsp;&nbsp;Latitude : BigDecimal, </PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="4857182">&nbsp;</a>&nbsp;&nbsp;&nbsp;Longitude : BigDecimal) : ABContact[] {</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="4857083">&nbsp;</a>&nbsp;var myLatitude = Latitude.setScale(3,2)</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="4857084">&nbsp;</a>&nbsp;var myLongitude = Longitude.setScale(3,2)</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="4857085">&nbsp;</a>&nbsp;var mySearchCriteria = new ABContactSearchCriteria()</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="4857086">&nbsp;</a>&nbsp;mySearchCriteria.ProximitySearchParameters.DistanceBasedSearch = false</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="4857087">&nbsp;</a>&nbsp;mySearchCriteria.ProximitySearchParameters.Number = 5</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="4857088">&nbsp;</a>&nbsp;mySearchCriteria.ProximitySearchParameters.setGeocodeFieldsFromLatLong(</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="4857856">&nbsp;</a>&nbsp;&nbsp;&nbsp;myLatitude, myLongitude)</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="4857089">&nbsp;</a>&nbsp;mySearchCriteria.ContactSubtype = ContactSubtype</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="4857090">&nbsp;</a>&nbsp;var results = </PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="4857922">&nbsp;</a>&nbsp;&nbsp;&nbsp;mySearchCriteria.performSearch(true).toTypedArray() as ABContact[]</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="4857923">&nbsp;</a>&nbsp;return results</PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="4857078">} </a></PRE>
      <div class="B_-_Body"><a name="4857425">You could expose this method as a web service and call it from an external application.</a></div>
      <div class="B_-_Body"><a name="4857592">For more information on methods and properties of </a><span class="cv_-_computer_voice">ProximitySearchParameters</span> and <span class="cv_-_computer_voice">ABContactSearchCriteria</span>, see the <span class="ui_-_UI_element">Gosu API Reference</span>, available from the <span class="ui_-_UI_element">Help</span> menu in Guidewire Studio.</div>
      <div class="HS_-_Head_Sub"><a name="4856230">See also</a></div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a href="javascript:WWHClickedPopup('contact', 'geocode.11.2.html#4695635', '');" title="Overview of the Geocoding Feature" name="4824482">“Overview of the Geocoding Feature”</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a href="javascript:WWHClickedPopup('contact', 'geocode.11.3.html#4696528', '');" title="The Mechanics of Geocoding" name="4824486">“The Mechanics of Geocoding”</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a href="javascript:WWHClickedPopup('contact', 'geocode.11.4.html#4696221', '');" title="Configuring Geocoding" name="4824490">“Configuring Geocoding”</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap;">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a href="javascript:WWHClickedPopup('rules', 'assignment_cc.12.16.html#15816596', '');" title="Proximity-Based Assignment" name="4825524">“Proximity-Based Assignment” in the </a><span class="bt_-_book_title"><a href="javascript:WWHClickedPopup('rules', 'assignment_cc.12.16.html#15816596', '');" title="Proximity-Based Assignment">Rules Guide</a></span></div>
            </td>
          </tr>
        </table>
      </div>
      <script type="text/javascript" language="JavaScript1.2">
        <!--
          // Clear related topics
          //
          WWHClearRelatedTopics();

          document.writeln(WWHRelatedTopicsInlineHTML());
        // -->
      </script>
    </blockquote>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag() + WWHALinksDivTag());
      // -->
    </script>
  </body>
</html>